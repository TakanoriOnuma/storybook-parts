import{g as O}from"./index-cbc60bfd.js";import{r as m,R as h}from"./index-9f32f44c.js";import{Z as T,H as L,u as X}from"./index-2e760762.js";import{c as d}from"./index-03bbf7d1.js";import{t as z}from"./throttle-45ffedfb.js";import{n as b}from"./index-9e46a6e4.js";import{f as R,T as B,F as G,I as V}from"./index-0d90a496.js";import"./iframe-9b8f7ddb.js";import"../sb-preview/runtime.js";import"./polished.esm-b305131d.js";import"./pickBy-0f17721a.js";import"./_commonjsHelpers-de833af9.js";import"./_baseIteratee-b502d39c.js";import"./_getTag-a3fc040c.js";import"./isObjectLike-7c6e5cb8.js";import"./_baseIsEqual-181029ac.js";import"./isSymbol-6ab5993c.js";import"./_basePickBy-58fe527f.js";import"./_initCloneObject-5b092e6d.js";import"./_baseAssignValue-dc207ad3.js";import"./_getPrototype-7097101e.js";import"./cloneDeep-1fc2f3ad.js";import"./index-b75c9059.js";import"./index.modern-47b9f3ba.js";import"./uniq-a8f06b6c.js";import"./index-356e4a49.js";import"./index-c768ebd8.js";import"./mapValues-e4849353.js";import"./index-177da4c8.js";import"./index-9c2d1831.js";import"./bundle.esm-ef1ed2af.js";var F=b.div({position:"relative",maxWidth:250}),M=b(R)({position:"absolute",zIndex:1,top:4,left:4}),W=b.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),N=b(B)(({theme:t})=>({fontFamily:t.typography.fonts.base})),A=b.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),j=b.div(({theme:t,active:e})=>({width:16,height:16,boxShadow:e?`${t.appBorderColor} 0 0 0 1px inset, ${t.textMutedColor}50 0 0 0 4px`:`${t.appBorderColor} 0 0 0 1px inset`,borderRadius:t.appBorderRadius})),Z=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,C=({value:t,active:e,onClick:a,style:n,...r})=>{const o=`linear-gradient(${t}, ${t}), ${Z}, linear-gradient(#fff, #fff)`;return h.createElement(j,{...r,active:e,onClick:a,style:{...n,backgroundImage:o}})},q=b(G.Input)(({theme:t})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:t.typography.fonts.base})),D=b(V)(({theme:t})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:t.input.color})),P=(t=>(t.RGB="rgb",t.HSL="hsl",t.HEX="hex",t))(P||{}),$=Object.values(P),J=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,K=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Q=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,E=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,U=/^\s*#?([0-9a-f]{3})\s*$/i,Y={hex:T,rgb:L,hsl:X},w={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},S=t=>{const e=t==null?void 0:t.match(J);if(!e)return[0,0,0,1];const[,a,n,r,o=1]=e;return[a,n,r,o].map(Number)},x=t=>{if(!t)return;let e=!0;if(K.test(t)){const[l,p,i,g]=S(t),[f,c,s]=d.rgb.hsl([l,p,i])||[0,0,0];return{valid:e,value:t,keyword:d.rgb.keyword([l,p,i]),colorSpace:"rgb",rgb:t,hsl:`hsla(${f}, ${c}%, ${s}%, ${g})`,hex:`#${d.rgb.hex([l,p,i]).toLowerCase()}`}}if(Q.test(t)){const[l,p,i,g]=S(t),[f,c,s]=d.hsl.rgb([l,p,i])||[0,0,0];return{valid:e,value:t,keyword:d.hsl.keyword([l,p,i]),colorSpace:"hsl",rgb:`rgba(${f}, ${c}, ${s}, ${g})`,hsl:t,hex:`#${d.hsl.hex([l,p,i]).toLowerCase()}`}}const a=t.replace("#",""),n=d.keyword.rgb(a)||d.hex.rgb(a),r=d.rgb.hsl(n);let o=t;if(/[^#a-f0-9]/i.test(t)?o=a:E.test(t)&&(o=`#${a}`),o.startsWith("#"))e=E.test(o);else try{d.keyword.hex(o)}catch{e=!1}return{valid:e,value:o,keyword:d.rgb.keyword(n),colorSpace:"hex",rgb:`rgba(${n[0]}, ${n[1]}, ${n[2]}, 1)`,hsl:`hsla(${r[0]}, ${r[1]}%, ${r[2]}%, 1)`,hex:o}},tt=(t,e,a)=>{if(!t||!(e!=null&&e.valid))return w[a];if(a!=="hex")return(e==null?void 0:e[a])||w[a];if(!e.hex.startsWith("#"))try{return`#${d.keyword.hex(e.hex)}`}catch{return w.hex}const n=e.hex.match(U);if(!n)return E.test(e.hex)?e.hex:w.hex;const[r,o,l]=n[1].split("");return`#${r}${r}${o}${o}${l}${l}`},et=(t,e)=>{const[a,n]=m.useState(t||""),[r,o]=m.useState(()=>x(a)),[l,p]=m.useState((r==null?void 0:r.colorSpace)||"hex");m.useEffect(()=>{const c=t||"",s=x(c);n(c),o(s),p((s==null?void 0:s.colorSpace)||"hex")},[t]);const i=m.useMemo(()=>tt(a,r,l).toLowerCase(),[a,r,l]),g=m.useCallback(c=>{const s=x(c),v=(s==null?void 0:s.value)||c||"";n(v),v===""&&(o(void 0),e(void 0)),s&&(o(s),p(s.colorSpace),e(s.value))},[e]),f=m.useCallback(()=>{let c=$.indexOf(l)+1;c>=$.length&&(c=0),p($[c]);const s=(r==null?void 0:r[$[c]])||"";n(s),e(s)},[r,l,e]);return{value:a,realValue:i,updateValue:g,color:r,colorSpace:l,cycleColorSpace:f}},y=t=>t.replace(/\s*/,"").toLowerCase(),rt=(t,e,a)=>{const[n,r]=m.useState(e!=null&&e.valid?[e]:[]);m.useEffect(()=>{e===void 0&&r([])},[e]);const o=m.useMemo(()=>(t||[]).map(i=>typeof i=="string"?x(i):i.title?{...x(i.color),keyword:i.title}:x(i.color)).concat(n).filter(Boolean).slice(-27),[t,n]),l=m.useCallback(p=>{p!=null&&p.valid&&(o.some(i=>y(i[a])===y(p[a]))||r(i=>i.concat(p)))},[a,o]);return{presets:o,addPreset:l}},at=({name:t,value:e,onChange:a,onFocus:n,onBlur:r,presetColors:o,startOpen:l=!1})=>{const p=m.useCallback(z(a,200),[a]),{value:i,realValue:g,updateValue:f,color:c,colorSpace:s,cycleColorSpace:v}=et(e,p),{presets:k,addPreset:_}=rt(o,c,s),H=Y[s];return h.createElement(F,null,h.createElement(M,{startOpen:l,closeOnOutsideClick:!0,onVisibleChange:()=>_(c),tooltip:h.createElement(W,null,h.createElement(H,{color:g==="transparent"?"#000000":g,onChange:f,onFocus:n,onBlur:r}),k.length>0&&h.createElement(A,null,k.map((u,I)=>h.createElement(R,{key:`${u.value}-${I}`,hasChrome:!1,tooltip:h.createElement(N,{note:u.keyword||u.value})},h.createElement(C,{value:u[s],active:c&&y(u[s])===y(c[s]),onClick:()=>f(u.value)})))))},h.createElement(C,{value:g,style:{margin:4}})),h.createElement(q,{id:O(t),value:i,onChange:u=>f(u.target.value),onFocus:u=>u.target.select(),placeholder:"Choose color..."}),i?h.createElement(D,{icon:"markup",onClick:v}):null)},Xt=at;export{at as ColorControl,Xt as default};
//# sourceMappingURL=Color-7GWY2BML-4ab575a1.js.map
