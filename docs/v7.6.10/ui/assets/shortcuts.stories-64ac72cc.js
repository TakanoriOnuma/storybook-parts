import{a as c,j as u}from"./jsx-runtime-31019b9d.js";import{b as T}from"./chunk-C5H4AMN5-7fdb7c46.js";import{r as F}from"./index-9f32f44c.js";import{n as s,k as D}from"./index-9e46a6e4.js";import{e as I,f as K,s as N}from"./index-0d1d6e7e.js";import{F as k,I as V}from"./index-0d90a496.js";import{S as A}from"./SettingsFooter-3f6ec00d.js";import"./preview-errors-208e1923.js";import"./index-356e4a49.js";import"./_commonjsHelpers-de833af9.js";import"./_getTag-a3fc040c.js";import"./isObjectLike-7c6e5cb8.js";import"./_baseAssignValue-dc207ad3.js";import"./mapValues-e4849353.js";import"./_baseIteratee-b502d39c.js";import"./_baseIsEqual-181029ac.js";import"./isSymbol-6ab5993c.js";import"./_initCloneObject-5b092e6d.js";import"./_getPrototype-7097101e.js";import"./isPlainObject-1556099e.js";import"./index-177da4c8.js";import"./isEqual-8e48f6f6.js";import"./index-b75c9059.js";import"./_basePickBy-58fe527f.js";import"./chunk-LNB2LN6G-b56da3a7.js";import"./index-9ed7e0e5.js";import"./iframe-9b8f7ddb.js";import"../sb-preview/runtime.js";import"./index-9c2d1831.js";import"./bundle.esm-ef1ed2af.js";const C=s.header(({theme:a})=>({marginBottom:20,fontSize:a.typography.size.m3,fontWeight:a.typography.weight.bold,alignItems:"center",display:"flex"})),d=s.div(({theme:a})=>({fontWeight:a.typography.weight.bold})),m=s.div({alignSelf:"flex-end",display:"grid",margin:"10px 0",gridTemplateColumns:"1fr 1fr 12px","& > *:last-of-type":{gridColumn:"2 / 2",justifySelf:"flex-end",gridRow:"1"}}),h=s.div(({theme:a})=>({padding:"6px 0",borderTop:`1px solid ${a.appBorderColor}`,display:"grid",gridTemplateColumns:"1fr 1fr 0px"})),y=s.div({display:"grid",gridTemplateColumns:"1fr",gridAutoRows:"minmax(auto, auto)",marginBottom:20}),f=s.div({alignSelf:"center"}),g=s(k.Input)(({valid:a,theme:r})=>a==="error"?{animation:`${r.animation.jiggle} 700ms ease-out`}:{},{display:"flex",width:80,flexDirection:"column",justifySelf:"flex-end",paddingLeft:4,paddingRight:4,textAlign:"center"}),P=D`
0%,100% { opacity: 0; }
  50% { opacity: 1; }
`,b=s(V)(({valid:a,theme:r})=>a==="valid"?{color:r.color.positive,animation:`${P} 2s ease forwards`}:{opacity:0},{alignSelf:"center",display:"flex",marginLeft:10,height:14,width:14}),R=s.div(({theme:a})=>({fontSize:a.typography.size.s2,padding:"3rem 20px",maxWidth:600,margin:"0 auto"})),z={fullScreen:"Go full screen",togglePanel:"Toggle addons",panelPosition:"Toggle addons orientation",toggleNav:"Toggle sidebar",toolbar:"Toggle canvas toolbar",search:"Focus search",focusNav:"Focus sidebar",focusIframe:"Focus canvas",focusPanel:"Focus addons",prevComponent:"Previous component",nextComponent:"Next component",prevStory:"Previous story",nextStory:"Next story",shortcutsPage:"Go to shortcuts page",aboutPage:"Go to about page",collapseAll:"Collapse all items on sidebar",expandAll:"Expand all items on sidebar",remount:"Remount component"},j=["escape"];function v(a){return Object.entries(a).reduce((r,[e,t])=>j.includes(e)?r:{...r,[e]:{shortcut:t,error:!1}},{})}class p extends F.Component{constructor(r){super(r),this.onKeyDown=e=>{const{activeFeature:t,shortcutKeys:o}=this.state;if(e.key==="Backspace")return this.restoreDefault();const l=I(e);if(!l)return!1;const i=!!Object.entries(o).find(([q,{shortcut:S}])=>q!==t&&S&&K(l,S));return this.setState({shortcutKeys:{...o,[t]:{shortcut:l,error:i}}})},this.onFocus=e=>()=>{const{shortcutKeys:t}=this.state;this.setState({activeFeature:e,shortcutKeys:{...t,[e]:{shortcut:null,error:!1}}})},this.onBlur=async()=>{const{shortcutKeys:e,activeFeature:t}=this.state;if(e[t]){const{shortcut:o,error:l}=e[t];return!o||l?this.restoreDefault():this.saveShortcut()}return!1},this.saveShortcut=async()=>{const{activeFeature:e,shortcutKeys:t}=this.state,{setShortcut:o}=this.props;await o(e,t[e].shortcut),this.setState({successField:e})},this.restoreDefaults=async()=>{const{restoreAllDefaultShortcuts:e}=this.props,t=await e();return this.setState({shortcutKeys:v(t)})},this.restoreDefault=async()=>{const{activeFeature:e,shortcutKeys:t}=this.state,{restoreDefaultShortcut:o}=this.props,l=await o(e);return this.setState({shortcutKeys:{...t,...v({[e]:l})}})},this.displaySuccessMessage=e=>{const{successField:t,shortcutKeys:o}=this.state;return e===t&&o[e].error===!1?"valid":void 0},this.displayError=e=>{const{activeFeature:t,shortcutKeys:o}=this.state;return e===t&&o[e].error===!0?"error":void 0},this.renderKeyInput=()=>{const{shortcutKeys:e,addonsShortcutLabels:t}=this.state;return Object.entries(e).map(([l,{shortcut:i}])=>c(h,{children:[u(f,{children:z[l]||t[l]}),u(g,{spellCheck:"false",valid:this.displayError(l),className:"modalInput",onBlur:this.onBlur,onFocus:this.onFocus(l),onKeyDown:this.onKeyDown,value:i?N(i):"",placeholder:"Type keys",readOnly:!0}),u(b,{valid:this.displaySuccessMessage(l),icon:"check"})]},l))},this.renderKeyForm=()=>c(y,{children:[c(m,{children:[u(d,{children:"Commands"}),u(d,{children:"Shortcut"})]}),this.renderKeyInput()]}),this.state={activeFeature:void 0,successField:void 0,shortcutKeys:v(r.shortcutKeys),addonsShortcutLabels:r.addonsShortcutLabels}}render(){const r=this.renderKeyForm();return c(R,{children:[u(C,{children:"Keyboard shortcuts"}),r,u(k.Button,{tertiary:!0,small:!0,id:"restoreDefaultsHotkeys",onClick:this.restoreDefaults,children:"Restore defaults"}),u(A,{})]})}}try{d.displayName="HeaderItem",d.__docgenInfo={description:"",displayName:"HeaderItem",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}}}catch{}try{m.displayName="GridHeaderRow",m.__docgenInfo={description:"",displayName:"GridHeaderRow",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}}}catch{}try{h.displayName="Row",h.__docgenInfo={description:"",displayName:"Row",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}}}catch{}try{y.displayName="GridWrapper",y.__docgenInfo={description:"",displayName:"GridWrapper",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}}}catch{}try{f.displayName="Description",f.__docgenInfo={description:"",displayName:"Description",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}}}}}catch{}try{g.displayName="TextInput",g.__docgenInfo={description:"",displayName:"TextInput",props:{height:{defaultValue:null,description:"",name:"height",required:!1,type:{name:"number"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"flex"'},{value:'"auto"'},{value:'"100%"'}]}},align:{defaultValue:null,description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"end"'},{value:'"start"'}]}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"enum",value:[{value:'"error"'},{value:'"valid"'},{value:'"warn"'}]}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}}}}}catch{}try{b.displayName="SuccessIcon",b.__docgenInfo={description:"",displayName:"SuccessIcon",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"enum",value:[{value:'"key"'},{value:'"alert"'},{value:'"button"'},{value:'"document"'},{value:'"form"'},{value:'"grid"'},{value:'"link"'},{value:'"menu"'},{value:'"search"'},{value:'"timer"'},{value:'"email"'},{value:'"location"'},{value:'"time"'},{value:'"copy"'},{value:'"video"'},{value:'"circle"'},{value:'"filter"'},{value:'"stop"'},{value:'"clear"'},{value:'"zoom"'},{value:'"outline"'},{value:'"component"'},{value:'"type"'},{value:'"medium"'},{value:'"markdown"'},{value:'"bold"'},{value:'"italic"'},{value:'"collapse"'},{value:'"graphql"'},{value:'"play"'},{value:'"check"'},{value:'"ellipsis"'},{value:'"controls"'},{value:'"download"'},{value:'"user"'},{value:'"useralt"'},{value:'"useradd"'},{value:'"users"'},{value:'"profile"'},{value:'"facehappy"'},{value:'"faceneutral"'},{value:'"facesad"'},{value:'"accessibility"'},{value:'"accessibilityalt"'},{value:'"arrowup"'},{value:'"arrowdown"'},{value:'"arrowleft"'},{value:'"arrowright"'},{value:'"arrowupalt"'},{value:'"arrowdownalt"'},{value:'"arrowleftalt"'},{value:'"arrowrightalt"'},{value:'"expandalt"'},{value:'"expand"'},{value:'"unfold"'},{value:'"transfer"'},{value:'"redirect"'},{value:'"undo"'},{value:'"reply"'},{value:'"sync"'},{value:'"upload"'},{value:'"back"'},{value:'"proceed"'},{value:'"refresh"'},{value:'"globe"'},{value:'"compass"'},{value:'"pin"'},{value:'"dashboard"'},{value:'"home"'},{value:'"admin"'},{value:'"info"'},{value:'"question"'},{value:'"support"'},{value:'"phone"'},{value:'"unlink"'},{value:'"bell"'},{value:'"rss"'},{value:'"sharealt"'},{value:'"share"'},{value:'"circlehollow"'},{value:'"bookmarkhollow"'},{value:'"bookmark"'},{value:'"hearthollow"'},{value:'"heart"'},{value:'"starhollow"'},{value:'"star"'},{value:'"certificate"'},{value:'"verified"'},{value:'"thumbsup"'},{value:'"shield"'},{value:'"basket"'},{value:'"beaker"'},{value:'"hourglass"'},{value:'"flag"'},{value:'"cloudhollow"'},{value:'"cloud"'},{value:'"edit"'},{value:'"cog"'},{value:'"nut"'},{value:'"wrench"'},{value:'"batchdeny"'},{value:'"batchaccept"'},{value:'"plus"'},{value:'"closeAlt"'},{value:'"cross"'},{value:'"trash"'},{value:'"pinalt"'},{value:'"unpin"'},{value:'"add"'},{value:'"subtract"'},{value:'"close"'},{value:'"delete"'},{value:'"passed"'},{value:'"changed"'},{value:'"failed"'},{value:'"comment"'},{value:'"commentadd"'},{value:'"requestchange"'},{value:'"comments"'},{value:'"lock"'},{value:'"unlock"'},{value:'"outbox"'},{value:'"credit"'},{value:'"pointerdefault"'},{value:'"pointerhand"'},{value:'"browser"'},{value:'"tablet"'},{value:'"mobile"'},{value:'"watch"'},{value:'"sidebar"'},{value:'"sidebaralt"'},{value:'"sidebaralttoggle"'},{value:'"sidebartoggle"'},{value:'"bottombar"'},{value:'"bottombartoggle"'},{value:'"cpu"'},{value:'"database"'},{value:'"memory"'},{value:'"structure"'},{value:'"box"'},{value:'"power"'},{value:'"photo"'},{value:'"photodrag"'},{value:'"zoomout"'},{value:'"zoomreset"'},{value:'"eye"'},{value:'"eyeclose"'},{value:'"lightning"'},{value:'"lightningoff"'},{value:'"contrast"'},{value:'"switchalt"'},{value:'"mirror"'},{value:'"grow"'},{value:'"paintbrush"'},{value:'"ruler"'},{value:'"camera"'},{value:'"speaker"'},{value:'"playback"'},{value:'"playnext"'},{value:'"rewind"'},{value:'"fastforward"'},{value:'"stopalt"'},{value:'"sidebyside"'},{value:'"stacked"'},{value:'"sun"'},{value:'"moon"'},{value:'"book"'},{value:'"category"'},{value:'"folder"'},{value:'"print"'},{value:'"graphline"'},{value:'"calendar"'},{value:'"graphbar"'},{value:'"menualt"'},{value:'"docchart"'},{value:'"doclist"'},{value:'"markup"'},{value:'"paperclip"'},{value:'"listordered"'},{value:'"listunordered"'},{value:'"paragraph"'},{value:'"repository"'},{value:'"commit"'},{value:'"branch"'},{value:'"pullrequest"'},{value:'"merge"'},{value:'"apple"'},{value:'"linux"'},{value:'"ubuntu"'},{value:'"windows"'},{value:'"storybook"'},{value:'"azuredevops"'},{value:'"bitbucket"'},{value:'"chrome"'},{value:'"chromatic"'},{value:'"componentdriven"'},{value:'"discord"'},{value:'"facebook"'},{value:'"figma"'},{value:'"gdrive"'},{value:'"github"'},{value:'"gitlab"'},{value:'"google"'},{value:'"redux"'},{value:'"twitter"'},{value:'"youtube"'},{value:'"vscode"'}]}},useSymbol:{defaultValue:null,description:"",name:"useSymbol",required:!1,type:{name:"boolean"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},valid:{defaultValue:null,description:"",name:"valid",required:!0,type:{name:"string"}}}}}catch{}try{p.displayName="ShortcutsScreen",p.__docgenInfo={description:"",displayName:"ShortcutsScreen",props:{shortcutKeys:{defaultValue:null,description:"",name:"shortcutKeys",required:!0,type:{name:'Record<"search" | "toolbar" | "panelPosition" | "fullScreen" | "togglePanel" | "toggleNav" | "focusNav" | "focusIframe" | "focusPanel" | "prevComponent" | "nextComponent" | "prevStory" | ... 5 more ... | "remount", any>'}},addonsShortcutLabels:{defaultValue:null,description:"",name:"addonsShortcutLabels",required:!1,type:{name:"Record<string, string>"}},setShortcut:{defaultValue:null,description:"",name:"setShortcut",required:!0,type:{name:"Function"}},restoreDefaultShortcut:{defaultValue:null,description:"",name:"restoreDefaultShortcut",required:!0,type:{name:"Function"}},restoreAllDefaultShortcuts:{defaultValue:null,description:"",name:"restoreAllDefaultShortcuts",required:!0,type:{name:"Function"}}}}}catch{}const E={fullScreen:["F"],togglePanel:["A"],panelPosition:["D"],toggleNav:["S"],toolbar:["T"],search:["/"],focusNav:["1"],focusIframe:["2"],focusPanel:["3"],prevComponent:["alt","ArrowUp"],nextComponent:["alt","ArrowDown"],prevStory:["alt","ArrowLeft"],nextStory:["alt","ArrowRight"],shortcutsPage:["ctrl","shift",","],aboutPage:[","],escape:["escape"],collapseAll:["ctrl","shift","ArrowUp"],expandAll:["ctrl","shift","ArrowDown"],remount:["alt","R"]},G=T("setShortcut","restoreDefaultShortcut","restoreAllDefaultShortcuts","onClose"),fe={component:p,title:"Settings/ShortcutsScreen",decorators:[(a,r)=>u("div",{style:{position:"relative",height:"calc(100vh)",width:"calc(100vw)"},children:u(a,{...r})})]},n=()=>u(p,{shortcutKeys:E,...G});n.storyName="default shortcuts";var _,w,x;n.parameters={...n.parameters,docs:{...(_=n.parameters)==null?void 0:_.docs,source:{originalSource:"() => <ShortcutsScreen shortcutKeys={defaultShortcuts} {...actions} />",...(x=(w=n.parameters)==null?void 0:w.docs)==null?void 0:x.source}}};const ge=["Defaults"];export{n as Defaults,ge as __namedExportsOrder,fe as default};
//# sourceMappingURL=shortcuts.stories-64ac72cc.js.map
