import{j as t,a as V,F as q}from"./jsx-runtime-0f39435c.js";import{s as h}from"./index-d475d2ea.js";import{r as l}from"./index-6f814c40.js";import{L as w,E,g as R}from"./index-90790cc0.js";const F=l.createContext({scale:1}),{window:x}=h;class c extends l.Component{constructor(){super(...arguments),this.iframe=null}componentDidMount(){const{id:r}=this.props;this.iframe=x.document.getElementById(r)}shouldComponentUpdate(r){const{scale:n}=r;return n!==this.props.scale&&this.setIframeBodyStyle({width:`${n*100}%`,height:`${n*100}%`,transform:`scale(${1/n})`,transformOrigin:"top left"}),!1}setIframeBodyStyle(r){return Object.assign(this.iframe.contentDocument.body.style,r)}render(){const{id:r,title:n,src:s,allowFullScreen:i,scale:d,...a}=this.props;return t("iframe",{id:r,title:n,src:s,...i?{allow:"fullscreen"}:{},loading:"lazy",...a})}}try{c.displayName="IFrame",c.__docgenInfo={description:"",displayName:"IFrame",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},allowFullScreen:{defaultValue:null,description:"",name:"allowFullScreen",required:!0,type:{name:"boolean"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}}}}}catch{}const{PREVIEW_URL:k}=h,$=k||"iframe.html",o=({story:e,primary:r})=>`story--${e.id}${r?"--primary":""}`,C=e=>{const r=l.useRef(),[n,s]=l.useState(!0),[i,d]=l.useState(),{story:a,height:m,autoplay:p,forceInitialArgs:g,renderStoryToElement:y}=e;l.useEffect(()=>{if(!(a&&r.current))return()=>{};const _=r.current,I=y(a,_,{showMain:()=>{},showError:({title:u,description:b})=>d(new Error(`${u} - ${b}`)),showException:u=>d(u)},{autoplay:p,forceInitialArgs:g});return s(!1),()=>{Promise.resolve().then(()=>I())}},[p,y,a]);const S="<span></span>";return i?t("pre",{children:t(E,{error:i})}):V(q,{children:[m?t("style",{children:`#${o(e)} { min-height: ${m}; transform: translateZ(0); overflow: auto }`}):null,n&&t(v,{}),t("div",{ref:r,id:`${o(e)}-inner`,"data-name":a.name,dangerouslySetInnerHTML:{__html:S}})]})},L=({story:e,height:r="500px"})=>t("div",{style:{width:"100%",height:r},children:t(F.Consumer,{children:({scale:n})=>t(c,{id:`iframe--${e.id}`,title:e.name,src:R($,e.id,{viewMode:"story"}),allowFullScreen:!0,scale:n,style:{width:"100%",height:"100%",border:"0 none"}},"iframe")})}),f=e=>{const{inline:r}=e;return t("div",{id:o(e),className:"sb-story sb-unstyled","data-story-block":"true",children:r?t(C,{...e}):t(L,{...e})})},v=()=>t(w,{});try{o.displayName="storyBlockIdFromId",o.__docgenInfo={description:"",displayName:"storyBlockIdFromId",props:{inline:{defaultValue:null,description:"",name:"inline",required:!0,type:{name:"boolean"}},height:{defaultValue:{value:"500px"},description:"",name:"height",required:!1,type:{name:"string"}},autoplay:{defaultValue:null,description:"",name:"autoplay",required:!0,type:{name:"boolean"}},forceInitialArgs:{defaultValue:null,description:"",name:"forceInitialArgs",required:!0,type:{name:"boolean"}},renderStoryToElement:{defaultValue:null,description:"",name:"renderStoryToElement",required:!0,type:{name:"(story: PreparedStory<Renderer>, element: HTMLElement, callbacks: RenderContextCallbacks<Renderer>, options: StoryRenderOptions) => () => Promise<...>"}},story:{defaultValue:null,description:"",name:"story",required:!0,type:{name:"PreparedStory<Renderer>"}},primary:{defaultValue:null,description:"",name:"primary",required:!0,type:{name:"boolean"}}}}}catch{}try{f.displayName="Story",f.__docgenInfo={description:`A story element, either rendered inline or in an iframe,
with configurable height.`,displayName:"Story",props:{inline:{defaultValue:null,description:"",name:"inline",required:!0,type:{name:"boolean"}},height:{defaultValue:{value:"500px"},description:"",name:"height",required:!1,type:{name:"string"}},autoplay:{defaultValue:null,description:"",name:"autoplay",required:!0,type:{name:"boolean"}},forceInitialArgs:{defaultValue:null,description:"",name:"forceInitialArgs",required:!0,type:{name:"boolean"}},renderStoryToElement:{defaultValue:null,description:"",name:"renderStoryToElement",required:!0,type:{name:"(story: PreparedStory<Renderer>, element: HTMLElement, callbacks: RenderContextCallbacks<Renderer>, options: StoryRenderOptions) => () => Promise<...>"}},story:{defaultValue:null,description:"",name:"story",required:!0,type:{name:"PreparedStory<Renderer>"}},primary:{defaultValue:null,description:"",name:"primary",required:!0,type:{name:"boolean"}}}}}catch{}export{v as S,F as Z,f as a};
//# sourceMappingURL=Story-134a3f6e.js.map
