{"version":3,"file":"Menu-26934337.js","sources":["../../ui/manager/src/components/sidebar/Menu.tsx"],"sourcesContent":["import type { ComponentProps, FC } from 'react';\nimport React, { useMemo, useState } from 'react';\n\nimport { styled } from '@storybook/theming';\nimport { transparentize } from 'polished';\nimport type { Button, TooltipLinkListLink } from '@storybook/components';\nimport { WithTooltip, TooltipLinkList, Icons, IconButton } from '@storybook/components';\n\nexport type MenuList = ComponentProps<typeof TooltipLinkList>['links'];\n\nconst sharedStyles = {\n  height: 10,\n  width: 10,\n  marginLeft: -5,\n  marginRight: -5,\n  display: 'block',\n};\n\nconst Icon = styled(Icons)(sharedStyles, ({ theme }) => ({\n  color: theme.color.secondary,\n}));\n\nexport const SidebarIconButton: FC<\n  ComponentProps<typeof Button> & { highlighted: boolean; active: boolean }\n> = styled(IconButton)<\n  ComponentProps<typeof Button> & {\n    highlighted: boolean;\n    active: boolean;\n  }\n>(({ highlighted, active, theme }) => ({\n  position: 'relative',\n  overflow: 'visible',\n  color: theme.textMutedColor,\n  marginTop: 0,\n  zIndex: 1,\n\n  ...(highlighted && {\n    '&:before, &:after': {\n      content: '\"\"',\n      position: 'absolute',\n      top: 6,\n      right: 6,\n      width: 5,\n      height: 5,\n      zIndex: 2,\n      borderRadius: '50%',\n      background: theme.background.app,\n      border: `1px solid ${theme.background.app}`,\n      boxShadow: `0 0 0 2px ${theme.background.app}`,\n    },\n    '&:after': {\n      background: theme.color.positive,\n      border: `1px solid rgba(0, 0, 0, 0.1)`,\n      boxShadow: `0 0 0 2px ${theme.background.app}`,\n    },\n\n    '&:hover:after, &:focus-visible:after': {\n      boxShadow: `0 0 0 2px ${transparentize(0.88, theme.color.secondary)}`,\n    },\n  }),\n  ...(active && {\n    color: theme.color.secondary,\n  }),\n}));\n\nconst Img = styled.img(sharedStyles);\nconst Placeholder = styled.div(sharedStyles);\n\nexport interface ListItemIconProps {\n  icon?: ComponentProps<typeof Icons>['icon'];\n  imgSrc?: string;\n}\n\n/**\n * @deprecated Please use `Icons` from `@storybook/components` instead\n * Component will be removed in SB 8.0\n */\nexport const MenuItemIcon = ({ icon, imgSrc }: ListItemIconProps) => {\n  if (icon) {\n    return <Icon icon={icon} />;\n  }\n  if (imgSrc) {\n    return <Img src={imgSrc} alt=\"image\" />;\n  }\n  return <Placeholder />;\n};\n\ntype ClickHandler = TooltipLinkListLink['onClick'];\n\nconst SidebarMenuList: FC<{\n  menu: MenuList;\n  onHide: () => void;\n}> = ({ menu, onHide }) => {\n  const links = useMemo(() => {\n    return menu.map(({ onClick, ...rest }) => ({\n      ...rest,\n      onClick: ((event, item) => {\n        if (onClick) {\n          onClick(event, item);\n        }\n        onHide();\n      }) as ClickHandler,\n    }));\n  }, [menu]);\n  return <TooltipLinkList links={links} />;\n};\n\nexport const SidebarMenu: FC<{\n  menu: MenuList;\n  isHighlighted?: boolean;\n}> = ({ menu, isHighlighted }) => {\n  const [isTooltipVisible, setIsTooltipVisible] = useState(false);\n  return (\n    <WithTooltip\n      placement=\"top\"\n      closeOnOutsideClick\n      tooltip={({ onHide }) => <SidebarMenuList onHide={onHide} menu={menu} />}\n      onVisibleChange={setIsTooltipVisible}\n    >\n      <SidebarIconButton\n        title=\"Shortcuts\"\n        aria-label=\"Shortcuts\"\n        highlighted={isHighlighted}\n        active={isTooltipVisible}\n      >\n        <Icons icon=\"cog\" />\n      </SidebarIconButton>\n    </WithTooltip>\n  );\n};\n\nexport const ToolbarMenu: FC<{\n  menu: MenuList;\n}> = ({ menu }) => {\n  return (\n    <WithTooltip\n      placement=\"bottom\"\n      closeOnOutsideClick\n      modifiers={[\n        {\n          name: 'flip',\n          options: {\n            allowedAutoPlacements: [],\n          },\n        },\n      ]}\n      tooltip={({ onHide }) => <SidebarMenuList onHide={onHide} menu={menu} />}\n    >\n      <IconButton title=\"Shortcuts\" aria-label=\"Shortcuts\">\n        <Icons icon=\"menu\" />\n      </IconButton>\n    </WithTooltip>\n  );\n};\n"],"names":["sharedStyles","Icon","styled","Icons","theme","SidebarIconButton","IconButton","highlighted","active","transparentize","Img","Placeholder","MenuItemIcon","icon","imgSrc","jsx","SidebarMenuList","menu","onHide","links","useMemo","onClick","rest","event","item","TooltipLinkList","SidebarMenu","isHighlighted","isTooltipVisible","setIsTooltipVisible","useState","WithTooltip","ToolbarMenu"],"mappings":"0OAUA,MAAAA,EAAA,CAAqB,OAAA,GACX,MAAA,GACD,WAAA,GACK,YAAA,GACC,QAAA,OAEf,EAEAC,EAAAC,EAAAC,CAAA,EAAAH,EAAA,CAAA,CAAA,MAAAI,MAAA,CAAyD,MAAAA,EAAA,MAAA,SAEzD,EAAA,EAEOC,EAAAH,EAAAI,CAAA,EAAA,CAAA,CAAA,YAAAC,EAAA,OAAAC,EAAA,MAAAJ,MAAA,CAOgC,SAAA,WAC3B,SAAA,UACA,MAAAA,EAAA,eACG,UAAA,EACF,OAAA,EACH,GAAAG,GAAA,CAEW,oBAAA,CACI,QAAA,KACV,SAAA,WACC,IAAA,EACL,MAAA,EACE,MAAA,EACA,OAAA,EACC,OAAA,EACA,aAAA,MACM,WAAAH,EAAA,WAAA,IACe,OAAA,aAAAA,EAAA,WAAA,GAAA,GACY,UAAA,aAAAA,EAAA,WAAA,GAAA,EACG,EAC9C,UAAA,CACW,WAAAA,EAAA,MAAA,SACe,OAAA,+BAChB,UAAA,aAAAA,EAAA,WAAA,GAAA,EACoC,EAC9C,uCAAA,CAEwC,UAAA,aAAAK,EAAA,IAAAL,EAAA,MAAA,SAAA,CAAA,EAC6B,CACrE,EACF,GAAAI,GAAA,CACc,MAAAJ,EAAA,MAAA,SACO,CAEvB,EAAA,EAEAM,EAAAR,EAAA,IAAAF,CAAA,EACAW,EAAAT,EAAA,IAAAF,CAAA,EAWOY,EAAA,CAAA,CAAA,KAAAC,EAAA,OAAAC,KACLD,EACEE,EAAAd,EAAA,CAAA,KAAAY,CAAA,CAAA,EAEFC,EACEC,EAAAL,EAAA,CAAA,IAAAI,EAAA,IAAA,OAAA,CAAA,EAEFC,EAAAJ,EAAA,CAAA,CAAA,EAKFK,EAAA,CAAA,CAAA,KAAAC,EAAA,OAAAC,KAAA,CAIE,MAAAC,EAAAC,EAAAA,QAAA,IACEH,EAAA,IAAA,CAAA,CAAA,QAAAI,EAAA,GAAAC,CAAA,KAAA,CAA2C,GAAAA,EACtC,QAAA,CAAAC,EAAAC,IAAA,CAEDH,GACEA,EAAAE,EAAAC,CAAA,EAEFN,GAAO,CACT,EAAA,EACA,CAAAD,CAAA,CAAA,EAEJ,OAAAF,EAAAU,EAAA,CAAA,MAAAN,CAAA,CAAA,CACF,EAEOO,EAAA,CAAA,CAAA,KAAAT,EAAA,cAAAU,KAAA,CAIL,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,OAAAf,EACEgB,EAAC,CAAA,UAAA,MACW,oBAAA,GACS,QAAA,CAAA,CAAA,OAAAb,KAAAH,EAAAC,EAAA,CAAA,OAAAE,EAAA,KAAAD,EAAA,EACmD,gBAAAY,EACrD,SAAAd,EAEjBV,EAAC,CAAA,MAAA,YACO,aAAA,YACK,YAAAsB,EACE,OAAAC,EACL,SAAAb,EAAAZ,EAAA,CAAA,KAAA,KAAA,CAAA,CAEU,CAAA,CACpB,CAAA,CAGN,EAEO6B,EAAA,CAAA,CAAA,KAAAf,KAGLF,EACEgB,EAAC,CAAA,UAAA,SACW,oBAAA,GACS,UAAA,CACR,CACT,KAAA,OACQ,QAAA,CACG,sBAAA,CAAA,CACiB,CAC1B,CACF,EACF,QAAA,CAAA,CAAA,OAAAb,KAAAH,EAAAC,EAAA,CAAA,OAAAE,EAAA,KAAAD,EAAA,EACsE,SAAAF,EAAAT,EAAA,CAAA,MAAA,YAAA,aAAA,YAAA,SAAAS,EAAAZ,EAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,CAItE,CAAA"}