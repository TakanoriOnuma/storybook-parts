{"version":3,"file":"preview-fa241db3.js","sources":["../../node_modules/@storybook/addon-backgrounds/dist/preview.js"],"sourcesContent":["import { useMemo, useEffect } from '@storybook/preview-api';\nimport { global } from '@storybook/global';\nimport { dedent } from 'ts-dedent';\nimport { logger } from '@storybook/client-logger';\n\n// src/decorators/withBackground.ts\nvar PARAM_KEY = \"backgrounds\";\nvar { document, window } = global;\nvar isReduceMotionEnabled = () => {\n  const prefersReduceMotion = window.matchMedia(\"(prefers-reduced-motion: reduce)\");\n  return prefersReduceMotion.matches;\n};\nvar getBackgroundColorByName = (currentSelectedValue, backgrounds = [], defaultName) => {\n  if (currentSelectedValue === \"transparent\") {\n    return \"transparent\";\n  }\n  if (backgrounds.find((background) => background.value === currentSelectedValue)) {\n    return currentSelectedValue;\n  }\n  const defaultBackground = backgrounds.find((background) => background.name === defaultName);\n  if (defaultBackground) {\n    return defaultBackground.value;\n  }\n  if (defaultName) {\n    const availableColors = backgrounds.map((background) => background.name).join(\", \");\n    logger.warn(\n      dedent`\n        Backgrounds Addon: could not find the default color \"${defaultName}\".\n        These are the available colors for your story based on your configuration:\n        ${availableColors}.\n      `\n    );\n  }\n  return \"transparent\";\n};\nvar clearStyles = (selector) => {\n  const selectors = Array.isArray(selector) ? selector : [selector];\n  selectors.forEach(clearStyle);\n};\nvar clearStyle = (selector) => {\n  const element = document.getElementById(selector);\n  if (element) {\n    element.parentElement?.removeChild(element);\n  }\n};\nvar addGridStyle = (selector, css) => {\n  const existingStyle = document.getElementById(selector);\n  if (existingStyle) {\n    if (existingStyle.innerHTML !== css) {\n      existingStyle.innerHTML = css;\n    }\n  } else {\n    const style = document.createElement(\"style\");\n    style.setAttribute(\"id\", selector);\n    style.innerHTML = css;\n    document.head.appendChild(style);\n  }\n};\nvar addBackgroundStyle = (selector, css, storyId) => {\n  const existingStyle = document.getElementById(selector);\n  if (existingStyle) {\n    if (existingStyle.innerHTML !== css) {\n      existingStyle.innerHTML = css;\n    }\n  } else {\n    const style = document.createElement(\"style\");\n    style.setAttribute(\"id\", selector);\n    style.innerHTML = css;\n    const gridStyleSelector = `addon-backgrounds-grid${storyId ? `-docs-${storyId}` : \"\"}`;\n    const existingGridStyle = document.getElementById(gridStyleSelector);\n    if (existingGridStyle) {\n      existingGridStyle.parentElement?.insertBefore(style, existingGridStyle);\n    } else {\n      document.head.appendChild(style);\n    }\n  }\n};\n\n// src/decorators/withBackground.ts\nvar withBackground = (StoryFn, context) => {\n  const { globals: globals2, parameters: parameters2 } = context;\n  const globalsBackgroundColor = globals2[PARAM_KEY]?.value;\n  const backgroundsConfig = parameters2[PARAM_KEY];\n  const selectedBackgroundColor = useMemo(() => {\n    if (backgroundsConfig.disable) {\n      return \"transparent\";\n    }\n    return getBackgroundColorByName(\n      globalsBackgroundColor,\n      backgroundsConfig.values,\n      backgroundsConfig.default\n    );\n  }, [backgroundsConfig, globalsBackgroundColor]);\n  const isActive = useMemo(\n    () => selectedBackgroundColor && selectedBackgroundColor !== \"transparent\",\n    [selectedBackgroundColor]\n  );\n  const selector = context.viewMode === \"docs\" ? `#anchor--${context.id} .docs-story` : \".sb-show-main\";\n  const backgroundStyles = useMemo(() => {\n    const transitionStyle = \"transition: background-color 0.3s;\";\n    return `\n      ${selector} {\n        background: ${selectedBackgroundColor} !important;\n        ${isReduceMotionEnabled() ? \"\" : transitionStyle}\n      }\n    `;\n  }, [selectedBackgroundColor, selector]);\n  useEffect(() => {\n    const selectorId = context.viewMode === \"docs\" ? `addon-backgrounds-docs-${context.id}` : `addon-backgrounds-color`;\n    if (!isActive) {\n      clearStyles(selectorId);\n      return;\n    }\n    addBackgroundStyle(\n      selectorId,\n      backgroundStyles,\n      context.viewMode === \"docs\" ? context.id : null\n    );\n  }, [isActive, backgroundStyles, context]);\n  return StoryFn();\n};\nvar withGrid = (StoryFn, context) => {\n  const { globals: globals2, parameters: parameters2 } = context;\n  const gridParameters = parameters2[PARAM_KEY].grid;\n  const isActive = globals2[PARAM_KEY]?.grid === true && gridParameters.disable !== true;\n  const { cellAmount, cellSize, opacity } = gridParameters;\n  const isInDocs = context.viewMode === \"docs\";\n  const isLayoutPadded = parameters2.layout === void 0 || parameters2.layout === \"padded\";\n  const defaultOffset = isLayoutPadded ? 16 : 0;\n  const offsetX = gridParameters.offsetX ?? (isInDocs ? 20 : defaultOffset);\n  const offsetY = gridParameters.offsetY ?? (isInDocs ? 20 : defaultOffset);\n  const gridStyles = useMemo(() => {\n    const selector = context.viewMode === \"docs\" ? `#anchor--${context.id} .docs-story` : \".sb-show-main\";\n    const backgroundSize = [\n      `${cellSize * cellAmount}px ${cellSize * cellAmount}px`,\n      `${cellSize * cellAmount}px ${cellSize * cellAmount}px`,\n      `${cellSize}px ${cellSize}px`,\n      `${cellSize}px ${cellSize}px`\n    ].join(\", \");\n    return `\n      ${selector} {\n        background-size: ${backgroundSize} !important;\n        background-position: ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px, ${offsetX}px ${offsetY}px !important;\n        background-blend-mode: difference !important;\n        background-image: linear-gradient(rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity}) 1px, transparent 1px),\n         linear-gradient(rgba(130, 130, 130, ${opacity / 2}) 1px, transparent 1px),\n         linear-gradient(90deg, rgba(130, 130, 130, ${opacity / 2}) 1px, transparent 1px) !important;\n      }\n    `;\n  }, [cellSize]);\n  useEffect(() => {\n    const selectorId = context.viewMode === \"docs\" ? `addon-backgrounds-grid-docs-${context.id}` : `addon-backgrounds-grid`;\n    if (!isActive) {\n      clearStyles(selectorId);\n      return;\n    }\n    addGridStyle(selectorId, gridStyles);\n  }, [isActive, gridStyles, context]);\n  return StoryFn();\n};\n\n// src/preview.tsx\nvar decorators = [withGrid, withBackground];\nvar parameters = {\n  [PARAM_KEY]: {\n    grid: {\n      cellSize: 20,\n      opacity: 0.5,\n      cellAmount: 5\n    },\n    values: [\n      { name: \"light\", value: \"#F8F8F8\" },\n      { name: \"dark\", value: \"#333333\" }\n    ]\n  }\n};\nvar globals = {\n  [PARAM_KEY]: null\n};\n\nexport { decorators, globals, parameters };\n"],"names":["useMemo","useEffect","global","logger","PARAM_KEY","document","window","isReduceMotionEnabled","getBackgroundColorByName","currentSelectedValue","backgrounds","defaultName","background","defaultBackground","availableColors","dedent","clearStyles","selector","clearStyle","element","_a","addGridStyle","css","existingStyle","style","addBackgroundStyle","storyId","gridStyleSelector","existingGridStyle","withBackground","StoryFn","context","globals2","parameters2","globalsBackgroundColor","backgroundsConfig","selectedBackgroundColor","isActive","backgroundStyles","transitionStyle","selectorId","withGrid","gridParameters","cellAmount","cellSize","opacity","isInDocs","defaultOffset","offsetX","offsetY","gridStyles","backgroundSize","decorators","parameters","globals"],"mappings":"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","x_google_ignoreList":[0]}