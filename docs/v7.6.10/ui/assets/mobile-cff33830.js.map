{"version":3,"file":"mobile-cff33830.js","sources":["../../ui/manager/src/components/layout/Root.tsx","../../ui/manager/src/components/layout/mobile.tsx"],"sourcesContent":["import { styled } from '@storybook/theming';\n\nexport const Root = styled.div({\n  position: 'fixed',\n  left: 0,\n  top: 0,\n  width: '100vw',\n  height: '100vh',\n  overflow: 'hidden',\n});\n","import type { ComponentType, FC, ReactNode } from 'react';\nimport React, { Fragment, Children, useCallback, useState } from 'react';\nimport { type State, ActiveTabs, useStorybookApi } from '@storybook/manager-api';\nimport { styled } from '@storybook/theming';\n\nimport { TabButton } from '@storybook/components';\nimport { Location } from '@storybook/router';\nimport type { Addon_PageType } from '@storybook/types';\nimport { Root } from './Root';\n\nexport type ActiveTabsType = 'sidebar' | 'canvas' | 'addons';\n\nconst { SIDEBAR, CANVAS, ADDONS } = ActiveTabs;\n\nconst Pane = styled.div<{ index: number; active: ActiveTabsType }>(\n  {\n    transition: 'transform .2s ease',\n    position: 'absolute',\n    top: 0,\n    height: '100%',\n    overflow: 'auto',\n  },\n  ({ theme }) => ({\n    background: theme.background.content,\n    '&:nth-of-type(1)': {\n      borderRight: `1px solid ${theme.appBorderColor}`,\n    },\n    '&:nth-of-type(3)': {\n      borderLeft: `1px solid ${theme.appBorderColor}`,\n    },\n  }),\n  ({ index }) => {\n    switch (index) {\n      case 0: {\n        return {\n          width: '80vw',\n          transform: 'translateX(-80vw)',\n          left: 0,\n        };\n      }\n      case 1: {\n        return {\n          width: '100%',\n          transform: 'translateX(0) scale(1)',\n          left: 0,\n        };\n      }\n      case 2: {\n        return {\n          width: '80vw',\n          transform: 'translateX(80vw)',\n          right: 0,\n        };\n      }\n      default: {\n        return {};\n      }\n    }\n  },\n  ({ active, index }) => {\n    switch (true) {\n      case index === 0 && active === SIDEBAR: {\n        return {\n          transform: 'translateX(-0px)',\n        };\n      }\n      case index === 1 && active === SIDEBAR: {\n        return {\n          transform: 'translateX(40vw) translateY(-42.5vh) translateY(40px) scale(0.2)',\n        };\n      }\n      case index === 1 && active === ADDONS: {\n        return {\n          transform: 'translateX(-40vw) translateY(-42.5vh) translateY(40px) scale(0.2)',\n        };\n      }\n      case index === 2 && active === ADDONS: {\n        return {\n          transform: 'translateX(0px)',\n        };\n      }\n      default: {\n        return {};\n      }\n    }\n  }\n);\n\nconst Panels = React.memo((({ children, active, isFullscreen }) => (\n  <PanelsContainer isFullscreen={isFullscreen}>\n    {Children.toArray(children).map((item, index) => (\n      // eslint-disable-next-line react/no-array-index-key\n      <Pane key={index} index={index} active={active}>\n        {item}\n      </Pane>\n    ))}\n  </PanelsContainer>\n)) as FC<{ active: ActiveTabsType; children: ReactNode; isFullscreen: boolean }>);\nPanels.displayName = 'Panels';\n\nconst PanelsContainer = styled.div<{ isFullscreen: boolean }>(\n  {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100vw',\n  },\n  ({ isFullscreen }) => ({\n    height: isFullscreen ? '100vh' : 'calc(100% - 40px)',\n  })\n);\n\nconst Bar = styled.nav(\n  {\n    position: 'fixed',\n    bottom: 0,\n    left: 0,\n    width: '100vw',\n    height: 40,\n    display: 'flex',\n    boxShadow: '0 1px 5px 0 rgba(0, 0, 0, 0.1)',\n\n    '& > *': {\n      flex: 1,\n    },\n  },\n  ({ theme }) => ({\n    background: theme.barBg,\n  })\n);\n\nexport interface MobileProps {\n  options: Pick<State['layout'], 'isFullscreen' | 'showPanel' | 'initialActive' | 'showToolbar'>;\n  Sidebar: ComponentType<any>;\n  Preview: ComponentType<any>;\n  Panel: ComponentType<any>;\n  Notifications: ComponentType<any>;\n  viewMode: State['viewMode'];\n  pages: Addon_PageType[];\n}\n\nexport interface MobileState {\n  active: ActiveTabsType;\n}\n\nexport const Mobile = ({\n  Sidebar,\n  Preview,\n  Panel,\n  Notifications,\n  pages,\n  viewMode,\n  options,\n}: MobileProps) => {\n  const [{ active }, setState] = useState({\n    active: options.isFullscreen ? CANVAS : options.initialActive || SIDEBAR,\n  });\n  const api = useStorybookApi();\n  const handleCanvasClick = useCallback(() => {\n    setState({ active: CANVAS });\n    const id = api.retrieveSelection();\n    if (id) {\n      api.selectStory(id);\n    } else {\n      api.selectFirstStory();\n    }\n  }, []);\n\n  const handleSideBarClick = useCallback(() => {\n    setState({ active: SIDEBAR });\n    const id = api.retrieveSelection();\n    if (id) {\n      api.selectStory(id);\n    } else {\n      api.selectFirstStory();\n    }\n  }, []);\n\n  return (\n    <Root>\n      <Notifications\n        placement={{\n          position: 'fixed',\n          bottom: 60,\n          left: 20,\n          right: 20,\n        }}\n      />\n\n      <Panels active={active} isFullscreen={options.isFullscreen}>\n        <Sidebar />\n        <div>\n          <div hidden={viewMode !== 'docs' && viewMode !== 'story'}>\n            <Preview showToolbar={options.showToolbar} id=\"main\" viewMode={viewMode} />\n          </div>\n          {pages.map(({ id, render: Content }) => (\n            <Fragment key={id}>\n              <Content />\n            </Fragment>\n          ))}\n        </div>\n        <Panel hidden={viewMode !== 'story'} />\n      </Panels>\n      {!options.isFullscreen && (\n        <Bar>\n          <TabButton onClick={handleSideBarClick} active={active === SIDEBAR}>\n            Sidebar\n          </TabButton>\n          <TabButton\n            onClick={handleCanvasClick}\n            active={active === CANVAS && (viewMode === 'docs' || viewMode === 'story')}\n          >\n            Canvas\n          </TabButton>\n          <Location>\n            {({ path }) => (\n              <>\n                {pages.map(({ id, title, url }) => (\n                  <TabButton\n                    key={id}\n                    onClick={() => {\n                      setState({ active: CANVAS });\n                      api.navigateUrl(url, { plain: false });\n                    }}\n                    active={active === CANVAS && path.startsWith(url)}\n                  >\n                    {title}\n                  </TabButton>\n                ))}\n              </>\n            )}\n          </Location>\n          {viewMode === 'story' && options.showPanel ? (\n            <TabButton onClick={() => setState({ active: ADDONS })} active={active === ADDONS}>\n              Addons\n            </TabButton>\n          ) : null}\n        </Bar>\n      )}\n    </Root>\n  );\n};\n"],"names":["Root","styled","SIDEBAR","CANVAS","ADDONS","ActiveTabs","Pane","theme","index","active","Panels","React","children","isFullscreen","jsx","PanelsContainer","Children","item","Bar","Mobile","Sidebar","Preview","Panel","Notifications","pages","viewMode","options","setState","useState","api","useStorybookApi","handleCanvasClick","useCallback","id","handleSideBarClick","jsxs","Content","Fragment2","TabButton","Location","path","Fragment","title","url"],"mappings":"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"}