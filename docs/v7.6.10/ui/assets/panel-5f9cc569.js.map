{"version":3,"file":"panel-5f9cc569.js","sources":["../../ui/manager/src/components/hooks/useMedia.tsx","../../ui/manager/src/components/panel/panel.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useMediaQuery = (query: string) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = () => setMatches(media.matches);\n    window.addEventListener('resize', listener);\n    return () => window.removeEventListener('resize', listener);\n  }, [matches, query]);\n\n  return matches;\n};\n\nexport default useMediaQuery;\n","import React, { Component, Fragment } from 'react';\nimport { Tabs, Icons, IconButton } from '@storybook/components';\nimport type { State } from '@storybook/manager-api';\nimport { shortcutToHumanString } from '@storybook/manager-api';\nimport type { Addon_BaseType } from '@storybook/types';\nimport useMediaQuery from '../hooks/useMedia';\n\nexport interface SafeTabProps {\n  title: Addon_BaseType['title'];\n  id: string;\n  children: Addon_BaseType['render'];\n}\n\nclass SafeTab extends Component<SafeTabProps, { hasError: boolean }> {\n  constructor(props: SafeTabProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error: Error, info: any) {\n    this.setState({ hasError: true });\n    // eslint-disable-next-line no-console\n    console.error(error, info);\n  }\n\n  render() {\n    const { hasError } = this.state;\n    const { children } = this.props;\n    if (hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return children;\n  }\n}\n\nconst AddonPanel = React.memo<{\n  selectedPanel?: string;\n  actions: { onSelect: (id: string) => void } & Record<string, any>;\n  panels: Record<string, Addon_BaseType>;\n  shortcuts: State['shortcuts'];\n  panelPosition?: 'bottom' | 'right';\n  absolute?: boolean;\n}>(\n  ({\n    panels,\n    shortcuts,\n    actions,\n    selectedPanel = null,\n    panelPosition = 'right',\n    absolute = true,\n  }) => {\n    const isTablet = useMediaQuery('(min-width: 599px)');\n    return (\n      <Tabs\n        absolute={absolute}\n        {...(selectedPanel ? { selected: selectedPanel } : {})}\n        menuName=\"Addons\"\n        actions={actions}\n        tools={\n          isTablet ? (\n            <Fragment>\n              <IconButton\n                key=\"position\"\n                onClick={actions.togglePosition}\n                title={`Change addon orientation [${shortcutToHumanString(\n                  shortcuts.panelPosition\n                )}]`}\n              >\n                <Icons icon={panelPosition === 'bottom' ? 'sidebaralt' : 'bottombar'} />\n              </IconButton>\n              <IconButton\n                key=\"visibility\"\n                onClick={actions.toggleVisibility}\n                title={`Hide addons [${shortcutToHumanString(shortcuts.togglePanel)}]`}\n              >\n                <Icons icon=\"close\" />\n              </IconButton>\n            </Fragment>\n          ) : undefined\n        }\n        id=\"storybook-panel-root\"\n      >\n        {Object.entries(panels).map(([k, v]) => (\n          <SafeTab key={k} id={k} title={typeof v.title === 'function' ? <v.title /> : v.title}>\n            {v.render}\n          </SafeTab>\n        ))}\n      </Tabs>\n    );\n  }\n);\n\nAddonPanel.displayName = 'AddonPanel';\n\nexport default AddonPanel;\n"],"names":["useMediaQuery","query","matches","setMatches","useState","useEffect","media","listener","SafeTab","Component","props","error","info","hasError","children","jsx","AddonPanel","React","panels","shortcuts","actions","selectedPanel","panelPosition","absolute","isTablet","Tabs","jsxs","Fragment","IconButton","shortcutToHumanString","Icons","k","v","Panel"],"mappings":"kMAEA,MAAAA,EAAAC,GAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EAEAC,OAAAA,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAA,OAAA,WAAAL,CAAA,EACAK,EAAA,UAAAJ,GACEC,EAAAG,EAAA,OAAA,EAEF,MAAAC,EAAA,IAAAJ,EAAAG,EAAA,OAAA,EACA,cAAA,iBAAA,SAAAC,CAAA,EACA,IAAA,OAAA,oBAAA,SAAAA,CAAA,CAA0D,EAAA,CAAAL,EAAAD,CAAA,CAAA,EAG5DC,CACF,oHCHA,MAAMM,UAAgBC,EAAAA,SAA+C,CACnE,YAAYC,EAAqB,CAC/B,MAAMA,CAAK,EACN,KAAA,MAAQ,CAAE,SAAU,EAAM,CACjC,CAEA,kBAAkBC,EAAcC,EAAW,CACzC,KAAK,SAAS,CAAE,SAAU,EAAM,CAAA,EAExB,QAAA,MAAMD,EAAOC,CAAI,CAC3B,CAEA,QAAS,CACD,KAAA,CAAE,SAAAC,CAAS,EAAI,KAAK,MACpB,CAAE,SAAAC,CAAS,EAAI,KAAK,MAC1B,OAAID,EACKE,EAAC,MAAG,SAAqB,uBAAA,CAAA,EAE3BD,CACT,CACF,CAEA,MAAME,EAAaC,EAAM,KAQvB,CAAC,CACC,OAAAC,EACA,UAAAC,EACA,QAAAC,EACA,cAAAC,EAAgB,KAChB,cAAAC,EAAgB,QAChB,SAAAC,EAAW,EAAA,IACP,CACE,MAAAC,EAAWxB,EAAc,oBAAoB,EAEjD,OAAAe,EAACU,EAAA,CACC,SAAAF,EACC,GAAIF,EAAgB,CAAE,SAAUA,GAAkB,CAAC,EACpD,SAAS,SACT,QAAAD,EACA,MACEI,EACEE,EAACC,EACC,SAAA,CAAA,SAAA,CAAAZ,EAACa,EAAA,CAEC,QAASR,EAAQ,eACjB,MAAO,6BAA6BS,EAClCV,EAAU,aACX,CAAA,IAED,WAACW,EAAM,CAAA,KAAMR,IAAkB,SAAW,aAAe,YAAa,CAAA,EANlE,UAON,EACAP,EAACa,EAAA,CAEC,QAASR,EAAQ,iBACjB,MAAO,gBAAgBS,EAAsBV,EAAU,WAAW,CAAC,IAEnE,SAAAJ,EAACe,EAAM,CAAA,KAAK,OAAQ,CAAA,CAAA,EAJhB,YAKN,CAAA,CACF,CAAA,EACE,OAEN,GAAG,uBAEF,SAAO,OAAA,QAAQZ,CAAM,EAAE,IAAI,CAAC,CAACa,EAAGC,CAAC,IAC/BjB,EAAAP,EAAA,CAAgB,GAAIuB,EAAG,MAAO,OAAOC,EAAE,OAAU,WAAajB,EAACiB,EAAE,MAAF,CAAQ,CAAA,EAAKA,EAAE,MAC5E,SAAEA,EAAA,MAAA,EADSD,CAEd,CACD,CAAA,CAAA,CAGP,CACF,EAEAf,EAAW,YAAc,aAEzB,MAAAiB,EAAejB"}