{"version":3,"file":"panel-36ec9dab.js","sources":["../../ui/manager/src/components/hooks/useMedia.tsx","../../ui/manager/src/components/panel/panel.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useMediaQuery = (query: string) => {\n  const [matches, setMatches] = useState(false);\n\n  useEffect(() => {\n    const media = window.matchMedia(query);\n    if (media.matches !== matches) {\n      setMatches(media.matches);\n    }\n    const listener = () => setMatches(media.matches);\n    window.addEventListener('resize', listener);\n    return () => window.removeEventListener('resize', listener);\n  }, [matches, query]);\n\n  return matches;\n};\n\nexport default useMediaQuery;\n","import type { ReactElement } from 'react';\nimport React, { Component, Fragment } from 'react';\nimport { Tabs, Icons, IconButton } from '@storybook/components';\nimport type { State } from '@storybook/manager-api';\nimport { shortcutToHumanString } from '@storybook/manager-api';\nimport useMediaQuery from '../hooks/useMedia';\n\nexport interface SafeTabProps {\n  title: (() => string) | string;\n  id: string;\n  children: ReactElement;\n}\n\nconst SafeTabContent = React.memo<SafeTabProps>(function SafeTabContent({ children }) {\n  return children;\n});\n\nclass SafeTab extends Component<SafeTabProps, { hasError: boolean }> {\n  constructor(props: SafeTabProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error: Error, info: any) {\n    this.setState({ hasError: true });\n    // eslint-disable-next-line no-console\n    console.error(error, info);\n  }\n\n  render() {\n    const { hasError } = this.state;\n    const { children, title, id } = this.props;\n    if (hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return (\n      <SafeTabContent id={id} title={title}>\n        {children}\n      </SafeTabContent>\n    );\n  }\n}\n\nconst AddonPanel = React.memo<{\n  selectedPanel?: string;\n  actions: { onSelect: (id: string) => void } & Record<string, any>;\n  panels: Record<string, any>;\n  shortcuts: State['shortcuts'];\n  panelPosition?: 'bottom' | 'right';\n  absolute?: boolean;\n}>(\n  ({\n    panels,\n    shortcuts,\n    actions,\n    selectedPanel = null,\n    panelPosition = 'right',\n    absolute = true,\n  }) => {\n    const isTablet = useMediaQuery('(min-width: 599px)');\n    return (\n      <Tabs\n        absolute={absolute}\n        {...(selectedPanel ? { selected: selectedPanel } : {})}\n        menuName=\"Addons\"\n        actions={actions}\n        tools={\n          isTablet ? (\n            <Fragment>\n              <IconButton\n                key=\"position\"\n                onClick={actions.togglePosition}\n                title={`Change addon orientation [${shortcutToHumanString(\n                  shortcuts.panelPosition\n                )}]`}\n              >\n                <Icons icon={panelPosition === 'bottom' ? 'sidebaralt' : 'bottombar'} />\n              </IconButton>\n              <IconButton\n                key=\"visibility\"\n                onClick={actions.toggleVisibility}\n                title={`Hide addons [${shortcutToHumanString(shortcuts.togglePanel)}]`}\n              >\n                <Icons icon=\"close\" />\n              </IconButton>\n            </Fragment>\n          ) : undefined\n        }\n        id=\"storybook-panel-root\"\n      >\n        {Object.entries(panels).map(([k, v]) => (\n          <SafeTab key={k} id={k} title={typeof v.title === 'function' ? v.title() : v.title}>\n            {v.render}\n          </SafeTab>\n        ))}\n      </Tabs>\n    );\n  }\n);\n\nAddonPanel.displayName = 'AddonPanel';\n\nexport default AddonPanel;\n"],"names":["useMediaQuery","query","matches","setMatches","useState","useEffect","media","listener","SafeTabContent","React","children","SafeTab","Component","props","error","info","hasError","title","id","jsx","AddonPanel","panels","shortcuts","actions","selectedPanel","panelPosition","absolute","isTablet","Tabs","jsxs","Fragment","IconButton","shortcutToHumanString","Icons","k","v","Panel"],"mappings":"kMAEA,MAAAA,EAAAC,GAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EAEAC,OAAAA,EAAAA,UAAA,IAAA,CACE,MAAAC,EAAA,OAAA,WAAAL,CAAA,EACAK,EAAA,UAAAJ,GACEC,EAAAG,EAAA,OAAA,EAEF,MAAAC,EAAA,IAAAJ,EAAAG,EAAA,OAAA,EACA,cAAA,iBAAA,SAAAC,CAAA,EACA,IAAA,OAAA,oBAAA,SAAAA,CAAA,CAA0D,EAAA,CAAAL,EAAAD,CAAA,CAAA,EAG5DC,CACF,oHCHA,MAAMM,EAAiBC,EAAM,KAAmB,SAAwB,CAAE,SAAAC,GAAY,CAC7E,OAAAA,CACT,CAAC,EAED,MAAMC,UAAgBC,EAAAA,SAA+C,CACnE,YAAYC,EAAqB,CAC/B,MAAMA,CAAK,EACN,KAAA,MAAQ,CAAE,SAAU,EAAM,CACjC,CAEA,kBAAkBC,EAAcC,EAAW,CACzC,KAAK,SAAS,CAAE,SAAU,EAAM,CAAA,EAExB,QAAA,MAAMD,EAAOC,CAAI,CAC3B,CAEA,QAAS,CACD,KAAA,CAAE,SAAAC,CAAS,EAAI,KAAK,MACpB,CAAE,SAAAN,EAAU,MAAAO,EAAO,GAAAC,CAAA,EAAO,KAAK,MACrC,OAAIF,EACKG,EAAC,MAAG,SAAqB,uBAAA,CAAA,EAG/BA,EAAAX,EAAA,CAAe,GAAAU,EAAQ,MAAAD,EACrB,SAAAP,CACH,CAAA,CAEJ,CACF,CAEA,MAAMU,EAAaX,EAAM,KAQvB,CAAC,CACC,OAAAY,EACA,UAAAC,EACA,QAAAC,EACA,cAAAC,EAAgB,KAChB,cAAAC,EAAgB,QAChB,SAAAC,EAAW,EAAA,IACP,CACE,MAAAC,EAAW3B,EAAc,oBAAoB,EAEjD,OAAAmB,EAACS,EAAA,CACC,SAAAF,EACC,GAAIF,EAAgB,CAAE,SAAUA,GAAkB,CAAC,EACpD,SAAS,SACT,QAAAD,EACA,MACEI,EACEE,EAACC,EACC,SAAA,CAAA,SAAA,CAAAX,EAACY,EAAA,CAEC,QAASR,EAAQ,eACjB,MAAO,6BAA6BS,EAClCV,EAAU,aACZ,KAEA,WAACW,EAAM,CAAA,KAAMR,IAAkB,SAAW,aAAe,YAAa,CAAA,EANlE,UAON,EACAN,EAACY,EAAA,CAEC,QAASR,EAAQ,iBACjB,MAAO,gBAAgBS,EAAsBV,EAAU,WAAW,KAElE,SAAAH,EAACc,EAAM,CAAA,KAAK,OAAQ,CAAA,CAAA,EAJhB,YAKN,CAAA,CACF,CAAA,EACE,OAEN,GAAG,uBAEF,SAAA,OAAO,QAAQZ,CAAM,EAAE,IAAI,CAAC,CAACa,EAAGC,CAAC,IAChChB,EAACR,EAAgB,CAAA,GAAIuB,EAAG,MAAO,OAAOC,EAAE,OAAU,WAAaA,EAAE,MAAU,EAAAA,EAAE,MAC1E,SAAAA,EAAE,MADS,EAAAD,CAEd,CACD,CAAA,CAAA,CAGP,CACF,EAEAd,EAAW,YAAc,aAEzB,MAAAgB,EAAehB"}