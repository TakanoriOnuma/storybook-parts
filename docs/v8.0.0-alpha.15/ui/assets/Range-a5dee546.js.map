{"version":3,"file":"Range-a5dee546.js","sources":["../../ui/blocks/src/controls/Range.tsx"],"sourcesContent":["import type { FC, ChangeEvent } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { styled } from '@storybook/theming';\nimport { lighten, darken, rgba } from 'polished';\nimport { getControlId } from './helpers';\n\nimport type { ControlProps, NumberValue, RangeConfig } from './types';\n\nimport { parse } from './Number';\n\ntype RangeProps = ControlProps<NumberValue | null> & RangeConfig;\n\nconst RangeInput = styled.input<{ min: number; max: number; value: number }>(\n  ({ theme, min, max, value }) => ({\n    // Resytled using http://danielstern.ca/range.css/#/\n    '&': {\n      width: '100%',\n      backgroundColor: 'transparent',\n      appearance: 'none',\n    },\n\n    '&::-webkit-slider-runnable-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      borderRadius: 6,\n      width: '100%',\n      height: 6,\n      cursor: 'pointer',\n    },\n\n    '&::-webkit-slider-thumb': {\n      marginTop: '-6px',\n      width: 16,\n      height: 16,\n\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: '50px',\n      boxShadow: `0 1px 3px 0px ${rgba(theme.appBorderColor, 0.2)}`,\n      cursor: 'grab',\n      appearance: 'none',\n      background: `${theme.input.background}`,\n      transition: 'all 150ms ease-out',\n\n      '&:hover': {\n        background: `${darken(0.05, theme.input.background)}`,\n        transform: 'scale3d(1.1, 1.1, 1.1) translateY(-1px)',\n        transition: 'all 50ms ease-out',\n      },\n\n      '&:active': {\n        background: `${theme.input.background}`,\n        transform: 'scale3d(1, 1, 1) translateY(0px)',\n        cursor: 'grabbing',\n      },\n    },\n\n    '&:focus': {\n      outline: 'none',\n\n      '&::-webkit-slider-runnable-track': {\n        borderColor: rgba(theme.color.secondary, 0.4),\n      },\n\n      '&::-webkit-slider-thumb': {\n        borderColor: theme.color.secondary,\n        boxShadow: `0 0px 5px 0px ${theme.color.secondary}`,\n      },\n    },\n\n    '&::-moz-range-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      borderRadius: 6,\n      width: '100%',\n      height: 6,\n      cursor: 'pointer',\n      outline: 'none',\n    },\n\n    '&::-moz-range-thumb': {\n      width: 16,\n      height: 16,\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: '50px',\n      boxShadow: `0 1px 3px 0px ${rgba(theme.appBorderColor, 0.2)}`,\n      cursor: 'grab',\n      background: `${theme.input.background}`,\n      transition: 'all 150ms ease-out',\n\n      '&:hover': {\n        background: `${darken(0.05, theme.input.background)}`,\n        transform: 'scale3d(1.1, 1.1, 1.1) translateY(-1px)',\n        transition: 'all 50ms ease-out',\n      },\n\n      '&:active': {\n        background: `${theme.input.background}`,\n        transform: 'scale3d(1, 1, 1) translateY(0px)',\n        cursor: 'grabbing',\n      },\n    },\n    '&::-ms-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      color: 'transparent',\n      width: '100%',\n      height: '6px',\n      cursor: 'pointer',\n    },\n    '&::-ms-fill-lower': {\n      borderRadius: 6,\n    },\n    '&::-ms-fill-upper': {\n      borderRadius: 6,\n    },\n    '&::-ms-thumb': {\n      width: 16,\n      height: 16,\n      background: `${theme.input.background}`,\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: 50,\n      cursor: 'grab',\n      marginTop: 0,\n    },\n    '@supports (-ms-ime-align:auto)': { 'input[type=range]': { margin: '0' } },\n  })\n);\n\nconst RangeLabel = styled.span({\n  paddingLeft: 5,\n  paddingRight: 5,\n  fontSize: 12,\n  whiteSpace: 'nowrap',\n  fontFeatureSettings: 'tnum',\n  fontVariantNumeric: 'tabular-nums',\n});\n\nconst RangeCurrentAndMaxLabel = styled(RangeLabel)<{\n  numberOFDecimalsPlaces: number;\n  max: number;\n}>(({ numberOFDecimalsPlaces, max }) => ({\n  // Fixed width of \"current / max\" label to avoid slider width changes\n  // 3 = size of separator \" / \"\n  width: `${numberOFDecimalsPlaces + max.toString().length * 2 + 3}ch`,\n  textAlign: 'right',\n  flexShrink: 0,\n}));\n\nconst RangeWrapper = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n  width: '100%',\n});\n\nfunction getNumberOfDecimalPlaces(number: number) {\n  const match = number.toString().match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  return !match\n    ? 0\n    : Math.max(\n        0,\n        // Number of digits right of decimal point.\n        (match[1] ? match[1].length : 0) -\n          // Adjust for scientific notation.\n          (match[2] ? +match[2] : 0)\n      );\n}\n\nexport const RangeControl: FC<RangeProps> = ({\n  name,\n  value,\n  onChange,\n  min = 0,\n  max = 100,\n  step = 1,\n  onBlur,\n  onFocus,\n}) => {\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange(parse(event.target.value));\n  };\n\n  const hasValue = value !== undefined;\n  const numberOFDecimalsPlaces = useMemo(() => getNumberOfDecimalPlaces(step), [step]);\n\n  return (\n    <RangeWrapper>\n      <RangeLabel>{min}</RangeLabel>\n      <RangeInput\n        id={getControlId(name)}\n        type=\"range\"\n        onChange={handleChange}\n        {...{ name, value, min, max, step, onFocus, onBlur }}\n      />\n      <RangeCurrentAndMaxLabel numberOFDecimalsPlaces={numberOFDecimalsPlaces} max={max}>\n        {hasValue ? value.toFixed(numberOFDecimalsPlaces) : '--'} / {max}\n      </RangeCurrentAndMaxLabel>\n    </RangeWrapper>\n  );\n};\n"],"names":["RangeInput","styled","theme","min","max","value","darken","lighten","rgba","RangeLabel","RangeCurrentAndMaxLabel","numberOFDecimalsPlaces","RangeWrapper","getNumberOfDecimalPlaces","number","match","RangeControl","name","onChange","step","onBlur","onFocus","handleChange","event","parse","hasValue","useMemo","React","getControlId"],"mappings":"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"}