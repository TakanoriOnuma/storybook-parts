{"version":3,"file":"about-2875ea6b.js","sources":["../../ui/manager/src/settings/about.tsx"],"sourcesContent":["import type { FC } from 'react';\nimport React, { Fragment } from 'react';\nimport semver from 'semver';\nimport { styled } from '@storybook/theming';\nimport type { State } from '@storybook/manager-api';\nimport Markdown from 'markdown-to-jsx';\n\nimport { StorybookIcon, SyntaxHighlighter, Link, DocumentWrapper } from '@storybook/components';\n\nimport SettingsFooter from './SettingsFooter';\n\nconst Header = styled.header(({ theme }) => ({\n  marginBottom: 20,\n  fontSize: theme.typography.size.m3,\n  color: theme.base === 'light' ? theme.color.darkest : theme.color.lightest,\n  fontWeight: theme.typography.weight.bold,\n  alignItems: 'center',\n  display: 'flex',\n\n  '> svg': {\n    height: 32,\n    width: 'auto',\n    marginRight: 8,\n  },\n}));\n\nconst Subheading = styled.span(({ theme }) => ({\n  letterSpacing: '0.35em',\n  textTransform: 'uppercase',\n  fontWeight: theme.typography.weight.bold,\n  fontSize: theme.typography.size.s2 - 1,\n  lineHeight: '24px',\n  color: theme.textMutedColor,\n}));\n\nconst SubheadingLink = styled(Link)(({ theme }) => ({\n  fontSize: theme.typography.size.s1,\n}));\n\nconst Subheader = styled.div({\n  display: 'flex',\n  justifyContent: 'space-between',\n  alignItems: 'center',\n  marginBottom: '.75rem',\n});\n\nconst UpdateMessage = styled.div<{ status: 'positive' | 'negative' | string }>(\n  ({ status, theme }) => {\n    if (status === 'positive') {\n      return { background: theme.background.positive, color: theme.color.positiveText };\n    }\n    if (status === 'negative') {\n      return { background: theme.background.negative, color: theme.color.negativeText };\n    }\n    return {\n      background: theme.base === 'light' ? '#EAF3FC' : theme.color.darkest,\n      color: theme.base === 'light' ? theme.color.darkest : theme.defaultText,\n    };\n  },\n\n  ({ theme }) => ({\n    fontWeight: theme.typography.weight.bold,\n    fontSize: theme.typography.size.s2,\n    padding: '10px 20px',\n    marginBottom: 24,\n    borderRadius: theme.appBorderRadius,\n    border: `1px solid ${theme.appBorderColor}`,\n    textAlign: 'center',\n  })\n);\n\nconst ErrorMessage = styled.div(({ theme }) => ({\n  fontWeight: theme.typography.weight.bold,\n  textAlign: 'center',\n}));\n\nconst Upgrade = styled.div(({ theme }) => ({\n  marginTop: 20,\n  borderTop: `1px solid ${theme.appBorderColor}`,\n}));\n\nconst Container = styled.div({\n  padding: `3rem 20px`,\n  maxWidth: 600,\n  margin: '0 auto',\n});\n\nconst AboutScreen: FC<{\n  latest: State['versions']['latest'];\n  current: State['versions']['current'];\n}> = ({ latest = null, current }) => {\n  const canUpdate = latest && semver.gt(latest.version, current.version);\n\n  let updateMessage;\n  if (latest) {\n    if (canUpdate) {\n      updateMessage = (\n        <UpdateMessage status=\"positive\">\n          Storybook {latest.version} is available. Upgrade from {current.version} now.\n        </UpdateMessage>\n      );\n    } else {\n      updateMessage = (\n        <UpdateMessage status=\"neutral\">Looking good! You're up to date.</UpdateMessage>\n      );\n    }\n  } else {\n    updateMessage = (\n      <UpdateMessage status=\"negative\">\n        Oops! The latest version of Storybook couldn't be fetched.\n      </UpdateMessage>\n    );\n  }\n\n  return (\n    <Container>\n      <Header>\n        <StorybookIcon />\n        Storybook {current.version}\n      </Header>\n\n      {updateMessage}\n\n      {latest ? (\n        <Fragment>\n          <Subheader>\n            <Subheading>{latest.version} Changelog</Subheading>\n            <SubheadingLink\n              secondary\n              href=\"https://github.com/storybookjs/storybook/blob/next/CHANGELOG.md\"\n              withArrow\n              cancel={false}\n              target=\"_blank\"\n            >\n              Read full changelog\n            </SubheadingLink>\n          </Subheader>\n          <DocumentWrapper>\n            <Markdown>{latest.info.plain}</Markdown>\n          </DocumentWrapper>\n        </Fragment>\n      ) : (\n        <ErrorMessage>\n          <Link\n            href=\"https://github.com/storybookjs/storybook/releases\"\n            target=\"_blank\"\n            withArrow\n            secondary\n            cancel={false}\n          >\n            Check Storybook's release history\n          </Link>\n        </ErrorMessage>\n      )}\n\n      {canUpdate && (\n        <Upgrade>\n          <DocumentWrapper>\n            <p>\n              <b>Upgrade all Storybook packages to latest:</b>\n            </p>\n            <SyntaxHighlighter language=\"bash\" copyable padded bordered>\n              npx storybook@latest upgrade\n            </SyntaxHighlighter>\n          </DocumentWrapper>\n        </Upgrade>\n      )}\n\n      <SettingsFooter />\n    </Container>\n  );\n};\n\nexport { AboutScreen };\n"],"names":["Header","styled","theme","Subheading","SubheadingLink","Link","Subheader","UpdateMessage","status","ErrorMessage","Upgrade","Container","AboutScreen","latest","current","canUpdate","semver","updateMessage","jsxs","jsx","StorybookIcon","Fragment","DocumentWrapper","Markdown","SyntaxHighlighter","SettingsFooter"],"mappings":"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"}