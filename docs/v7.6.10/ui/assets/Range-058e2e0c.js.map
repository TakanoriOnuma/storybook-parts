{"version":3,"file":"Range-058e2e0c.js","sources":["../../ui/blocks/src/controls/Range.tsx"],"sourcesContent":["import type { FC, ChangeEvent } from 'react';\nimport React, { useMemo } from 'react';\n\nimport { styled } from '@storybook/theming';\nimport { lighten, darken, rgba } from 'polished';\nimport { getControlId } from './helpers';\n\nimport type { ControlProps, NumberValue, RangeConfig } from './types';\n\nimport { parse } from './Number';\n\ntype RangeProps = ControlProps<NumberValue | null> & RangeConfig;\n\nconst RangeInput = styled.input<{ min: number; max: number; value: number }>(\n  ({ theme, min, max, value }) => ({\n    // Resytled using http://danielstern.ca/range.css/#/\n    '&': {\n      width: '100%',\n      backgroundColor: 'transparent',\n      appearance: 'none',\n    },\n\n    '&::-webkit-slider-runnable-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      borderRadius: 6,\n      width: '100%',\n      height: 6,\n      cursor: 'pointer',\n    },\n\n    '&::-webkit-slider-thumb': {\n      marginTop: '-6px',\n      width: 16,\n      height: 16,\n\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: '50px',\n      boxShadow: `0 1px 3px 0px ${rgba(theme.appBorderColor, 0.2)}`,\n      cursor: 'grab',\n      appearance: 'none',\n      background: `${theme.input.background}`,\n      transition: 'all 150ms ease-out',\n\n      '&:hover': {\n        background: `${darken(0.05, theme.input.background)}`,\n        transform: 'scale3d(1.1, 1.1, 1.1) translateY(-1px)',\n        transition: 'all 50ms ease-out',\n      },\n\n      '&:active': {\n        background: `${theme.input.background}`,\n        transform: 'scale3d(1, 1, 1) translateY(0px)',\n        cursor: 'grabbing',\n      },\n    },\n\n    '&:focus': {\n      outline: 'none',\n\n      '&::-webkit-slider-runnable-track': {\n        borderColor: rgba(theme.color.secondary, 0.4),\n      },\n\n      '&::-webkit-slider-thumb': {\n        borderColor: theme.color.secondary,\n        boxShadow: `0 0px 5px 0px ${theme.color.secondary}`,\n      },\n    },\n\n    '&::-moz-range-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      borderRadius: 6,\n      width: '100%',\n      height: 6,\n      cursor: 'pointer',\n      outline: 'none',\n    },\n\n    '&::-moz-range-thumb': {\n      width: 16,\n      height: 16,\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: '50px',\n      boxShadow: `0 1px 3px 0px ${rgba(theme.appBorderColor, 0.2)}`,\n      cursor: 'grab',\n      background: `${theme.input.background}`,\n      transition: 'all 150ms ease-out',\n\n      '&:hover': {\n        background: `${darken(0.05, theme.input.background)}`,\n        transform: 'scale3d(1.1, 1.1, 1.1) translateY(-1px)',\n        transition: 'all 50ms ease-out',\n      },\n\n      '&:active': {\n        background: `${theme.input.background}`,\n        transform: 'scale3d(1, 1, 1) translateY(0px)',\n        cursor: 'grabbing',\n      },\n    },\n    '&::-ms-track': {\n      background:\n        theme.base === 'light'\n          ? `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${darken(0.02, theme.input.background)} 100%)`\n          : `linear-gradient(to right, \n            ${theme.color.green} 0%, ${theme.color.green} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} ${((value - min) / (max - min)) * 100}%, \n            ${lighten(0.02, theme.input.background)} 100%)`,\n      boxShadow: `${theme.appBorderColor} 0 0 0 1px inset`,\n      color: 'transparent',\n      width: '100%',\n      height: '6px',\n      cursor: 'pointer',\n    },\n    '&::-ms-fill-lower': {\n      borderRadius: 6,\n    },\n    '&::-ms-fill-upper': {\n      borderRadius: 6,\n    },\n    '&::-ms-thumb': {\n      width: 16,\n      height: 16,\n      background: `${theme.input.background}`,\n      border: `1px solid ${rgba(theme.appBorderColor, 0.2)}`,\n      borderRadius: 50,\n      cursor: 'grab',\n      marginTop: 0,\n    },\n    '@supports (-ms-ime-align:auto)': { 'input[type=range]': { margin: '0' } },\n  })\n);\n\nconst RangeLabel = styled.span({\n  paddingLeft: 5,\n  paddingRight: 5,\n  fontSize: 12,\n  whiteSpace: 'nowrap',\n  fontFeatureSettings: 'tnum',\n  fontVariantNumeric: 'tabular-nums',\n});\n\nconst RangeCurrentAndMaxLabel = styled(RangeLabel)<{\n  numberOFDecimalsPlaces: number;\n  max: number;\n}>(({ numberOFDecimalsPlaces, max }) => ({\n  // Fixed width of \"current / max\" label to avoid slider width changes\n  // 3 = size of separator \" / \"\n  width: `${numberOFDecimalsPlaces + max.toString().length * 2 + 3}ch`,\n  textAlign: 'right',\n  flexShrink: 0,\n}));\n\nconst RangeWrapper = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n  width: '100%',\n});\n\nfunction getNumberOfDecimalPlaces(number: number) {\n  const match = number.toString().match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n  return !match\n    ? 0\n    : Math.max(\n        0,\n        // Number of digits right of decimal point.\n        (match[1] ? match[1].length : 0) -\n          // Adjust for scientific notation.\n          (match[2] ? +match[2] : 0)\n      );\n}\n\nexport const RangeControl: FC<RangeProps> = ({\n  name,\n  value,\n  onChange,\n  min = 0,\n  max = 100,\n  step = 1,\n  onBlur,\n  onFocus,\n}) => {\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\n    onChange(parse(event.target.value));\n  };\n\n  const hasValue = value !== undefined;\n  const numberOFDecimalsPlaces = useMemo(() => getNumberOfDecimalPlaces(step), [step]);\n\n  return (\n    <RangeWrapper>\n      <RangeLabel>{min}</RangeLabel>\n      <RangeInput\n        id={getControlId(name)}\n        type=\"range\"\n        onChange={handleChange}\n        {...{ name, value, min, max, step, onFocus, onBlur }}\n      />\n      <RangeCurrentAndMaxLabel numberOFDecimalsPlaces={numberOFDecimalsPlaces} max={max}>\n        {hasValue ? value.toFixed(numberOFDecimalsPlaces) : '--'} / {max}\n      </RangeCurrentAndMaxLabel>\n    </RangeWrapper>\n  );\n};\n"],"names":["RangeInput","styled","theme","min","max","value","darken","lighten","rgba","RangeLabel","RangeCurrentAndMaxLabel","numberOFDecimalsPlaces","RangeWrapper","getNumberOfDecimalPlaces","number","match","RangeControl","name","onChange","step","onBlur","onFocus","handleChange","event","parse","hasValue","useMemo","jsxs","jsx","getControlId"],"mappings":"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"}