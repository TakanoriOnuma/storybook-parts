import{r as m,R as d}from"./index-f1f2c4b1.js";import{Z as V,H as I,u as O}from"./index-c787bb78.js";import{c as p}from"./index-f10f74ef.js";import{t as H}from"./throttle-d46bc519.js";import{n as y}from"./index-4b2a7d13.js";import{f as S,g as L,F as B,I as X}from"./index-a443495b.js";import{a as z}from"./helpers-a9e07cde.js";import"./isObjectLike-e57f4fa0.js";import"./isSymbol-ef7afaa8.js";import"./iframe-14332c4c.js";import"../sb-preview/runtime.js";import"./index-c74c9f7f.js";import"./index-5f16f6cc.js";import"./extends-98964cd2.js";import"./index-758f4e48.js";import"./index-b75c9059.js";const G=y.div({position:"relative",maxWidth:250}),F=y(S)({position:"absolute",zIndex:1,top:4,left:4}),W=y.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),M=y(L)(({theme:e})=>({fontFamily:e.typography.fonts.base})),A=y.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),N=y.div(({theme:e,active:t})=>({width:16,height:16,boxShadow:t?`${e.appBorderColor} 0 0 0 1px inset, ${e.textMutedColor}50 0 0 0 4px`:`${e.appBorderColor} 0 0 0 1px inset`,borderRadius:e.appBorderRadius})),j=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,E=({value:e,active:t,onClick:s,style:i,...r})=>{const n=`linear-gradient(${e}, ${e}), ${j}, linear-gradient(#fff, #fff)`;return d.createElement(N,{...r,active:t,onClick:s,style:{...i,backgroundImage:n}})},Z=y(B.Input)(({theme:e})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:e.typography.fonts.base})),D=y(X)(({theme:e})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:e.input.color}));var R=(e=>(e.RGB="rgb",e.HSL="hsl",e.HEX="hex",e))(R||{});const w=Object.values(R),J=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,K=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Q=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,C=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,U=/^\s*#?([0-9a-f]{3})\s*$/i,Y={hex:V,rgb:I,hsl:O},v={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},T=e=>{const t=e==null?void 0:e.match(J);if(!t)return[0,0,0,1];const[,s,i,r,n=1]=t;return[s,i,r,n].map(Number)},b=e=>{if(!e)return;let t=!0;if(K.test(e)){const[l,c,o,g]=T(e),[f,u,a]=p.rgb.hsl([l,c,o])||[0,0,0];return{valid:t,value:e,keyword:p.rgb.keyword([l,c,o]),colorSpace:"rgb",rgb:e,hsl:`hsla(${f}, ${u}%, ${a}%, ${g})`,hex:`#${p.rgb.hex([l,c,o]).toLowerCase()}`}}if(Q.test(e)){const[l,c,o,g]=T(e),[f,u,a]=p.hsl.rgb([l,c,o])||[0,0,0];return{valid:t,value:e,keyword:p.hsl.keyword([l,c,o]),colorSpace:"hsl",rgb:`rgba(${f}, ${u}, ${a}, ${g})`,hsl:e,hex:`#${p.hsl.hex([l,c,o]).toLowerCase()}`}}const s=e.replace("#",""),i=p.keyword.rgb(s)||p.hex.rgb(s),r=p.rgb.hsl(i);let n=e;if(/[^#a-f0-9]/i.test(e)?n=s:C.test(e)&&(n=`#${s}`),n.startsWith("#"))t=C.test(n);else try{p.keyword.hex(n)}catch{t=!1}return{valid:t,value:n,keyword:p.rgb.keyword(i),colorSpace:"hex",rgb:`rgba(${i[0]}, ${i[1]}, ${i[2]}, 1)`,hsl:`hsla(${r[0]}, ${r[1]}%, ${r[2]}%, 1)`,hex:n}},ee=(e,t,s)=>{if(!e||!(t!=null&&t.valid))return v[s];if(s!=="hex")return(t==null?void 0:t[s])||v[s];if(!t.hex.startsWith("#"))try{return`#${p.keyword.hex(t.hex)}`}catch{return v.hex}const i=t.hex.match(U);if(!i)return C.test(t.hex)?t.hex:v.hex;const[r,n,l]=i[1].split("");return`#${r}${r}${n}${n}${l}${l}`},te=(e,t)=>{const[s,i]=m.useState(e||""),[r,n]=m.useState(()=>b(s)),[l,c]=m.useState((r==null?void 0:r.colorSpace)||"hex");m.useEffect(()=>{const u=e||"",a=b(u);i(u),n(a),c((a==null?void 0:a.colorSpace)||"hex")},[e]);const o=m.useMemo(()=>ee(s,r,l).toLowerCase(),[s,r,l]),g=m.useCallback(u=>{const a=b(u),x=(a==null?void 0:a.value)||u||"";i(x),x===""&&(n(void 0),t(void 0)),a&&(n(a),c(a.colorSpace),t(a.value))},[t]),f=m.useCallback(()=>{let u=w.indexOf(l)+1;u>=w.length&&(u=0),c(w[u]);const a=(r==null?void 0:r[w[u]])||"";i(a),t(a)},[r,l,t]);return{value:s,realValue:o,updateValue:g,color:r,colorSpace:l,cycleColorSpace:f}},$=e=>e.replace(/\s*/,"").toLowerCase(),re=(e,t,s)=>{const[i,r]=m.useState(t!=null&&t.valid?[t]:[]);m.useEffect(()=>{t===void 0&&r([])},[t]);const n=m.useMemo(()=>(e||[]).map(o=>typeof o=="string"?b(o):o.title?{...b(o.color),keyword:o.title}:b(o.color)).concat(i).filter(Boolean).slice(-27),[e,i]),l=m.useCallback(c=>{c!=null&&c.valid&&(n.some(o=>$(o[s])===$(c[s]))||r(o=>o.concat(c)))},[s,n]);return{presets:n,addPreset:l}},se=({name:e,value:t,onChange:s,onFocus:i,onBlur:r,presetColors:n,startOpen:l=!1})=>{const c=m.useCallback(H(s,200),[s]),{value:o,realValue:g,updateValue:f,color:u,colorSpace:a,cycleColorSpace:x}=te(t,c),{presets:k,addPreset:P}=re(n,u,a),_=Y[a];return d.createElement(G,null,d.createElement(F,{startOpen:l,closeOnOutsideClick:!0,onVisibleChange:()=>P(u),tooltip:d.createElement(W,null,d.createElement(_,{color:g==="transparent"?"#000000":g,onChange:f,onFocus:i,onBlur:r}),k.length>0&&d.createElement(A,null,k.map((h,q)=>d.createElement(S,{key:`${h.value}-${q}`,hasChrome:!1,tooltip:d.createElement(M,{note:h.keyword||h.value})},d.createElement(E,{value:h[a],active:u&&$(h[a])===$(u[a]),onClick:()=>f(h.value)})))))},d.createElement(E,{value:g,style:{margin:4}})),d.createElement(Z,{id:z(e),value:o,onChange:h=>f(h.target.value),onFocus:h=>h.target.select(),placeholder:"Choose color..."}),o?d.createElement(D,{icon:"markup",onClick:x}):null)};se.__docgenInfo={description:"",methods:[],displayName:"ColorControl",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"T"},description:""},defaultValue:{required:!1,tsType:{name:"T"},description:""},argType:{required:!1,tsType:{name:"ArgType"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: T) => T | void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"union",raw:"T | void",elements:[{name:"T"},{name:"void"}]}}},description:""},onFocus:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},presetColors:{required:!1,tsType:{name:"Array",elements:[{name:"union",raw:"ColorValue | { color: ColorValue; title?: string }",elements:[{name:"string",required:!0},{name:"signature",type:"object",raw:"{ color: ColorValue; title?: string }",signature:{properties:[{key:"color",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!1}}]}}]}],raw:"PresetColor[]"},description:""},startOpen:{required:!1,tsType:{name:"boolean"},description:`Whether the color picker should be open by default when rendered.
@default false`,defaultValue:{value:"false",computed:!1}}}};export{se as ColorControl,se as default};
//# sourceMappingURL=Color-7bd34506.js.map
