{"version":3,"file":"Loader.stories-76b19427.js","sources":["../../ui/components/src/components/shared/animation.ts","../../ui/components/src/components/Loader/Loader.tsx"],"sourcesContent":["import { keyframes } from '@storybook/theming';\n\nexport const rotate360 = keyframes`\n\tfrom {\n\t\ttransform: rotate(0deg);\n\t}\n\tto {\n\t\ttransform: rotate(360deg);\n\t}\n`;\n","import { transparentize } from 'polished';\nimport React from 'react';\nimport { styled, keyframes } from '@storybook/theming';\nimport { Icons } from '../icon/icon';\nimport { rotate360 } from '../shared/animation';\n\nconst LoaderWrapper = styled.div<{ size?: number }>(({ size = 32 }) => ({\n  borderRadius: '50%',\n  cursor: 'progress',\n  display: 'inline-block',\n  overflow: 'hidden',\n  position: 'absolute',\n  transition: 'all 200ms ease-out',\n  verticalAlign: 'top',\n  top: '50%',\n  left: '50%',\n  marginTop: -(size / 2),\n  marginLeft: -(size / 2),\n  height: size,\n  width: size,\n  zIndex: 4,\n  borderWidth: 2,\n  borderStyle: 'solid',\n  borderColor: 'rgba(97, 97, 97, 0.29)',\n  borderTopColor: 'rgb(100,100,100)',\n  animation: `${rotate360} 0.7s linear infinite`,\n  mixBlendMode: 'difference',\n}));\n\nconst ProgressWrapper = styled.div({\n  position: 'absolute',\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'center',\n  width: '100%',\n  height: '100%',\n});\n\nconst ProgressTrack = styled.div(({ theme }) => ({\n  position: 'relative',\n  width: '80%',\n  marginBottom: '0.75rem',\n  maxWidth: 300,\n  height: 5,\n  borderRadius: 5,\n  background: transparentize(0.8, theme.color.secondary),\n  overflow: 'hidden',\n  cursor: 'progress',\n}));\n\nconst ProgressBar = styled.div(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  height: '100%',\n  background: theme.color.secondary,\n}));\n\nconst ProgressMessage = styled.div(({ theme }) => ({\n  minHeight: '2em',\n  fontSize: `${theme.typography.size.s1}px`,\n  color: theme.barTextColor,\n}));\n\nconst ErrorIcon = styled(Icons)(({ theme }) => ({\n  width: 20,\n  height: 20,\n  marginBottom: '0.5rem',\n  color: theme.textMutedColor,\n}));\n\nconst ellipsis = keyframes`\n  from { content: \"...\" }\n  33% { content: \".\" }\n  66% { content: \"..\" }\n  to { content: \"...\" }\n`;\n\nconst Ellipsis = styled.span({\n  '&::after': {\n    content: \"'...'\",\n    animation: `${ellipsis} 1s linear infinite`,\n    animationDelay: '1s',\n    display: 'inline-block',\n    width: '1em',\n    height: 'auto',\n  },\n});\n\ninterface Progress {\n  value: number;\n  message: string;\n  modules?: {\n    complete: number;\n    total: number;\n  };\n}\n\ninterface LoaderProps extends React.HTMLAttributes<HTMLDivElement> {\n  progress?: Progress;\n  error?: Error;\n  size?: number;\n}\n\nexport const Loader = ({ progress, error, size, ...props }: LoaderProps) => {\n  if (error) {\n    return (\n      <ProgressWrapper aria-label={error.toString()} aria-live=\"polite\" role=\"status\" {...props}>\n        <ErrorIcon icon=\"lightningoff\" />\n        <ProgressMessage>{error.message}</ProgressMessage>\n      </ProgressWrapper>\n    );\n  }\n\n  if (progress) {\n    const { value, modules } = progress;\n    let { message } = progress;\n    if (modules) message += ` ${modules.complete} / ${modules.total} modules`;\n    return (\n      <ProgressWrapper\n        aria-label=\"Content is loading...\"\n        aria-live=\"polite\"\n        aria-valuemin={0}\n        aria-valuemax={100}\n        aria-valuenow={value * 100}\n        aria-valuetext={message}\n        role=\"progressbar\"\n        {...props}\n      >\n        <ProgressTrack>\n          <ProgressBar style={{ width: `${value * 100}%` }} />\n        </ProgressTrack>\n        <ProgressMessage>\n          {message}\n          {value < 1 && <Ellipsis key={message} />}\n        </ProgressMessage>\n      </ProgressWrapper>\n    );\n  }\n\n  return (\n    <LoaderWrapper\n      aria-label=\"Content is loading...\"\n      aria-live=\"polite\"\n      role=\"status\"\n      size={size}\n      {...props}\n    />\n  );\n};\n"],"names":["rotate360","keyframes","LoaderWrapper","styled","size","ProgressWrapper","ProgressTrack","theme","transparentize","ProgressBar","ProgressMessage","ErrorIcon","Icons","ellipsis","Ellipsis","Loader","progress","error","props","React","value","modules","message"],"mappings":"2QAEO,MAAMA,EAAYC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECIzBC,EAAAC,EAAA,IAAA,CAAA,CAAA,KAAAC,EAAA,OAAA,CACA,aAAA,MACA,OAAA,WACA,QAAA,eACA,SAAA,SACA,SAAA,WACA,WAAA,qBACA,cAAA,MACA,IAAA,MACA,KAAA,MACA,UAAA,EAAAA,EAAA,GACA,WAAA,EAAAA,EAAA,GACA,OAAAA,EACA,MAAAA,EACA,OAAA,EACA,YAAA,EACA,YAAA,QACA,YAAA,yBACA,eAAA,mBACA,UAAA,GAAAJ,CAAA,wBACA,aAAA,YACA,EAAA,EAEAK,EAAAF,EAAA,IAAA,CACA,SAAA,WACA,QAAA,OACA,cAAA,SACA,eAAA,SACA,WAAA,SACA,MAAA,OACA,OAAA,MACA,CAAA,EAEAG,EAAAH,EAAA,IAAA,CAAA,CAAA,MAAAI,MAAA,CACA,SAAA,WACA,MAAA,MACA,aAAA,UACA,SAAA,IACA,OAAA,EACA,aAAA,EACA,WAAAC,EAAA,GAAAD,EAAA,MAAA,SAAA,EACA,SAAA,SACA,OAAA,UACA,EAAA,EAEAE,EAAAN,EAAA,IAAA,CAAA,CAAA,MAAAI,MAAA,CACA,SAAA,WACA,IAAA,EACA,KAAA,EACA,OAAA,OACA,WAAAA,EAAA,MAAA,SACA,EAAA,EAEAG,EAAAP,EAAA,IAAA,CAAA,CAAA,MAAAI,MAAA,CACA,UAAA,MACA,SAAA,GAAAA,EAAA,WAAA,KAAA,EAAA,KACA,MAAAA,EAAA,YACA,EAAA,EAEAI,EAAAR,EAAAS,CAAA,EAAA,CAAA,CAAA,MAAAL,MAAA,CACA,MAAA,GACA,OAAA,GACA,aAAA,SACA,MAAAA,EAAA,cACA,EAAA,EAEAM,EAAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,EAOAa,EAAAX,EAAA,KAAA,CACA,WAAA,CACA,QAAA,QACA,UAAA,GAAAU,CAAA,sBACA,eAAA,KACA,QAAA,eACA,MAAA,MACA,OAAA,MACA,CACA,CAAA,EAiBAE,EAAA,CAAA,CAAA,SAAAC,EAAA,MAAAC,EAAA,KAAAb,EAAA,GAAAc,KAAA,CACA,GAAAD,EAEA,OAAAE,EAAA,cAAAd,GAAA,aAAAY,EAAA,SAAA,EAAA,YAAA,SAAA,KAAA,SAAA,GAAAC,CACA,EAAAC,EAAA,cAAAR,GAAA,KAAA,cAAA,CAAA,EACAQ,EAAA,cAAAT,EAAA,KAAAO,EAAA,OAAA,CACA,EAIA,GAAAD,EAAA,CACA,KAAA,CAAA,MAAAI,EAAA,QAAAC,CAAA,EAAAL,EACA,GAAA,CAAA,QAAAM,CAAA,EAAAN,EACA,OAAAK,IAAAC,GAAA,IAAAD,EAAA,QAAA,MAAAA,EAAA,KAAA,YAEAF,EAAA,cAAAd,EAAA,CACA,aAAA,wBACA,YAAA,SACA,gBAAA,EACA,gBAAA,IACA,gBAAAe,EAAA,IACA,iBAAAE,EACA,KAAA,cACA,GAAAJ,CAAA,EAEAC,EAAA,cAAAb,EAAA,KACAa,EAAA,cAAAV,EAAA,CAAA,MAAA,CAAA,MAAA,GAAAW,EAAA,GAAA,GAAA,CAAA,CAAA,CACA,EACAD,EAAA,cAAAT,OACAY,EACAF,EAAA,GAAAD,EAAA,cAAAL,EAAA,CAAA,IAAAQ,CAAA,CAAA,CACA,CAAA,CAGA,CAGA,OAAAH,EAAA,cAAAjB,EAAA,CACA,aAAA,wBACA,YAAA,SACA,KAAA,SACA,KAAAE,EACA,GAAAc,CAAA,CAAA,CAGA;;;;;;;"}