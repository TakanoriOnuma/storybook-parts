{"version":3,"file":"mobile-51d9835b.js","sources":["../../ui/manager/src/components/layout/Root.tsx","../../ui/manager/src/components/layout/mobile.tsx"],"sourcesContent":["import { styled } from '@storybook/theming';\n\nexport const Root = styled.div({\n  position: 'fixed',\n  left: 0,\n  top: 0,\n  width: '100vw',\n  height: '100vh',\n  overflow: 'hidden',\n});\n","import type { ComponentType, FC, ReactNode } from 'react';\nimport React, { Component, Children } from 'react';\nimport { type State, ActiveTabs } from '@storybook/manager-api';\nimport { styled } from '@storybook/theming';\n\nimport { TabButton } from '@storybook/components';\nimport { Root } from './Root';\n\nexport type ActiveTabsType = 'sidebar' | 'canvas' | 'addons';\n\nconst { SIDEBAR, CANVAS, ADDONS } = ActiveTabs;\n\nconst Pane = styled.div<{ index: number; active: ActiveTabsType }>(\n  {\n    transition: 'transform .2s ease',\n    position: 'absolute',\n    top: 0,\n    height: '100%',\n    overflow: 'auto',\n  },\n  ({ theme }) => ({\n    background: theme.background.content,\n    '&:nth-of-type(1)': {\n      borderRight: `1px solid ${theme.appBorderColor}`,\n    },\n    '&:nth-of-type(3)': {\n      borderLeft: `1px solid ${theme.appBorderColor}`,\n    },\n  }),\n  ({ index }) => {\n    switch (index) {\n      case 0: {\n        return {\n          width: '80vw',\n          transform: 'translateX(-80vw)',\n          left: 0,\n        };\n      }\n      case 1: {\n        return {\n          width: '100%',\n          transform: 'translateX(0) scale(1)',\n          left: 0,\n        };\n      }\n      case 2: {\n        return {\n          width: '80vw',\n          transform: 'translateX(80vw)',\n          right: 0,\n        };\n      }\n      default: {\n        return {};\n      }\n    }\n  },\n  ({ active, index }) => {\n    switch (true) {\n      case index === 0 && active === SIDEBAR: {\n        return {\n          transform: 'translateX(-0px)',\n        };\n      }\n      case index === 1 && active === SIDEBAR: {\n        return {\n          transform: 'translateX(40vw) translateY(-42.5vh) translateY(40px) scale(0.2)',\n        };\n      }\n      case index === 1 && active === ADDONS: {\n        return {\n          transform: 'translateX(-40vw) translateY(-42.5vh) translateY(40px) scale(0.2)',\n        };\n      }\n      case index === 2 && active === ADDONS: {\n        return {\n          transform: 'translateX(0px)',\n        };\n      }\n      default: {\n        return {};\n      }\n    }\n  }\n);\n\nconst Panels = React.memo((({ children, active, isFullscreen }) => (\n  <PanelsContainer isFullscreen={isFullscreen}>\n    {Children.toArray(children).map((item, index) => (\n      // eslint-disable-next-line react/no-array-index-key\n      <Pane key={index} index={index} active={active}>\n        {item}\n      </Pane>\n    ))}\n  </PanelsContainer>\n)) as FC<{ active: ActiveTabsType; children: ReactNode; isFullscreen: boolean }>);\nPanels.displayName = 'Panels';\n\nconst PanelsContainer = styled.div<{ isFullscreen: boolean }>(\n  {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100vw',\n  },\n  ({ isFullscreen }) => ({\n    height: isFullscreen ? '100vh' : 'calc(100% - 40px)',\n  })\n);\n\nconst Bar = styled.nav(\n  {\n    position: 'fixed',\n    bottom: 0,\n    left: 0,\n    width: '100vw',\n    height: 40,\n    display: 'flex',\n    boxShadow: '0 1px 5px 0 rgba(0, 0, 0, 0.1)',\n\n    '& > *': {\n      flex: 1,\n    },\n  },\n  ({ theme }) => ({\n    background: theme.barBg,\n  })\n);\n\nexport interface Page {\n  key: string;\n  route: FC;\n  render: FC;\n}\n\nexport interface MobileProps {\n  options: Pick<State['layout'], 'isFullscreen' | 'showPanel' | 'initialActive' | 'showToolbar'>;\n  Sidebar: ComponentType<any>;\n  Preview: ComponentType<any>;\n  Panel: ComponentType<any>;\n  Notifications: ComponentType<any>;\n  viewMode: State['viewMode'];\n  pages: Page[];\n}\n\nexport interface MobileState {\n  active: ActiveTabsType;\n}\n\nclass Mobile extends Component<MobileProps, MobileState> {\n  constructor(props: MobileProps) {\n    super(props);\n\n    const { options } = props;\n    this.state = {\n      active: options.isFullscreen ? CANVAS : options.initialActive || SIDEBAR,\n    };\n  }\n\n  render() {\n    const { Sidebar, Preview, Panel, Notifications, pages, viewMode, options } = this.props;\n\n    const { active } = this.state;\n    return (\n      <Root>\n        <Notifications\n          placement={{\n            position: 'fixed',\n            bottom: 60,\n            left: 20,\n            right: 20,\n          }}\n        />\n\n        <Panels active={active} isFullscreen={options.isFullscreen}>\n          <Sidebar />\n          <div>\n            <div hidden={!viewMode}>\n              <Preview showToolbar={options.showToolbar} id=\"main\" viewMode={viewMode} />\n            </div>\n            {pages.map(({ key, route: Route, render: Content }) => (\n              <Route key={key}>\n                <Content />\n              </Route>\n            ))}\n          </div>\n          <Panel hidden={!viewMode} />\n        </Panels>\n        {!options.isFullscreen && (\n          <Bar>\n            <TabButton\n              onClick={() => this.setState({ active: SIDEBAR })}\n              active={active === SIDEBAR}\n            >\n              Sidebar\n            </TabButton>\n            <TabButton onClick={() => this.setState({ active: CANVAS })} active={active === CANVAS}>\n              {viewMode ? 'Canvas' : null}\n              {pages.map(({ key, route: Route }) => (\n                <Route key={key}>{key}</Route>\n              ))}\n            </TabButton>\n            {viewMode && options.showPanel ? (\n              <TabButton\n                onClick={() => this.setState({ active: ADDONS })}\n                active={active === ADDONS}\n              >\n                Addons\n              </TabButton>\n            ) : null}\n          </Bar>\n        )}\n      </Root>\n    );\n  }\n}\n\nexport { Mobile };\n"],"names":["Root","styled","SIDEBAR","CANVAS","ADDONS","ActiveTabs","Pane","theme","index","active","Panels","React","children","isFullscreen","jsx","PanelsContainer","Children","item","Bar","Mobile","Component","props","options","Sidebar","Preview","Panel","Notifications","pages","viewMode","jsxs","key","Route","Content","TabButton"],"mappings":"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"}