{"version":3,"file":"Panel.stories-ea4e5914.js","sources":["../../ui/manager/src/components/panel/Panel.tsx"],"sourcesContent":["import React, { Component } from 'react';\nimport { Tabs, IconButton } from '@storybook/components';\nimport type { State } from '@storybook/manager-api';\nimport { shortcutToHumanString } from '@storybook/manager-api';\nimport type { Addon_BaseType } from '@storybook/types';\nimport { styled } from '@storybook/theming';\nimport { BottomBarIcon, CloseIcon, SidebarAltIcon } from '@storybook/icons';\nimport { useLayout } from '../layout/LayoutProvider';\n\nexport interface SafeTabProps {\n  title: Addon_BaseType['title'];\n  id: string;\n  children: Addon_BaseType['render'];\n}\n\nclass SafeTab extends Component<SafeTabProps, { hasError: boolean }> {\n  constructor(props: SafeTabProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error: Error, info: any) {\n    this.setState({ hasError: true });\n\n    console.error(error, info);\n  }\n\n  // @ts-expect-error (we know this is broken)\n  render() {\n    const { hasError } = this.state;\n    const { children } = this.props;\n    if (hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n    return children;\n  }\n}\n\nexport const AddonPanel = React.memo<{\n  selectedPanel?: string;\n  actions: { onSelect: (id: string) => void } & Record<string, any>;\n  panels: Record<string, Addon_BaseType>;\n  shortcuts: State['shortcuts'];\n  panelPosition?: 'bottom' | 'right';\n  absolute?: boolean;\n}>(\n  ({\n    panels,\n    shortcuts,\n    actions,\n    selectedPanel = null,\n    panelPosition = 'right',\n    absolute = true,\n  }) => {\n    const { isDesktop, setMobilePanelOpen } = useLayout();\n\n    return (\n      <Tabs\n        absolute={absolute}\n        {...(selectedPanel ? { selected: selectedPanel } : {})}\n        menuName=\"Addons\"\n        actions={actions}\n        tools={\n          <Actions>\n            {isDesktop ? (\n              <>\n                <IconButton\n                  key=\"position\"\n                  onClick={actions.togglePosition}\n                  title={`Change addon orientation [${shortcutToHumanString(\n                    shortcuts.panelPosition\n                  )}]`}\n                >\n                  {panelPosition === 'bottom' ? <SidebarAltIcon /> : <BottomBarIcon />}\n                </IconButton>\n                <IconButton\n                  key=\"visibility\"\n                  onClick={actions.toggleVisibility}\n                  title={`Hide addons [${shortcutToHumanString(shortcuts.togglePanel)}]`}\n                >\n                  <CloseIcon />\n                </IconButton>\n              </>\n            ) : (\n              <IconButton onClick={() => setMobilePanelOpen(false)} title=\"Close addon panel\">\n                <CloseIcon />\n              </IconButton>\n            )}\n          </Actions>\n        }\n        id=\"storybook-panel-root\"\n      >\n        {Object.entries(panels).map(([k, v]) => (\n          // @ts-expect-error (we know this is broken)\n          <SafeTab key={k} id={k} title={typeof v.title === 'function' ? <v.title /> : v.title}>\n            {v.render}\n          </SafeTab>\n        ))}\n      </Tabs>\n    );\n  }\n);\n\nAddonPanel.displayName = 'AddonPanel';\n\nconst Actions = styled.div({\n  display: 'flex',\n  alignItems: 'center',\n  gap: 6,\n});\n"],"names":["SafeTab","Component","props","error","info","hasError","children","React","AddonPanel","panels","shortcuts","actions","selectedPanel","panelPosition","absolute","isDesktop","setMobilePanelOpen","useLayout","Tabs","Actions","IconButton","shortcutToHumanString","SidebarAltIcon","BottomBarIcon","CloseIcon","k","v","styled"],"mappings":"8iCAeA,MAAAA,UAAAC,EAAAA,SAAA,CACA,YAAAC,EAAA,CACA,MAAAA,CAAA,EACA,KAAA,MAAA,CAAA,SAAA,EAAA,CACA,CAEA,kBAAAC,EAAAC,EAAA,CACA,KAAA,SAAA,CAAA,SAAA,EAAA,CAAA,EAEA,QAAA,MAAAD,EAAAC,CAAA,CACA,CAGA,QAAA,CACA,KAAA,CAAA,SAAAC,CAAA,EAAA,KAAA,MACA,CAAA,SAAAC,CAAA,EAAA,KAAA,MACA,OAAAD,EACAE,EAAA,cAAA,UAAA,uBAAA,EAEAD,CACA,CACA,CAEA,MAAAE,EAAAD,EAAA,KAQA,CAAA,CACA,OAAAE,EACA,UAAAC,EACA,QAAAC,EACA,cAAAC,EAAA,KACA,cAAAC,EAAA,QACA,SAAAC,EAAA,EAAA,IACA,CACA,KAAA,CAAA,UAAAC,EAAA,mBAAAC,CAAA,EAAAC,EAAA,EAGA,OAAAV,EAAA,cAAAW,EAAA,CACA,SAAAJ,EACA,GAAAF,EAAA,CAAA,SAAAA,GAAA,CAAA,EACA,SAAA,SACA,QAAAD,EACA,MACAJ,EAAA,cAAAY,EACA,KAAAJ,EAEAR,EAAA,cAAAA,EAAA,SAAA,KAAAA,EAAA,cAAAa,EAAA,CACA,IAAA,WACA,QAAAT,EAAA,eACA,MAAA,6BAAAU,EACAX,EAAA,aACA,CAAA,GAAA,EAEAG,IAAA,SAAAN,EAAA,cAAAe,EAAA,IAAA,kBAAAC,EAAA,IAAA,CAEA,EAAAhB,EAAA,cAAAa,EAAA,CACA,IAAA,aACA,QAAAT,EAAA,iBACA,MAAA,gBAAAU,EAAAX,EAAA,WAAA,CAAA,GAAA,kBAEAc,EAAA,IAAA,CAAA,CAEA,EAEAjB,EAAA,cAAAa,EAAA,CAAA,QAAA,IAAAJ,EAAA,EAAA,EAAA,MAAA,mBAAA,EACAT,EAAA,cAAAiB,EAAA,IAAA,CACA,CAEA,EAEA,GAAA,sBAAA,EAEA,OAAA,QAAAf,CAAA,EAAA,IAAA,CAAA,CAAAgB,EAAAC,CAAA,oBAEA1B,EAAA,CAAA,IAAAyB,EAAA,GAAAA,EAAA,MAAA,OAAAC,EAAA,OAAA,WAAAnB,EAAA,cAAAmB,EAAA,MAAA,IAAA,EAAAA,EAAA,KAAA,EACAA,EAAA,MACA,CACA,CAAA,CAGA,CACA,EAEAlB,EAAA,YAAA,aAEA,MAAAW,EAAAQ,EAAA,IAAA,CACA,QAAA,OACA,WAAA,SACA,IAAA,CACA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}