import{r as s,R as r}from"./index-f1f2c4b1.js";import{q as _,E as w,r as I}from"./index-a443495b.js";const b=s.createContext({scale:1}),{global:B}=__STORYBOOK_MODULE_GLOBAL__,{window:O}=B;class f extends s.Component{constructor(){super(...arguments),this.iframe=null}componentDidMount(){const{id:e}=this.props;this.iframe=O.document.getElementById(e)}shouldComponentUpdate(e){const{scale:n}=e;return n!==this.props.scale&&this.setIframeBodyStyle({width:`${n*100}%`,height:`${n*100}%`,transform:`scale(${1/n})`,transformOrigin:"top left"}),!1}setIframeBodyStyle(e){return Object.assign(this.iframe.contentDocument.body.style,e)}render(){const{id:e,title:n,src:l,allowFullScreen:a,scale:i,...o}=this.props;return r.createElement("iframe",{id:e,title:n,src:l,...a?{allow:"fullscreen"}:{},loading:"lazy",...o})}}f.__docgenInfo={description:"",methods:[{name:"setIframeBodyStyle",docblock:null,modifiers:[],params:[{name:"style",optional:!1,type:{name:"BodyStyle",alias:"BodyStyle"}}],returns:null}],displayName:"IFrame",props:{id:{required:!0,tsType:{name:"string"},description:""},key:{required:!1,tsType:{name:"string"},description:""},title:{required:!0,tsType:{name:"string"},description:""},src:{required:!0,tsType:{name:"string"},description:""},allowFullScreen:{required:!0,tsType:{name:"boolean"},description:""},scale:{required:!0,tsType:{name:"number"},description:""},style:{required:!1,tsType:{name:"any"},description:""}}};const{global:$}=__STORYBOOK_MODULE_GLOBAL__,{PREVIEW_URL:L}=$,T=L||"iframe.html",m=({story:t,primary:e})=>`story--${t.id}${e?"--primary":""}`,F=t=>{const e=s.useRef(),[n,l]=s.useState(!0),[a,i]=s.useState(),{story:o,height:d,autoplay:u,forceInitialArgs:h,renderStoryToElement:y}=t;return s.useEffect(()=>{if(!(o&&e.current))return()=>{};const E=e.current,g=y(o,E,{showMain:()=>{},showError:({title:c,description:S})=>i(new Error(`${c} - ${S}`)),showException:c=>i(c)},{autoplay:u,forceInitialArgs:h});return l(!1),()=>{Promise.resolve().then(()=>g())}},[u,y,o]),a?r.createElement("pre",null,r.createElement(w,{error:a})):r.createElement(r.Fragment,null,d?r.createElement("style",null,`#${m(t)} { min-height: ${d}; transform: translateZ(0); overflow: auto }`):null,n&&r.createElement(p,null),r.createElement("div",{ref:e,id:`${m(t)}-inner`,"data-name":o.name}))},R=({story:t,height:e="500px"})=>r.createElement("div",{style:{width:"100%",height:e}},r.createElement(b.Consumer,null,({scale:n})=>r.createElement(f,{key:"iframe",id:`iframe--${t.id}`,title:t.name,src:I(T,t.id,{viewMode:"story"}),allowFullScreen:!0,scale:n,style:{width:"100%",height:"100%",border:"0 none"}}))),q=t=>{const{inline:e}=t;return r.createElement("div",{id:m(t),className:"sb-story sb-unstyled","data-story-block":"true"},e?r.createElement(F,{...t}):r.createElement(R,{...t}))},p=()=>r.createElement(_,null);q.__docgenInfo={description:`A story element, either rendered inline or in an iframe,
with configurable height.`,methods:[],displayName:"Story"};p.__docgenInfo={description:"",methods:[],displayName:"StorySkeleton"};export{q as S,b as Z,p as a};
//# sourceMappingURL=Story-c31830b5.js.map
