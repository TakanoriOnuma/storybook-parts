import{g as I}from"./index-c5db6706.js";import{r as m,R as d}from"./index-6f814c40.js";import{Z as L,H as T,u as X}from"./index-4ca96493.js";import{c as h}from"./index-92073c91.js";import{t as z}from"./throttle-f41f6282.js";import{e as b}from"./index-5a529529.js";import{W as R,v as B,o as G,c as V}from"./index-90790cc0.js";import"./iframe-5727660f.js";import"../sb-preview/runtime.js";import"./polished.esm-ebce2d70.js";import"./extends-98964cd2.js";import"./index-d475d2ea.js";import"./pickBy-8b4999ba.js";import"./_baseIteratee-11045650.js";import"./_getTag-17cccba0.js";import"./isObjectLike-dbd718f5.js";import"./_commonjsHelpers-042e6b4d.js";import"./_baseIsEqual-a479ac5d.js";import"./isSymbol-de103834.js";import"./_basePickBy-ac4ea461.js";import"./keysIn-d555f552.js";import"./_getPrototype-d314cec2.js";import"./_baseAssignValue-531dc4d6.js";import"./cloneDeep-3d0d33b0.js";import"./index-569f0cbf.js";import"./index.modern-19ef23af.js";import"./uniq-b081afc0.js";import"./index-356e4a49.js";import"./index-74303de9.js";import"./mapValues-511dc51c.js";import"./index-ee3f53bc.js";import"./index-6de6b113.js";import"./bundle.esm-5f0471b5.js";var W=b.div({position:"relative",maxWidth:250}),M=b(R)({position:"absolute",zIndex:1,top:4,left:4}),F=b.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),N=b(B)(({theme:t})=>({fontFamily:t.typography.fonts.base})),A=b.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),j=b.div(({theme:t,active:e})=>({width:16,height:16,boxShadow:e?`${t.appBorderColor} 0 0 0 1px inset, ${t.textMutedColor}50 0 0 0 4px`:`${t.appBorderColor} 0 0 0 1px inset`,borderRadius:t.appBorderRadius})),Z=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,C=({value:t,active:e,onClick:a,style:n,...r})=>{const s=`linear-gradient(${t}, ${t}), ${Z}, linear-gradient(#fff, #fff)`;return d.createElement(j,{...r,active:e,onClick:a,style:{...n,backgroundImage:s}})},q=b(G.Input)(({theme:t})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:t.typography.fonts.base})),D=b(V)(({theme:t})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:t.input.color})),_=(t=>(t.RGB="rgb",t.HSL="hsl",t.HEX="hex",t))(_||{}),$=Object.values(_),J=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,K=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Q=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,E=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,U=/^\s*#?([0-9a-f]{3})\s*$/i,Y={hex:L,rgb:T,hsl:X},w={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},S=t=>{const e=t==null?void 0:t.match(J);if(!e)return[0,0,0,1];const[,a,n,r,s=1]=e;return[a,n,r,s].map(Number)},x=t=>{if(!t)return;let e=!0;if(K.test(t)){const[l,p,i,g]=S(t),[f,c,o]=h.rgb.hsl([l,p,i])||[0,0,0];return{valid:e,value:t,keyword:h.rgb.keyword([l,p,i]),colorSpace:"rgb",rgb:t,hsl:`hsla(${f}, ${c}%, ${o}%, ${g})`,hex:`#${h.rgb.hex([l,p,i]).toLowerCase()}`}}if(Q.test(t)){const[l,p,i,g]=S(t),[f,c,o]=h.hsl.rgb([l,p,i])||[0,0,0];return{valid:e,value:t,keyword:h.hsl.keyword([l,p,i]),colorSpace:"hsl",rgb:`rgba(${f}, ${c}, ${o}, ${g})`,hsl:t,hex:`#${h.hsl.hex([l,p,i]).toLowerCase()}`}}const a=t.replace("#",""),n=h.keyword.rgb(a)||h.hex.rgb(a),r=h.rgb.hsl(n);let s=t;if(/[^#a-f0-9]/i.test(t)?s=a:E.test(t)&&(s=`#${a}`),s.startsWith("#"))e=E.test(s);else try{h.keyword.hex(s)}catch{e=!1}return{valid:e,value:s,keyword:h.rgb.keyword(n),colorSpace:"hex",rgb:`rgba(${n[0]}, ${n[1]}, ${n[2]}, 1)`,hsl:`hsla(${r[0]}, ${r[1]}%, ${r[2]}%, 1)`,hex:s}},tt=(t,e,a)=>{if(!t||!(e!=null&&e.valid))return w[a];if(a!=="hex")return(e==null?void 0:e[a])||w[a];if(!e.hex.startsWith("#"))try{return`#${h.keyword.hex(e.hex)}`}catch{return w.hex}const n=e.hex.match(U);if(!n)return E.test(e.hex)?e.hex:w.hex;const[r,s,l]=n[1].split("");return`#${r}${r}${s}${s}${l}${l}`},et=(t,e)=>{const[a,n]=m.useState(t||""),[r,s]=m.useState(()=>x(a)),[l,p]=m.useState((r==null?void 0:r.colorSpace)||"hex");m.useEffect(()=>{const c=t||"",o=x(c);n(c),s(o),p((o==null?void 0:o.colorSpace)||"hex")},[t]);const i=m.useMemo(()=>tt(a,r,l).toLowerCase(),[a,r,l]),g=m.useCallback(c=>{const o=x(c),v=(o==null?void 0:o.value)||c||"";n(v),v===""&&(s(void 0),e(void 0)),o&&(s(o),p(o.colorSpace),e(o.value))},[e]),f=m.useCallback(()=>{let c=$.indexOf(l)+1;c>=$.length&&(c=0),p($[c]);const o=(r==null?void 0:r[$[c]])||"";n(o),e(o)},[r,l,e]);return{value:a,realValue:i,updateValue:g,color:r,colorSpace:l,cycleColorSpace:f}},y=t=>t.replace(/\s*/,"").toLowerCase(),rt=(t,e,a)=>{const[n,r]=m.useState(e!=null&&e.valid?[e]:[]);m.useEffect(()=>{e===void 0&&r([])},[e]);const s=m.useMemo(()=>(t||[]).map(i=>typeof i=="string"?x(i):i.title?{...x(i.color),keyword:i.title}:x(i.color)).concat(n).filter(Boolean).slice(-27),[t,n]),l=m.useCallback(p=>{p!=null&&p.valid&&(s.some(i=>y(i[a])===y(p[a]))||r(i=>i.concat(p)))},[a,s]);return{presets:s,addPreset:l}},at=({name:t,value:e,onChange:a,onFocus:n,onBlur:r,presetColors:s,startOpen:l=!1})=>{const p=m.useCallback(z(a,200),[a]),{value:i,realValue:g,updateValue:f,color:c,colorSpace:o,cycleColorSpace:v}=et(e,p),{presets:k,addPreset:P}=rt(s,c,o),H=Y[o];return d.createElement(W,null,d.createElement(M,{startOpen:l,closeOnOutsideClick:!0,onVisibleChange:()=>P(c),tooltip:d.createElement(F,null,d.createElement(H,{color:g==="transparent"?"#000000":g,onChange:f,onFocus:n,onBlur:r}),k.length>0&&d.createElement(A,null,k.map((u,O)=>d.createElement(R,{key:`${u.value}-${O}`,hasChrome:!1,tooltip:d.createElement(N,{note:u.keyword||u.value})},d.createElement(C,{value:u[o],active:c&&y(u[o])===y(c[o]),onClick:()=>f(u.value)})))))},d.createElement(C,{value:g,style:{margin:4}})),d.createElement(q,{id:I(t),value:i,onChange:u=>f(u.target.value),onFocus:u=>u.target.select(),placeholder:"Choose color..."}),i?d.createElement(D,{icon:"markup",onClick:v}):null)},Bt=at;export{at as ColorControl,Bt as default};
//# sourceMappingURL=Color-7GWY2BML-3c23dea0.js.map
