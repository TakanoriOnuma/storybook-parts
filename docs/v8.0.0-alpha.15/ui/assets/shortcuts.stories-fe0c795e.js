import{r as g,R as r}from"./index-f1f2c4b1.js";import{b as S}from"./chunk-AT66UTFE-23ee157f.js";import{n as s,k as b}from"./index-4b2a7d13.js";import{e as x,a as F,s as K}from"./index-b4514f1c.js";import{F as w,I as P,B as k}from"./index-a443495b.js";import{S as D}from"./SettingsFooter-22249b70.js";import{d as E}from"./defaultShortcuts-d4ab005f.js";import"./v4-4a60fe23.js";import"./_baseAssignValue-611095b5.js";import"./isObjectLike-e57f4fa0.js";import"./mapValues-3cd3a2b8.js";import"./_baseIteratee-c4babb20.js";import"./isSymbol-ef7afaa8.js";import"./_initCloneObject-ae952db3.js";import"./_getPrototype-a3b5123a.js";import"./isPlainObject-7a70f881.js";import"./index-9cc128d5.js";import"./index-b75c9059.js";import"./index-356e4a49.js";import"./_basePickBy-c1531931.js";import"./chunk-TNTLX5UL-4d44e490.js";import"./index-8c127ed0.js";import"./iframe-14332c4c.js";import"../sb-preview/runtime.js";import"./index-c74c9f7f.js";import"./index-5f16f6cc.js";import"./extends-98964cd2.js";import"./index-758f4e48.js";const C=s.header(({theme:a})=>({marginBottom:20,fontSize:a.typography.size.m3,fontWeight:a.typography.weight.bold,alignItems:"center",display:"flex"})),d=s.div(({theme:a})=>({fontWeight:a.typography.weight.bold})),I=s.div({alignSelf:"flex-end",display:"grid",margin:"10px 0",gridTemplateColumns:"1fr 1fr 12px","& > *:last-of-type":{gridColumn:"2 / 2",justifySelf:"flex-end",gridRow:"1"}}),T=s.div(({theme:a})=>({padding:"6px 0",borderTop:`1px solid ${a.appBorderColor}`,display:"grid",gridTemplateColumns:"1fr 1fr 0px"})),N=s.div({display:"grid",gridTemplateColumns:"1fr",gridAutoRows:"minmax(auto, auto)",marginBottom:20}),A=s.div({alignSelf:"center"}),R=s(w.Input)(({valid:a,theme:l})=>a==="error"?{animation:`${l.animation.jiggle} 700ms ease-out`}:{},{display:"flex",width:80,flexDirection:"column",justifySelf:"flex-end",paddingLeft:4,paddingRight:4,textAlign:"center"}),L=b`
0%,100% { opacity: 0; }
  50% { opacity: 1; }
`,B=s(P)(({valid:a,theme:l})=>a==="valid"?{color:l.color.positive,animation:`${L} 2s ease forwards`}:{opacity:0},{alignSelf:"center",display:"flex",marginLeft:10,height:14,width:14}),_=s.div(({theme:a})=>({fontSize:a.typography.size.s2,padding:"3rem 20px",maxWidth:600,margin:"0 auto"})),j={fullScreen:"Go full screen",togglePanel:"Toggle addons",panelPosition:"Toggle addons orientation",toggleNav:"Toggle sidebar",toolbar:"Toggle canvas toolbar",search:"Focus search",focusNav:"Focus sidebar",focusIframe:"Focus canvas",focusPanel:"Focus addons",prevComponent:"Previous component",nextComponent:"Next component",prevStory:"Previous story",nextStory:"Next story",shortcutsPage:"Go to shortcuts page",aboutPage:"Go to about page",collapseAll:"Collapse all items on sidebar",expandAll:"Expand all items on sidebar",remount:"Remount component"},q=["escape"];function c(a){return Object.entries(a).reduce((l,[e,t])=>q.includes(e)?l:{...l,[e]:{shortcut:t,error:!1}},{})}class m extends g.Component{constructor(l){super(l),this.onKeyDown=e=>{const{activeFeature:t,shortcutKeys:n}=this.state;if(e.key==="Backspace")return this.restoreDefault();const o=x(e);if(!o)return!1;const u=!!Object.entries(n).find(([y,{shortcut:p}])=>y!==t&&p&&F(o,p));return this.setState({shortcutKeys:{...n,[t]:{shortcut:o,error:u}}})},this.onFocus=e=>()=>{const{shortcutKeys:t}=this.state;this.setState({activeFeature:e,shortcutKeys:{...t,[e]:{shortcut:null,error:!1}}})},this.onBlur=async()=>{const{shortcutKeys:e,activeFeature:t}=this.state;if(e[t]){const{shortcut:n,error:o}=e[t];return!n||o?this.restoreDefault():this.saveShortcut()}return!1},this.saveShortcut=async()=>{const{activeFeature:e,shortcutKeys:t}=this.state,{setShortcut:n}=this.props;await n(e,t[e].shortcut),this.setState({successField:e})},this.restoreDefaults=async()=>{const{restoreAllDefaultShortcuts:e}=this.props,t=await e();return this.setState({shortcutKeys:c(t)})},this.restoreDefault=async()=>{const{activeFeature:e,shortcutKeys:t}=this.state,{restoreDefaultShortcut:n}=this.props,o=await n(e);return this.setState({shortcutKeys:{...t,...c({[e]:o})}})},this.displaySuccessMessage=e=>{const{successField:t,shortcutKeys:n}=this.state;return e===t&&n[e].error===!1?"valid":void 0},this.displayError=e=>{const{activeFeature:t,shortcutKeys:n}=this.state;return e===t&&n[e].error===!0?"error":void 0},this.renderKeyInput=()=>{const{shortcutKeys:e,addonsShortcutLabels:t}=this.state;return Object.entries(e).map(([o,{shortcut:u}])=>r.createElement(T,{key:o},r.createElement(A,null,j[o]||t[o]),r.createElement(R,{spellCheck:"false",valid:this.displayError(o),className:"modalInput",onBlur:this.onBlur,onFocus:this.onFocus(o),onKeyDown:this.onKeyDown,value:u?K(u):"",placeholder:"Type keys",readOnly:!0}),r.createElement(B,{valid:this.displaySuccessMessage(o),icon:"check"})))},this.renderKeyForm=()=>r.createElement(N,null,r.createElement(I,null,r.createElement(d,null,"Commands"),r.createElement(d,null,"Shortcut")),this.renderKeyInput()),this.state={activeFeature:void 0,successField:void 0,shortcutKeys:c(l.shortcutKeys),addonsShortcutLabels:l.addonsShortcutLabels}}render(){const l=this.renderKeyForm();return r.createElement(_,null,r.createElement(C,null,"Keyboard shortcuts"),l,r.createElement(k,{variant:"outline",size:"small",id:"restoreDefaultsHotkeys",onClick:this.restoreDefaults},"Restore defaults"),r.createElement(D,null))}}m.__docgenInfo={description:"",methods:[{name:"onKeyDown",docblock:null,modifiers:[],params:[{name:"e",optional:!1,type:{name:"KeyboardEvent",alias:"KeyboardEvent"}}],returns:null},{name:"onFocus",docblock:null,modifiers:[],params:[{name:"focusedInput",optional:!1,type:{name:"union",raw:"keyof typeof shortcutLabels",elements:[{name:"literal",value:"fullScreen"},{name:"literal",value:"togglePanel"},{name:"literal",value:"panelPosition"},{name:"literal",value:"toggleNav"},{name:"literal",value:"toolbar"},{name:"literal",value:"search"},{name:"literal",value:"focusNav"},{name:"literal",value:"focusIframe"},{name:"literal",value:"focusPanel"},{name:"literal",value:"prevComponent"},{name:"literal",value:"nextComponent"},{name:"literal",value:"prevStory"},{name:"literal",value:"nextStory"},{name:"literal",value:"shortcutsPage"},{name:"literal",value:"aboutPage"},{name:"literal",value:"collapseAll"},{name:"literal",value:"expandAll"},{name:"literal",value:"remount"}],alias:"Feature"}}],returns:null},{name:"onBlur",docblock:null,modifiers:["async"],params:[],returns:null},{name:"saveShortcut",docblock:null,modifiers:["async"],params:[],returns:null},{name:"restoreDefaults",docblock:null,modifiers:["async"],params:[],returns:null},{name:"restoreDefault",docblock:null,modifiers:["async"],params:[],returns:null},{name:"displaySuccessMessage",docblock:null,modifiers:[],params:[{name:"activeElement",optional:!1,type:{name:"union",raw:"keyof typeof shortcutLabels",elements:[{name:"literal",value:"fullScreen"},{name:"literal",value:"togglePanel"},{name:"literal",value:"panelPosition"},{name:"literal",value:"toggleNav"},{name:"literal",value:"toolbar"},{name:"literal",value:"search"},{name:"literal",value:"focusNav"},{name:"literal",value:"focusIframe"},{name:"literal",value:"focusPanel"},{name:"literal",value:"prevComponent"},{name:"literal",value:"nextComponent"},{name:"literal",value:"prevStory"},{name:"literal",value:"nextStory"},{name:"literal",value:"shortcutsPage"},{name:"literal",value:"aboutPage"},{name:"literal",value:"collapseAll"},{name:"literal",value:"expandAll"},{name:"literal",value:"remount"}],alias:"Feature"}}],returns:null},{name:"displayError",docblock:null,modifiers:[],params:[{name:"activeElement",optional:!1,type:{name:"union",raw:"keyof typeof shortcutLabels",elements:[{name:"literal",value:"fullScreen"},{name:"literal",value:"togglePanel"},{name:"literal",value:"panelPosition"},{name:"literal",value:"toggleNav"},{name:"literal",value:"toolbar"},{name:"literal",value:"search"},{name:"literal",value:"focusNav"},{name:"literal",value:"focusIframe"},{name:"literal",value:"focusPanel"},{name:"literal",value:"prevComponent"},{name:"literal",value:"nextComponent"},{name:"literal",value:"prevStory"},{name:"literal",value:"nextStory"},{name:"literal",value:"shortcutsPage"},{name:"literal",value:"aboutPage"},{name:"literal",value:"collapseAll"},{name:"literal",value:"expandAll"},{name:"literal",value:"remount"}],alias:"Feature"}}],returns:{type:{name:"union",raw:"'valid' | 'error' | 'warn'",elements:[{name:"literal",value:"'valid'"},{name:"literal",value:"'error'"},{name:"literal",value:"'warn'"}]}}},{name:"renderKeyInput",docblock:null,modifiers:[],params:[],returns:null},{name:"renderKeyForm",docblock:null,modifiers:[],params:[],returns:null}],displayName:"ShortcutsScreen",props:{shortcutKeys:{required:!0,tsType:{name:"Record",elements:[{name:"union",raw:"keyof typeof shortcutLabels",elements:[{name:"literal",value:"fullScreen"},{name:"literal",value:"togglePanel"},{name:"literal",value:"panelPosition"},{name:"literal",value:"toggleNav"},{name:"literal",value:"toolbar"},{name:"literal",value:"search"},{name:"literal",value:"focusNav"},{name:"literal",value:"focusIframe"},{name:"literal",value:"focusPanel"},{name:"literal",value:"prevComponent"},{name:"literal",value:"nextComponent"},{name:"literal",value:"prevStory"},{name:"literal",value:"nextStory"},{name:"literal",value:"shortcutsPage"},{name:"literal",value:"aboutPage"},{name:"literal",value:"collapseAll"},{name:"literal",value:"expandAll"},{name:"literal",value:"remount"}]},{name:"any"}],raw:"Record<Feature, any>"},description:""},addonsShortcutLabels:{required:!1,tsType:{name:"Record",elements:[{name:"string"},{name:"string"}],raw:"Record<string, string>"},description:""},setShortcut:{required:!0,tsType:{name:"Function"},description:""},restoreDefaultShortcut:{required:!0,tsType:{name:"Function"},description:""},restoreAllDefaultShortcuts:{required:!0,tsType:{name:"Function"},description:""}}};const z=S("setShortcut","restoreDefaultShortcut","restoreAllDefaultShortcuts","onClose"),he={component:m,title:"Settings/ShortcutsScreen",decorators:[(a,l)=>r.createElement("div",{style:{position:"relative",height:"calc(100vh)",width:"calc(100vw)"}},r.createElement(a,{...l}))]},i=()=>r.createElement(m,{shortcutKeys:E,...z});i.storyName="default shortcuts";i.__docgenInfo={description:"",methods:[],displayName:"Defaults"};var v,h,f;i.parameters={...i.parameters,docs:{...(v=i.parameters)==null?void 0:v.docs,source:{originalSource:"() => <ShortcutsScreen shortcutKeys={defaultShortcuts} {...actions} />",...(f=(h=i.parameters)==null?void 0:h.docs)==null?void 0:f.source}}};const fe=["Defaults"];export{i as Defaults,fe as __namedExportsOrder,he as default};
//# sourceMappingURL=shortcuts.stories-fe0c795e.js.map
