{"version":3,"file":"preview-b6f00600.js","sources":["../../node_modules/@storybook/addon-actions/dist/preview.js"],"sourcesContent":["import { v4 } from 'uuid';\nimport { addons } from '@storybook/preview-api';\nimport { global } from '@storybook/global';\nimport { ImplicitActionsDuringRendering } from '@storybook/core-events/preview-errors';\n\n// src/runtime/action.ts\n\n// src/constants.ts\nvar ADDON_ID = \"storybook/actions\";\nvar EVENT_ID = `${ADDON_ID}/action-event`;\n\n// src/runtime/configureActions.ts\nvar config = {\n  depth: 10,\n  clearOnStoryChange: true,\n  limit: 50\n};\n\n// src/runtime/action.ts\nvar findProto = (obj, callback) => {\n  const proto = Object.getPrototypeOf(obj);\n  if (!proto || callback(proto))\n    return proto;\n  return findProto(proto, callback);\n};\nvar isReactSyntheticEvent = (e) => Boolean(\n  typeof e === \"object\" && e && findProto(e, (proto) => /^Synthetic(?:Base)?Event$/.test(proto.constructor.name)) && typeof e.persist === \"function\"\n);\nvar serializeArg = (a) => {\n  if (isReactSyntheticEvent(a)) {\n    const e = Object.create(\n      // @ts-expect-error (Converted from ts-ignore)\n      a.constructor.prototype,\n      Object.getOwnPropertyDescriptors(a)\n    );\n    e.persist();\n    const viewDescriptor = Object.getOwnPropertyDescriptor(e, \"view\");\n    const view = viewDescriptor?.value;\n    if (typeof view === \"object\" && view?.constructor.name === \"Window\") {\n      Object.defineProperty(e, \"view\", {\n        ...viewDescriptor,\n        value: Object.create(view.constructor.prototype)\n      });\n    }\n    return e;\n  }\n  return a;\n};\nvar generateId = () => {\n  return typeof crypto === \"object\" && typeof crypto.getRandomValues === \"function\" ? v4() : (\n    // pseudo random id, example response lo1e7zm4832bkr7yfl7\n    Date.now().toString(36) + Math.random().toString(36).substring(2)\n  );\n};\nfunction action(name, options = {}) {\n  const actionOptions = {\n    ...config,\n    ...options\n  };\n  const handler = function actionHandler(...args) {\n    if (options.implicit) {\n      const preview = \"__STORYBOOK_PREVIEW__\" in global ? (\n        // eslint-disable-next-line no-underscore-dangle\n        global.__STORYBOOK_PREVIEW__\n      ) : void 0;\n      const storyRenderer = preview?.storyRenders.find(\n        (render) => render.phase === \"playing\" || render.phase === \"rendering\"\n      );\n      if (storyRenderer) {\n        const deprecated = !window?.FEATURES?.disallowImplicitActionsInRenderV8;\n        const error = new ImplicitActionsDuringRendering({\n          phase: storyRenderer.phase,\n          name,\n          deprecated\n        });\n        if (deprecated) {\n          console.warn(error);\n        } else {\n          throw error;\n        }\n      }\n    }\n    const channel = addons.getChannel();\n    const id = generateId();\n    const minDepth = 5;\n    const serializedArgs = args.map(serializeArg);\n    const normalizedArgs = args.length > 1 ? serializedArgs : serializedArgs[0];\n    const actionDisplayToEmit = {\n      id,\n      count: 0,\n      data: { name, args: normalizedArgs },\n      options: {\n        ...actionOptions,\n        maxDepth: minDepth + (actionOptions.depth || 3),\n        allowFunction: actionOptions.allowFunction || false\n      }\n    };\n    channel.emit(EVENT_ID, actionDisplayToEmit);\n  };\n  handler.isAction = true;\n  return handler;\n}\n\n// src/addArgsHelpers.ts\nvar isInInitialArgs = (name, initialArgs) => typeof initialArgs[name] === \"undefined\" && !(name in initialArgs);\nvar inferActionsFromArgTypesRegex = (context) => {\n  const {\n    initialArgs,\n    argTypes,\n    id,\n    parameters: { actions }\n  } = context;\n  if (!actions || actions.disable || !actions.argTypesRegex || !argTypes) {\n    return {};\n  }\n  const argTypesRegex = new RegExp(actions.argTypesRegex);\n  const argTypesMatchingRegex = Object.entries(argTypes).filter(\n    ([name]) => !!argTypesRegex.test(name)\n  );\n  return argTypesMatchingRegex.reduce((acc, [name, argType]) => {\n    if (isInInitialArgs(name, initialArgs)) {\n      acc[name] = action(name, { implicit: true, id });\n    }\n    return acc;\n  }, {});\n};\nvar addActionsFromArgTypes = (context) => {\n  const {\n    initialArgs,\n    argTypes,\n    parameters: { actions }\n  } = context;\n  if (actions?.disable || !argTypes) {\n    return {};\n  }\n  const argTypesWithAction = Object.entries(argTypes).filter(\n    ([name, argType]) => !!argType[\"action\"]\n  );\n  return argTypesWithAction.reduce((acc, [name, argType]) => {\n    if (isInInitialArgs(name, initialArgs)) {\n      acc[name] = action(typeof argType[\"action\"] === \"string\" ? argType[\"action\"] : name);\n    }\n    return acc;\n  }, {});\n};\n\n// src/addArgs.ts\nvar argsEnhancers = [\n  addActionsFromArgTypes,\n  inferActionsFromArgTypesRegex\n];\n\n// src/loaders.ts\nvar attachActionsToFunctionMocks = (context) => {\n  const {\n    args,\n    parameters: { actions }\n  } = context;\n  if (actions?.disable)\n    return;\n  Object.entries(args).filter(\n    ([, value]) => typeof value === \"function\" && \"_isMockFunction\" in value && value._isMockFunction\n  ).forEach(([key, value]) => {\n    const previous = value.getMockImplementation();\n    if (previous?._actionAttached !== true && previous?.isAction !== true) {\n      const implementation = (...params) => {\n        action(key)(...params);\n        return previous?.(...params);\n      };\n      implementation._actionAttached = true;\n      value.mockImplementation(implementation);\n    }\n  });\n};\nvar loaders = [attachActionsToFunctionMocks];\n\nexport { argsEnhancers, loaders };\n"],"names":["addons","global","ImplicitActionsDuringRendering","ADDON_ID","EVENT_ID","config","findProto","obj","callback","proto","isReactSyntheticEvent","e","serializeArg","a","viewDescriptor","view","generateId","v4","action","name","options","actionOptions","handler","args","preview","storyRenderer","render","deprecated","_a","error","channel","id","minDepth","serializedArgs","normalizedArgs","actionDisplayToEmit","isInInitialArgs","initialArgs","inferActionsFromArgTypesRegex","context","argTypes","actions","argTypesRegex","acc","argType","addActionsFromArgTypes","argsEnhancers","attachActionsToFunctionMocks","value","key","previous","implementation","params","loaders"],"mappings":"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","x_google_ignoreList":[0]}