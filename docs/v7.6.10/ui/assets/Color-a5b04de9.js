import{a as _,j as f}from"./jsx-runtime-31019b9d.js";import{r as p}from"./index-9f32f44c.js";import{Z as I,H as B,u as H}from"./index-2e760762.js";import{c}from"./index-03bbf7d1.js";import{t as F}from"./throttle-45ffedfb.js";import{n as y}from"./index-9e46a6e4.js";import{f as E,T as L,F as X,I as z}from"./index-0d90a496.js";import{a as G}from"./helpers-a9e07cde.js";import"./_commonjsHelpers-de833af9.js";import"./isObjectLike-7c6e5cb8.js";import"./isSymbol-6ab5993c.js";import"./iframe-9b8f7ddb.js";import"../sb-preview/runtime.js";import"./index-9c2d1831.js";import"./bundle.esm-ef1ed2af.js";import"./index-b75c9059.js";const N=y.div({position:"relative",maxWidth:250}),W=y(E)({position:"absolute",zIndex:1,top:4,left:4}),M=y.div({width:200,margin:5,".react-colorful__saturation":{borderRadius:"4px 4px 0 0"},".react-colorful__hue":{boxShadow:"inset 0 0 0 1px rgb(0 0 0 / 5%)"},".react-colorful__last-control":{borderRadius:"0 0 4px 4px"}}),j=y(L)(({theme:e})=>({fontFamily:e.typography.fonts.base})),A=y.div({display:"grid",gridTemplateColumns:"repeat(9, 16px)",gap:6,padding:3,marginTop:5,width:200}),Z=y.div(({theme:e,active:t})=>({width:16,height:16,boxShadow:t?`${e.appBorderColor} 0 0 0 1px inset, ${e.textMutedColor}50 0 0 0 4px`:`${e.appBorderColor} 0 0 0 1px inset`,borderRadius:e.appBorderRadius})),D=`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,k=({value:e,active:t,onClick:a,style:l,...r})=>{const o=`linear-gradient(${e}, ${e}), ${D}, linear-gradient(#fff, #fff)`;return f(Z,{...r,active:t,onClick:a,style:{...l,backgroundImage:o}})},J=y(X.Input)(({theme:e})=>({width:"100%",paddingLeft:30,paddingRight:30,boxSizing:"border-box",fontFamily:e.typography.fonts.base})),K=y(z)(({theme:e})=>({position:"absolute",zIndex:1,top:6,right:7,width:20,height:20,padding:4,boxSizing:"border-box",cursor:"pointer",color:e.input.color}));var P=(e=>(e.RGB="rgb",e.HSL="hsl",e.HEX="hex",e))(P||{});const C=Object.values(P),Q=/\(([0-9]+),\s*([0-9]+)%?,\s*([0-9]+)%?,?\s*([0-9.]+)?\)/,U=/^\s*rgba?\(([0-9]+),\s*([0-9]+),\s*([0-9]+),?\s*([0-9.]+)?\)\s*$/i,Y=/^\s*hsla?\(([0-9]+),\s*([0-9]+)%,\s*([0-9]+)%,?\s*([0-9.]+)?\)\s*$/i,w=/^\s*#?([0-9a-f]{3}|[0-9a-f]{6})\s*$/i,ee=/^\s*#?([0-9a-f]{3})\s*$/i,te={hex:I,rgb:B,hsl:H},v={hex:"transparent",rgb:"rgba(0, 0, 0, 0)",hsl:"hsla(0, 0%, 0%, 0)"},S=e=>{const t=e==null?void 0:e.match(Q);if(!t)return[0,0,0,1];const[,a,l,r,o=1]=t;return[a,l,r,o].map(Number)},b=e=>{if(!e)return;let t=!0;if(U.test(e)){const[i,d,n,m]=S(e),[g,u,s]=c.rgb.hsl([i,d,n])||[0,0,0];return{valid:t,value:e,keyword:c.rgb.keyword([i,d,n]),colorSpace:"rgb",rgb:e,hsl:`hsla(${g}, ${u}%, ${s}%, ${m})`,hex:`#${c.rgb.hex([i,d,n]).toLowerCase()}`}}if(Y.test(e)){const[i,d,n,m]=S(e),[g,u,s]=c.hsl.rgb([i,d,n])||[0,0,0];return{valid:t,value:e,keyword:c.hsl.keyword([i,d,n]),colorSpace:"hsl",rgb:`rgba(${g}, ${u}, ${s}, ${m})`,hsl:e,hex:`#${c.hsl.hex([i,d,n]).toLowerCase()}`}}const a=e.replace("#",""),l=c.keyword.rgb(a)||c.hex.rgb(a),r=c.rgb.hsl(l);let o=e;if(/[^#a-f0-9]/i.test(e)?o=a:w.test(e)&&(o=`#${a}`),o.startsWith("#"))t=w.test(o);else try{c.keyword.hex(o)}catch{t=!1}return{valid:t,value:o,keyword:c.rgb.keyword(l),colorSpace:"hex",rgb:`rgba(${l[0]}, ${l[1]}, ${l[2]}, 1)`,hsl:`hsla(${r[0]}, ${r[1]}%, ${r[2]}%, 1)`,hex:o}},re=(e,t,a)=>{if(!e||!(t!=null&&t.valid))return v[a];if(a!=="hex")return(t==null?void 0:t[a])||v[a];if(!t.hex.startsWith("#"))try{return`#${c.keyword.hex(t.hex)}`}catch{return v.hex}const l=t.hex.match(ee);if(!l)return w.test(t.hex)?t.hex:v.hex;const[r,o,i]=l[1].split("");return`#${r}${r}${o}${o}${i}${i}`},ae=(e,t)=>{const[a,l]=p.useState(e||""),[r,o]=p.useState(()=>b(a)),[i,d]=p.useState((r==null?void 0:r.colorSpace)||"hex");p.useEffect(()=>{const u=e||"",s=b(u);l(u),o(s),d((s==null?void 0:s.colorSpace)||"hex")},[e]);const n=p.useMemo(()=>re(a,r,i).toLowerCase(),[a,r,i]),m=p.useCallback(u=>{const s=b(u),x=(s==null?void 0:s.value)||u||"";l(x),x===""&&(o(void 0),t(void 0)),s&&(o(s),d(s.colorSpace),t(s.value))},[t]),g=p.useCallback(()=>{let u=C.indexOf(i)+1;u>=C.length&&(u=0),d(C[u]);const s=(r==null?void 0:r[C[u]])||"";l(s),t(s)},[r,i,t]);return{value:a,realValue:n,updateValue:m,color:r,colorSpace:i,cycleColorSpace:g}},$=e=>e.replace(/\s*/,"").toLowerCase(),se=(e,t,a)=>{const[l,r]=p.useState(t!=null&&t.valid?[t]:[]);p.useEffect(()=>{t===void 0&&r([])},[t]);const o=p.useMemo(()=>(e||[]).map(n=>typeof n=="string"?b(n):n.title?{...b(n.color),keyword:n.title}:b(n.color)).concat(l).filter(Boolean).slice(-27),[e,l]),i=p.useCallback(d=>{d!=null&&d.valid&&(o.some(n=>$(n[a])===$(d[a]))||r(n=>n.concat(d)))},[a,o]);return{presets:o,addPreset:i}},q=({name:e,value:t,onChange:a,onFocus:l,onBlur:r,presetColors:o,startOpen:i=!1})=>{const d=p.useCallback(F(a,200),[a]),{value:n,realValue:m,updateValue:g,color:u,colorSpace:s,cycleColorSpace:x}=ae(t,d),{presets:V,addPreset:R}=se(o,u,s),T=te[s];return _(N,{children:[f(W,{startOpen:i,closeOnOutsideClick:!0,onVisibleChange:()=>R(u),tooltip:_(M,{children:[f(T,{color:m==="transparent"?"#000000":m,onChange:g,onFocus:l,onBlur:r}),V.length>0&&f(A,{children:V.map((h,O)=>f(E,{hasChrome:!1,tooltip:f(j,{note:h.keyword||h.value}),children:f(k,{value:h[s],active:u&&$(h[s])===$(u[s]),onClick:()=>g(h.value)})},`${h.value}-${O}`))})]}),children:f(k,{value:m,style:{margin:4}})}),f(J,{id:G(e),value:n,onChange:h=>g(h.target.value),onFocus:h=>h.target.select(),placeholder:"Choose color..."}),n?f(K,{icon:"markup",onClick:x}):null]})};try{q.displayName="ColorControl",q.__docgenInfo={description:"",displayName:"ColorControl",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string"}},argType:{defaultValue:null,description:"",name:"argType",required:!1,type:{name:"ArgType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => string | void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((evt: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((evt: any) => void)"}},presetColors:{defaultValue:null,description:"",name:"presetColors",required:!1,type:{name:"PresetColor[]"}},startOpen:{defaultValue:{value:"false"},description:"Whether the color picker should be open by default when rendered.",name:"startOpen",required:!1,type:{name:"boolean"}}}}}catch{}try{Color.displayName="Color",Color.__docgenInfo={description:"",displayName:"Color",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string"}},argType:{defaultValue:null,description:"",name:"argType",required:!1,type:{name:"ArgType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => string | void"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"((evt: any) => void)"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"((evt: any) => void)"}},presetColors:{defaultValue:null,description:"",name:"presetColors",required:!1,type:{name:"PresetColor[]"}},startOpen:{defaultValue:{value:"false"},description:"Whether the color picker should be open by default when rendered.",name:"startOpen",required:!1,type:{name:"boolean"}}}}}catch{}export{q as ColorControl,q as default};
//# sourceMappingURL=Color-a5b04de9.js.map
