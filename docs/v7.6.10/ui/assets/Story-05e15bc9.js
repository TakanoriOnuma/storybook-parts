import{j as t,a as F,F as b}from"./jsx-runtime-31019b9d.js";import{r as a}from"./index-9f32f44c.js";import{v as x,E,x as I}from"./index-0d90a496.js";const V=a.createContext({scale:1}),{global:q}=__STORYBOOK_MODULE_GLOBAL__,{window:L}=q;class c extends a.Component{constructor(){super(...arguments),this.iframe=null}componentDidMount(){const{id:r}=this.props;this.iframe=L.document.getElementById(r)}shouldComponentUpdate(r){const{scale:n}=r;return n!==this.props.scale&&this.setIframeBodyStyle({width:`${n*100}%`,height:`${n*100}%`,transform:`scale(${1/n})`,transformOrigin:"top left"}),!1}setIframeBodyStyle(r){return Object.assign(this.iframe.contentDocument.body.style,r)}render(){const{id:r,title:n,src:s,allowFullScreen:i,scale:d,...o}=this.props;return t("iframe",{id:r,title:n,src:s,...i?{allow:"fullscreen"}:{},loading:"lazy",...o})}}try{c.displayName="IFrame",c.__docgenInfo={description:"",displayName:"IFrame",props:{id:{defaultValue:null,description:"",name:"id",required:!0,type:{name:"string"}},key:{defaultValue:null,description:"",name:"key",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},src:{defaultValue:null,description:"",name:"src",required:!0,type:{name:"string"}},allowFullScreen:{defaultValue:null,description:"",name:"allowFullScreen",required:!0,type:{name:"boolean"}},scale:{defaultValue:null,description:"",name:"scale",required:!0,type:{name:"number"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"any"}}}}}catch{}const{global:w}=__STORYBOOK_MODULE_GLOBAL__,{PREVIEW_URL:R}=w,C=R||"iframe.html",l=({story:e,primary:r})=>`story--${e.id}${r?"--primary":""}`,O=e=>{const r=a.useRef(),[n,s]=a.useState(!0),[i,d]=a.useState(),{story:o,height:y,autoplay:m,forceInitialArgs:h,renderStoryToElement:p}=e;return a.useEffect(()=>{if(!(o&&r.current))return()=>{};const g=r.current,S=p(o,g,{showMain:()=>{},showError:({title:u,description:_})=>d(new Error(`${u} - ${_}`)),showException:u=>d(u)},{autoplay:m,forceInitialArgs:h});return s(!1),()=>{Promise.resolve().then(()=>S())}},[m,p,o]),i?t("pre",{children:t(E,{error:i})}):F(b,{children:[y?t("style",{children:`#${l(e)} { min-height: ${y}; transform: translateZ(0); overflow: auto }`}):null,n&&t($,{}),t("div",{ref:r,id:`${l(e)}-inner`,"data-name":o.name})]})},A=({story:e,height:r="500px"})=>t("div",{style:{width:"100%",height:r},children:t(V.Consumer,{children:({scale:n})=>t(c,{id:`iframe--${e.id}`,title:e.name,src:I(C,e.id,{viewMode:"story"}),allowFullScreen:!0,scale:n,style:{width:"100%",height:"100%",border:"0 none"}},"iframe")})}),f=e=>{const{inline:r}=e;return t("div",{id:l(e),className:"sb-story sb-unstyled","data-story-block":"true",children:r?t(O,{...e}):t(A,{...e})})},$=()=>t(x,{});try{l.displayName="storyBlockIdFromId",l.__docgenInfo={description:"",displayName:"storyBlockIdFromId",props:{inline:{defaultValue:null,description:"",name:"inline",required:!0,type:{name:"boolean"}},height:{defaultValue:{value:"500px"},description:"",name:"height",required:!1,type:{name:"string"}},autoplay:{defaultValue:null,description:"",name:"autoplay",required:!0,type:{name:"boolean"}},forceInitialArgs:{defaultValue:null,description:"",name:"forceInitialArgs",required:!0,type:{name:"boolean"}},renderStoryToElement:{defaultValue:null,description:"",name:"renderStoryToElement",required:!0,type:{name:"(story: PreparedStory<Renderer>, element: HTMLElement, callbacks: RenderContextCallbacks<Renderer>, options: StoryRenderOptions) => () => Promise<...>"}},story:{defaultValue:null,description:"",name:"story",required:!0,type:{name:"StoryContextForEnhancers<Renderer, Args> & { moduleExport: any; originalStoryFn: StoryFn<Renderer, Args>; undecoratedStoryFn: LegacyStoryFn<...>; unboundStoryFn: LegacyStoryFn<...>; applyLoaders: (context: StoryContextForLoaders<...>) => Promise<...>; playFunction?: ((context: StoryContext<...>) => void | Promise<....."}},primary:{defaultValue:null,description:"",name:"primary",required:!0,type:{name:"boolean"}}}}}catch{}try{f.displayName="Story",f.__docgenInfo={description:`A story element, either rendered inline or in an iframe,
with configurable height.`,displayName:"Story",props:{inline:{defaultValue:null,description:"",name:"inline",required:!0,type:{name:"boolean"}},height:{defaultValue:{value:"500px"},description:"",name:"height",required:!1,type:{name:"string"}},autoplay:{defaultValue:null,description:"",name:"autoplay",required:!0,type:{name:"boolean"}},forceInitialArgs:{defaultValue:null,description:"",name:"forceInitialArgs",required:!0,type:{name:"boolean"}},renderStoryToElement:{defaultValue:null,description:"",name:"renderStoryToElement",required:!0,type:{name:"(story: PreparedStory<Renderer>, element: HTMLElement, callbacks: RenderContextCallbacks<Renderer>, options: StoryRenderOptions) => () => Promise<...>"}},story:{defaultValue:null,description:"",name:"story",required:!0,type:{name:"StoryContextForEnhancers<Renderer, Args> & { moduleExport: any; originalStoryFn: StoryFn<Renderer, Args>; undecoratedStoryFn: LegacyStoryFn<...>; unboundStoryFn: LegacyStoryFn<...>; applyLoaders: (context: StoryContextForLoaders<...>) => Promise<...>; playFunction?: ((context: StoryContext<...>) => void | Promise<....."}},primary:{defaultValue:null,description:"",name:"primary",required:!0,type:{name:"boolean"}}}}}catch{}export{$ as S,V as Z,f as a};
//# sourceMappingURL=Story-05e15bc9.js.map
