{"version":3,"file":"MobileNavigation.stories-4b1e5cf2.js","sources":["../../ui/manager/src/components/mobile/navigation/MobileMenuDrawer.tsx","../../ui/manager/src/components/mobile/navigation/MobileAddonsDrawer.tsx","../../ui/manager/src/components/mobile/navigation/MobileNavigation.tsx"],"sourcesContent":["import type { FC } from 'react';\nimport React, { useRef } from 'react';\nimport { styled } from '@storybook/theming';\nimport { Transition } from 'react-transition-group';\nimport type { TransitionStatus } from 'react-transition-group/Transition';\nimport { MobileAbout } from '../about/MobileAbout';\nimport { MOBILE_TRANSITION_DURATION } from '../../../constants';\nimport { useLayout } from '../../layout/LayoutProvider';\n\ninterface MobileMenuDrawerProps {\n  children?: React.ReactNode;\n}\n\nexport const MobileMenuDrawer: FC<MobileMenuDrawerProps> = ({ children }) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const sidebarRef = useRef<HTMLDivElement>(null);\n  const overlayRef = useRef<HTMLDivElement>(null);\n  const { isMobileMenuOpen, setMobileMenuOpen, isMobileAboutOpen, setMobileAboutOpen } =\n    useLayout();\n\n  return (\n    <>\n      <Transition\n        nodeRef={containerRef}\n        in={isMobileMenuOpen}\n        timeout={MOBILE_TRANSITION_DURATION}\n        mountOnEnter\n        unmountOnExit\n        onExited={() => setMobileAboutOpen(false)}\n      >\n        {(state) => (\n          <Container ref={containerRef} state={state}>\n            <Transition\n              nodeRef={sidebarRef}\n              in={!isMobileAboutOpen}\n              timeout={MOBILE_TRANSITION_DURATION}\n            >\n              {(sidebarState) => (\n                <SidebarContainer ref={sidebarRef} state={sidebarState}>\n                  {children}\n                </SidebarContainer>\n              )}\n            </Transition>\n            <MobileAbout />\n          </Container>\n        )}\n      </Transition>\n      <Transition\n        nodeRef={overlayRef}\n        in={isMobileMenuOpen}\n        timeout={MOBILE_TRANSITION_DURATION}\n        mountOnEnter\n        unmountOnExit\n      >\n        {(state) => (\n          <Overlay\n            ref={overlayRef}\n            state={state}\n            onClick={() => setMobileMenuOpen(false)}\n            aria-label=\"Close navigation menu\"\n          />\n        )}\n      </Transition>\n    </>\n  );\n};\n\nconst Container = styled.div<{ state: TransitionStatus }>(({ theme, state }) => ({\n  position: 'fixed',\n  boxSizing: 'border-box',\n  width: '100%',\n  background: theme.background.content,\n  height: '80%',\n  bottom: 0,\n  left: 0,\n  zIndex: 11,\n  borderRadius: '10px 10px 0 0',\n  transition: `all ${MOBILE_TRANSITION_DURATION}ms ease-in-out`,\n  overflow: 'hidden',\n  transform: `${(() => {\n    if (state === 'entering') return 'translateY(0)';\n    if (state === 'entered') return 'translateY(0)';\n    if (state === 'exiting') return 'translateY(100%)';\n    if (state === 'exited') return 'translateY(100%)';\n    return 'translateY(0)';\n  })()}`,\n}));\n\nconst SidebarContainer = styled.div<{ state: TransitionStatus }>(({ theme, state }) => ({\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  top: 0,\n  left: 0,\n  zIndex: 1,\n  transition: `all ${MOBILE_TRANSITION_DURATION}ms ease-in-out`,\n  overflow: 'hidden',\n  opacity: `${(() => {\n    if (state === 'entered') return 1;\n    if (state === 'entering') return 1;\n    if (state === 'exiting') return 0;\n    if (state === 'exited') return 0;\n    return 1;\n  })()}`,\n  transform: `${(() => {\n    switch (state) {\n      case 'entering':\n      case 'entered':\n        return 'translateX(0)';\n      case 'exiting':\n      case 'exited':\n        return 'translateX(-20px)';\n      default:\n        return 'translateX(0)';\n    }\n  })()}`,\n}));\n\nconst Overlay = styled.div<{ state: TransitionStatus }>(({ state }) => ({\n  position: 'fixed',\n  boxSizing: 'border-box',\n  background: 'rgba(0, 0, 0, 0.5)',\n  top: 0,\n  bottom: 0,\n  right: 0,\n  left: 0,\n  zIndex: 10,\n  transition: `all ${MOBILE_TRANSITION_DURATION}ms ease-in-out`,\n  cursor: 'pointer',\n  opacity: `${(() => {\n    switch (state) {\n      case 'entering':\n      case 'entered':\n        return 1;\n      case 'exiting':\n      case 'exited':\n        return 0;\n      default:\n        return 0;\n    }\n  })()}`,\n\n  '&:hover': {\n    background: 'rgba(0, 0, 0, 0.6)',\n  },\n}));\n","import type { FC, ReactNode } from 'react';\nimport React, { useRef } from 'react';\nimport { styled } from '@storybook/theming';\nimport { Transition } from 'react-transition-group';\nimport type { TransitionStatus } from 'react-transition-group/Transition';\nimport { useLayout } from '../../layout/LayoutProvider';\n\ninterface MobileAddonsDrawerProps {\n  children: ReactNode;\n}\n\nconst TRANSITION_DURATION = 200;\n\nconst Container = styled.div<{ state: TransitionStatus }>(({ theme, state }) => ({\n  position: 'fixed',\n  boxSizing: 'border-box',\n  width: '100%',\n  background: theme.background.content,\n  height: '50%',\n  bottom: 0,\n  left: 0,\n  zIndex: 11,\n  transition: `all ${TRANSITION_DURATION}ms ease-in-out`,\n  overflow: 'hidden',\n  borderTop: `1px solid ${theme.appBorderColor}`,\n  transform: `${(() => {\n    switch (state) {\n      case 'entering':\n      case 'entered':\n        return 'translateY(0)';\n      case 'exiting':\n      case 'exited':\n        return 'translateY(100%)';\n      default:\n        return 'translateY(0)';\n    }\n  })()}`,\n}));\n\nexport const MobileAddonsDrawer: FC<MobileAddonsDrawerProps> = ({ children }) => {\n  const { isMobilePanelOpen } = useLayout();\n  const containerRef = useRef(null);\n\n  return (\n    <Transition\n      nodeRef={containerRef}\n      in={isMobilePanelOpen}\n      timeout={TRANSITION_DURATION}\n      mountOnEnter\n      unmountOnExit\n    >\n      {(state) => (\n        <Container ref={containerRef} state={state}>\n          {children}\n        </Container>\n      )}\n    </Transition>\n  );\n};\n","import type { FC } from 'react';\nimport React from 'react';\nimport { styled } from '@storybook/theming';\nimport { IconButton } from '@storybook/components';\nimport { useStorybookApi, useStorybookState } from '@storybook/manager-api';\nimport { BottomBarToggleIcon, MenuIcon } from '@storybook/icons';\nimport { MobileMenuDrawer } from './MobileMenuDrawer';\nimport { MobileAddonsDrawer } from './MobileAddonsDrawer';\nimport { useLayout } from '../../layout/LayoutProvider';\n\ninterface MobileNavigationProps {\n  menu?: React.ReactNode;\n  panel?: React.ReactNode;\n  showPanel: boolean;\n}\n\n/**\n * walks the tree from the current story to combine story+component+folder names into a single string\n */\nconst useFullStoryName = () => {\n  const { index } = useStorybookState();\n  const currentStory = useStorybookApi().getCurrentStoryData();\n\n  if (!currentStory) return '';\n\n  let fullStoryName = currentStory.renderLabel?.(currentStory) || currentStory.name;\n  let node = index[currentStory.id];\n\n  while ('parent' in node && node.parent && index[node.parent] && fullStoryName.length < 24) {\n    node = index[node.parent];\n    const parentName = node.renderLabel?.(node) || node.name;\n    fullStoryName = `${parentName}/${fullStoryName}`;\n  }\n  return fullStoryName;\n};\n\nexport const MobileNavigation: FC<MobileNavigationProps> = ({ menu, panel, showPanel }) => {\n  const { isMobileMenuOpen, setMobileMenuOpen, setMobilePanelOpen } = useLayout();\n  const fullStoryName = useFullStoryName();\n\n  return (\n    <Container>\n      <MobileMenuDrawer>{menu}</MobileMenuDrawer>\n      <MobileAddonsDrawer>{panel}</MobileAddonsDrawer>\n      <Button onClick={() => setMobileMenuOpen(!isMobileMenuOpen)} title=\"Open navigation menu\">\n        <MenuIcon />\n        <Text>{fullStoryName}</Text>\n      </Button>\n      {showPanel && (\n        <IconButton onClick={() => setMobilePanelOpen(true)} title=\"Open addon panel\">\n          <BottomBarToggleIcon />\n        </IconButton>\n      )}\n    </Container>\n  );\n};\n\nconst Container = styled.div(({ theme }) => ({\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'space-between',\n  bottom: 0,\n  left: 0,\n  width: '100%',\n  height: 40,\n  zIndex: 10,\n  background: theme.barBg,\n  padding: '0 6px',\n  borderTop: `1px solid ${theme.appBorderColor}`,\n}));\n\nconst Button = styled.button(({ theme }) => ({\n  all: 'unset',\n  display: 'flex',\n  alignItems: 'center',\n  gap: 10,\n  color: theme.color.mediumdark,\n  fontSize: `${theme.typography.size.s2 - 1}px`,\n  padding: '0 7px',\n  fontWeight: theme.typography.weight.bold,\n  WebkitLineClamp: 1,\n\n  '> svg': {\n    width: 14,\n    height: 14,\n    flexShrink: 0,\n  },\n}));\n\nconst Text = styled.p({\n  display: '-webkit-box',\n  WebkitLineClamp: 1,\n  WebkitBoxOrient: 'vertical',\n  overflow: 'hidden',\n});\n"],"names":["MobileMenuDrawer","children","containerRef","useRef","sidebarRef","overlayRef","isMobileMenuOpen","setMobileMenuOpen","isMobileAboutOpen","setMobileAboutOpen","useLayout","React","Transition","MOBILE_TRANSITION_DURATION","state","Container","sidebarState","SidebarContainer","MobileAbout","Overlay","styled","theme","TRANSITION_DURATION","MobileAddonsDrawer","isMobilePanelOpen","useFullStoryName","index","useStorybookState","currentStory","useStorybookApi","fullStoryName","_a","node","_b","MobileNavigation","menu","panel","showPanel","setMobilePanelOpen","Button","MenuIcon","Text","IconButton","BottomBarToggleIcon"],"mappings":"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"}