{"version":3,"file":"Loader.stories-5e669c16.js","sources":["../../ui/components/src/components/shared/animation.ts","../../ui/components/src/components/Loader/Loader.tsx"],"sourcesContent":["import { keyframes } from '@storybook/theming';\n\nexport const rotate360 = keyframes`\n\tfrom {\n\t\ttransform: rotate(0deg);\n\t}\n\tto {\n\t\ttransform: rotate(360deg);\n\t}\n`;\n","import { transparentize } from 'polished';\nimport type { ComponentProps, FC } from 'react';\nimport React from 'react';\nimport { styled, keyframes } from '@storybook/theming';\nimport { Icons } from '../icon/icon';\nimport { rotate360 } from '../shared/animation';\n\nconst LoaderWrapper = styled.div<{ size?: number }>(({ size = 32 }) => ({\n  borderRadius: '50%',\n  cursor: 'progress',\n  display: 'inline-block',\n  overflow: 'hidden',\n  position: 'absolute',\n  transition: 'all 200ms ease-out',\n  verticalAlign: 'top',\n  top: '50%',\n  left: '50%',\n  marginTop: -(size / 2),\n  marginLeft: -(size / 2),\n  height: size,\n  width: size,\n  zIndex: 4,\n  borderWidth: 2,\n  borderStyle: 'solid',\n  borderColor: 'rgba(97, 97, 97, 0.29)',\n  borderTopColor: 'rgb(100,100,100)',\n  animation: `${rotate360} 0.7s linear infinite`,\n  mixBlendMode: 'difference',\n}));\n\nconst ProgressWrapper = styled.div({\n  position: 'absolute',\n  display: 'flex',\n  flexDirection: 'column',\n  justifyContent: 'center',\n  alignItems: 'center',\n  width: '100%',\n  height: '100%',\n});\n\nconst ProgressTrack = styled.div(({ theme }) => ({\n  position: 'relative',\n  width: '80%',\n  marginBottom: '0.75rem',\n  maxWidth: 300,\n  height: 5,\n  borderRadius: 5,\n  background: transparentize(0.8, theme.color.secondary),\n  overflow: 'hidden',\n  cursor: 'progress',\n}));\n\nconst ProgressBar = styled.div(({ theme }) => ({\n  position: 'absolute',\n  top: 0,\n  left: 0,\n  height: '100%',\n  background: theme.color.secondary,\n}));\n\nconst ProgressMessage = styled.div(({ theme }) => ({\n  minHeight: '2em',\n  fontSize: `${theme.typography.size.s1}px`,\n  color: theme.barTextColor,\n}));\n\nconst ErrorIcon = styled(Icons)(({ theme }) => ({\n  width: 20,\n  height: 20,\n  marginBottom: '0.5rem',\n  color: theme.textMutedColor,\n}));\n\nconst ellipsis = keyframes`\n  from { content: \"...\" }\n  33% { content: \".\" }\n  66% { content: \"..\" }\n  to { content: \"...\" }\n`;\n\nconst Ellipsis = styled.span({\n  '&::after': {\n    content: \"'...'\",\n    animation: `${ellipsis} 1s linear infinite`,\n    animationDelay: '1s',\n    display: 'inline-block',\n    width: '1em',\n    height: 'auto',\n  },\n});\n\ninterface Progress {\n  value: number;\n  message: string;\n  modules?: {\n    complete: number;\n    total: number;\n  };\n}\n\ninterface LoaderProps {\n  progress?: Progress;\n  error?: Error;\n  size?: number;\n}\n\nexport const Loader: FC<LoaderProps & ComponentProps<typeof ProgressWrapper>> = ({\n  progress,\n  error,\n  size,\n  ...props\n}) => {\n  if (error) {\n    return (\n      <ProgressWrapper aria-label={error.toString()} aria-live=\"polite\" role=\"status\" {...props}>\n        <ErrorIcon icon=\"lightningoff\" />\n        <ProgressMessage>{error.message}</ProgressMessage>\n      </ProgressWrapper>\n    );\n  }\n\n  if (progress) {\n    const { value, modules } = progress;\n    let { message } = progress;\n    if (modules) message += ` ${modules.complete} / ${modules.total} modules`;\n    return (\n      <ProgressWrapper\n        aria-label=\"Content is loading...\"\n        aria-live=\"polite\"\n        aria-valuemin={0}\n        aria-valuemax={100}\n        aria-valuenow={value * 100}\n        aria-valuetext={message}\n        role=\"progressbar\"\n        {...props}\n      >\n        <ProgressTrack>\n          <ProgressBar style={{ width: `${value * 100}%` }} />\n        </ProgressTrack>\n        <ProgressMessage>\n          {message}\n          {value < 1 && <Ellipsis key={message} />}\n        </ProgressMessage>\n      </ProgressWrapper>\n    );\n  }\n\n  return (\n    <LoaderWrapper\n      aria-label=\"Content is loading...\"\n      aria-live=\"polite\"\n      role=\"status\"\n      size={size}\n      {...props}\n    />\n  );\n};\n"],"names":["rotate360","keyframes","LoaderWrapper","styled","size","ProgressWrapper","ProgressTrack","theme","transparentize","ProgressBar","ProgressMessage","ErrorIcon","Icons","ellipsis","Ellipsis","Loader","progress","error","props","jsxs","jsx","value","modules","message"],"mappings":"6PAEO,MAAMA,EAAYC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,ECKzBC,EAAAC,EAAA,IAAA,CAAA,CAAA,KAAAC,EAAA,EAAA,KAAA,CAAwE,aAAA,MACxD,OAAA,WACN,QAAA,eACC,SAAA,SACC,SAAA,WACA,WAAA,qBACE,cAAA,MACG,IAAA,MACV,KAAA,MACC,UAAA,EAAAA,EAAA,GACc,WAAA,EAAAA,EAAA,GACC,OAAAA,EACb,MAAAA,EACD,OAAA,EACC,YAAA,EACK,YAAA,QACA,YAAA,yBACA,eAAA,mBACG,UAAA,GAAAJ,CAAA,wBACO,aAAA,YAEzB,EAAA,EAEAK,EAAAF,EAAA,IAAA,CAAmC,SAAA,WACvB,QAAA,OACD,cAAA,SACM,eAAA,SACC,WAAA,SACJ,MAAA,OACL,OAAA,MAET,CAAA,EAEAG,EAAAH,EAAA,IAAA,CAAA,CAAA,MAAAI,CAAA,KAAA,CAAiD,SAAA,WACrC,MAAA,MACH,aAAA,UACO,SAAA,IACJ,OAAA,EACF,aAAA,EACM,WAAAC,EAAA,GAAAD,EAAA,MAAA,SAAA,EACuC,SAAA,SAC3C,OAAA,UAEZ,EAAA,EAEAE,EAAAN,EAAA,IAAA,CAAA,CAAA,MAAAI,CAAA,KAAA,CAA+C,SAAA,WACnC,IAAA,EACL,KAAA,EACC,OAAA,OACE,WAAAA,EAAA,MAAA,SAEV,EAAA,EAEAG,EAAAP,EAAA,IAAA,CAAA,CAAA,MAAAI,CAAA,KAAA,CAAmD,UAAA,MACtC,SAAA,GAAAA,EAAA,WAAA,KAAA,EAAA,KAC0B,MAAAA,EAAA,YAEvC,EAAA,EAEAI,EAAAR,EAAAS,CAAA,EAAA,CAAA,CAAA,MAAAL,CAAA,KAAA,CAAgD,MAAA,GACvC,OAAA,GACC,aAAA,SACM,MAAAA,EAAA,cAEhB,EAAA,EAEAM,EAAAZ;AAAA;AAAA;AAAA;AAAA;AAAA,EAOAa,EAAAX,EAAA,KAAA,CAA6B,WAAA,CACf,QAAA,QACD,UAAA,GAAAU,CAAA,sBACa,eAAA,KACN,QAAA,eACP,MAAA,MACF,OAAA,MACC,CAEZ,CAAA,EAiBOE,EAAA,CAAA,CAA0E,SAAAC,EAC/E,MAAAC,EACA,KAAAb,EACA,GAAAc,CAEF,IAAA,CACE,GAAAD,EACE,OAAAE,EAAAd,EAAA,CAAA,aAAAY,EAAA,SAAA,EAAA,YAAA,SAAA,KAAA,SAAA,GAAAC,EAAA,SAAA,CAEIE,EAAAT,EAAA,CAAA,KAAA,cAAA,CAAA,EAA+BS,EAAAV,EAAA,CAAA,SAAAO,EAAA,OAAA,CAAA,CACC,CAAA,CAAA,EAKtC,GAAAD,EAAA,CACE,KAAA,CAAA,MAAAK,EAAA,QAAAC,CAAA,EAAAN,EACA,GAAA,CAAA,QAAAO,CAAA,EAAAP,EACA,OAAAM,IAAaC,GAAA,IAAAD,EAAA,QAAA,MAAAA,EAAA,KAAA,YACbH,EACEd,EAAC,CAAA,aAAA,wBACY,YAAA,SACD,gBAAA,EACK,gBAAA,IACA,gBAAAgB,EAAA,IACQ,iBAAAE,EACP,KAAA,cACX,GAAAL,EACD,SAAA,CAEJE,EAAAd,EAAA,CAAA,SAAAc,EAAAX,EAAA,CAAA,MAAA,CAAA,MAAA,GAAAY,EAAA,GAAA,GAAA,CAAA,CAAA,EAAA,EAEAF,EAAAT,EAAA,CAAA,SAAA,CAEGa,EAAAF,EAAA,GAAAD,EAAAN,EAAA,CAAA,EAAAS,CAAA,CACqC,EAAA,CACxC,CAAA,CAAA,CACF,CAIJ,OAAAH,EACElB,EAAC,CAAA,aAAA,wBACY,YAAA,SACD,KAAA,SACL,KAAAE,EACL,GAAAc,CACI,CAAA,CAGV;;;;;;;"}