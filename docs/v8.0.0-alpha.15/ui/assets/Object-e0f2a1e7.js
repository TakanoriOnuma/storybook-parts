import{c as ae}from"./cloneDeep-aaf9573b.js";import{R as r,r as p}from"./index-f1f2c4b1.js";import{n as S,u as re}from"./index-4b2a7d13.js";import{I as se,h as le,F as oe,B as ie}from"./index-a443495b.js";import{m as ue,E as de}from"./index-758f4e48.js";import{g as me,a as ce}from"./helpers-a9e07cde.js";const z="value",pe="key",ye="Error",ge="Object",fe="Array",he="String",Ee="Number",be="Boolean",Te="Date",ve="Null",Ve="Undefined",ke="Function",qe="Symbol",Z="ADD_DELTA_TYPE",ee="REMOVE_DELTA_TYPE",te="UPDATE_DELTA_TYPE";function P(i){return i!==null&&typeof i=="object"&&!Array.isArray(i)&&typeof i[Symbol.iterator]=="function"?"Iterable":Object.prototype.toString.call(i).slice(8,-1)}function ne(i,e){const t=P(i),a=P(e);return(t==="Function"||a==="Function")&&a!==t}class D extends p.Component{constructor(e){super(e),this.state={inputRefKey:null,inputRefValue:null},this.refInputValue=this.refInputValue.bind(this),this.refInputKey=this.refInputKey.bind(this),this.onKeydown=this.onKeydown.bind(this),this.onSubmit=this.onSubmit.bind(this)}componentDidMount(){const{inputRefKey:e,inputRefValue:t}=this.state,{onlyValue:a}=this.props;e&&typeof e.focus=="function"&&e.focus(),a&&t&&typeof t.focus=="function"&&t.focus(),document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.onSubmit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.props.handleCancel()))}onSubmit(){const{handleAdd:e,onlyValue:t,onSubmitValueParser:a,keyPath:n,deep:o}=this.props,{inputRefKey:s,inputRefValue:l}=this.state,d={};if(!t){if(!s.value)return;d.key=s.value}d.newValue=a(!1,n,o,d.key,l.value),e(d)}refInputKey(e){this.state.inputRefKey=e}refInputValue(e){this.state.inputRefValue=e}render(){const{handleCancel:e,onlyValue:t,addButtonElement:a,cancelButtonElement:n,inputElementGenerator:o,keyPath:s,deep:l}=this.props,d=p.cloneElement(a,{onClick:this.onSubmit}),u=p.cloneElement(n,{onClick:e}),m=o(z,s,l),c=p.cloneElement(m,{placeholder:"Value",ref:this.refInputValue});let E=null;if(!t){const g=o(pe,s,l);E=p.cloneElement(g,{placeholder:"Key",ref:this.refInputKey})}return r.createElement("span",{className:"rejt-add-value-node"},E,c,u,d)}}D.defaultProps={onlyValue:!1,addButtonElement:r.createElement("button",null,"+"),cancelButtonElement:r.createElement("button",null,"c")};class W extends p.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={data:e.data,name:e.name,keyPath:t,deep:e.deep,nextDeep:e.deep+1,collapsed:e.isCollapsed(t,e.deep,e.data),addFormVisible:!1},this.handleCollapseMode=this.handleCollapseMode.bind(this),this.handleRemoveItem=this.handleRemoveItem.bind(this),this.handleAddMode=this.handleAddMode.bind(this),this.handleAddValueAdd=this.handleAddValueAdd.bind(this),this.handleAddValueCancel=this.handleAddValueCancel.bind(this),this.handleEditValue=this.handleEditValue.bind(this),this.onChildUpdate=this.onChildUpdate.bind(this),this.renderCollapsed=this.renderCollapsed.bind(this),this.renderNotCollapsed=this.renderNotCollapsed.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}onChildUpdate(e,t){const{data:a,keyPath:n}=this.state;a[e]=t,this.setState({data:a});const{onUpdate:o}=this.props,s=n.length;o(n[s-1],a)}handleAddMode(){this.setState({addFormVisible:!0})}handleCollapseMode(){this.setState(e=>({collapsed:!e.collapsed}))}handleRemoveItem(e){return()=>{const{beforeRemoveAction:t,logger:a}=this.props,{data:n,keyPath:o,nextDeep:s}=this.state,l=n[e];t(e,o,s,l).then(()=>{const d={keyPath:o,deep:s,key:e,oldValue:l,type:ee};n.splice(e,1),this.setState({data:n});const{onUpdate:u,onDeltaUpdate:m}=this.props;u(o[o.length-1],n),m(d)}).catch(a.error)}}handleAddValueAdd({newValue:e}){const{data:t,keyPath:a,nextDeep:n}=this.state,{beforeAddAction:o,logger:s}=this.props;o(t.length,a,n,e).then(()=>{const l=[...t,e];this.setState({data:l}),this.handleAddValueCancel();const{onUpdate:d,onDeltaUpdate:u}=this.props;d(a[a.length-1],l),u({type:Z,keyPath:a,deep:n,key:l.length-1,newValue:e})}).catch(s.error)}handleAddValueCancel(){this.setState({addFormVisible:!1})}handleEditValue({key:e,value:t}){return new Promise((a,n)=>{const{beforeUpdateAction:o}=this.props,{data:s,keyPath:l,nextDeep:d}=this.state,u=s[e];o(e,l,d,u,t).then(()=>{s[e]=t,this.setState({data:s});const{onUpdate:m,onDeltaUpdate:c}=this.props;m(l[l.length-1],s),c({type:te,keyPath:l,deep:d,key:e,newValue:t,oldValue:u}),a(void 0)}).catch(n)})}renderCollapsed(){const{name:e,data:t,keyPath:a,deep:n}=this.state,{handleRemove:o,readOnly:s,getStyle:l,dataType:d,minusMenuElement:u}=this.props,{minus:m,collapsed:c}=l(e,t,a,n,d),E=s(e,t,a,n,d),g=p.cloneElement(u,{onClick:o,className:"rejt-minus-menu",style:m});return r.createElement("span",{className:"rejt-collapsed"},r.createElement("span",{className:"rejt-collapsed-text",style:c,onClick:this.handleCollapseMode},"[...] ",t.length," ",t.length===1?"item":"items"),!E&&g)}renderNotCollapsed(){const{name:e,data:t,keyPath:a,deep:n,addFormVisible:o,nextDeep:s}=this.state,{isCollapsed:l,handleRemove:d,onDeltaUpdate:u,readOnly:m,getStyle:c,dataType:E,addButtonElement:g,cancelButtonElement:h,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:V,plusMenuElement:k,beforeRemoveAction:q,beforeAddAction:C,beforeUpdateAction:T,logger:v,onSubmitValueParser:R}=this.props,{minus:w,plus:I,delimiter:x,ul:K,addForm:B}=c(e,t,a,n,E),M=m(e,t,a,n,E),N=p.cloneElement(k,{onClick:this.handleAddMode,className:"rejt-plus-menu",style:I}),F=p.cloneElement(V,{onClick:d,className:"rejt-minus-menu",style:w}),L=!0,_="[",G="]";return r.createElement("span",{className:"rejt-not-collapsed"},r.createElement("span",{className:"rejt-not-collapsed-delimiter",style:x},_),!o&&N,r.createElement("ul",{className:"rejt-not-collapsed-list",style:K},t.map((J,j)=>r.createElement(U,{key:j,name:j.toString(),data:J,keyPath:a,deep:s,isCollapsed:l,handleRemove:this.handleRemoveItem(j),handleUpdateValue:this.handleEditValue,onUpdate:this.onChildUpdate,onDeltaUpdate:u,readOnly:m,getStyle:c,addButtonElement:g,cancelButtonElement:h,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:V,plusMenuElement:k,beforeRemoveAction:q,beforeAddAction:C,beforeUpdateAction:T,logger:v,onSubmitValueParser:R}))),!M&&o&&r.createElement("div",{className:"rejt-add-form",style:B},r.createElement(D,{handleAdd:this.handleAddValueAdd,handleCancel:this.handleAddValueCancel,onlyValue:L,addButtonElement:g,cancelButtonElement:h,inputElementGenerator:y,keyPath:a,deep:n,onSubmitValueParser:R})),r.createElement("span",{className:"rejt-not-collapsed-delimiter",style:x},G),!M&&F)}render(){const{name:e,collapsed:t,data:a,keyPath:n,deep:o}=this.state,{dataType:s,getStyle:l}=this.props,d=t?this.renderCollapsed():this.renderNotCollapsed(),u=l(e,a,n,o,s);return r.createElement("div",{className:"rejt-array-node"},r.createElement("span",{onClick:this.handleCollapseMode},r.createElement("span",{className:"rejt-name",style:u.name},e," :"," ")),d)}}W.defaultProps={keyPath:[],deep:0,minusMenuElement:r.createElement("span",null," - "),plusMenuElement:r.createElement("span",null," + ")};class H extends p.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={value:e.value,name:e.name,keyPath:t,deep:e.deep,editEnabled:!1,inputRef:null},this.handleEditMode=this.handleEditMode.bind(this),this.refInput=this.refInput.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onKeydown=this.onKeydown.bind(this)}static getDerivedStateFromProps(e,t){return e.value!==t.value?{value:e.value}:null}componentDidUpdate(){const{editEnabled:e,inputRef:t,name:a,value:n,keyPath:o,deep:s}=this.state,{readOnly:l,dataType:d}=this.props,u=l(a,n,o,s,d);e&&!u&&typeof t.focus=="function"&&t.focus()}componentDidMount(){document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.handleEdit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.handleCancelEdit()))}handleEdit(){const{handleUpdateValue:e,originalValue:t,logger:a,onSubmitValueParser:n,keyPath:o}=this.props,{inputRef:s,name:l,deep:d}=this.state;if(!s)return;const u=n(!0,o,d,l,s.value);e({value:u,key:l}).then(()=>{ne(t,u)||this.handleCancelEdit()}).catch(a.error)}handleEditMode(){this.setState({editEnabled:!0})}refInput(e){this.state.inputRef=e}handleCancelEdit(){this.setState({editEnabled:!1})}render(){const{name:e,value:t,editEnabled:a,keyPath:n,deep:o}=this.state,{handleRemove:s,originalValue:l,readOnly:d,dataType:u,getStyle:m,editButtonElement:c,cancelButtonElement:E,textareaElementGenerator:g,minusMenuElement:h,keyPath:b}=this.props,y=m(e,l,n,o,u);let f=null,V=null;const k=d(e,l,n,o,u);if(a&&!k){const q=g(z,b,o,e,l,u),C=p.cloneElement(c,{onClick:this.handleEdit}),T=p.cloneElement(E,{onClick:this.handleCancelEdit}),v=p.cloneElement(q,{ref:this.refInput,defaultValue:l});f=r.createElement("span",{className:"rejt-edit-form",style:y.editForm},v," ",T,C),V=null}else{f=r.createElement("span",{className:"rejt-value",style:y.value,onClick:k?null:this.handleEditMode},t);const q=p.cloneElement(h,{onClick:s,className:"rejt-minus-menu",style:y.minus});V=k?null:q}return r.createElement("li",{className:"rejt-function-value-node",style:y.li},r.createElement("span",{className:"rejt-name",style:y.name},e," :"," "),f,V)}}H.defaultProps={keyPath:[],deep:0,handleUpdateValue:()=>{},editButtonElement:r.createElement("button",null,"e"),cancelButtonElement:r.createElement("button",null,"c"),minusMenuElement:r.createElement("span",null," - ")};class U extends p.Component{constructor(e){super(e),this.state={data:e.data,name:e.name,keyPath:e.keyPath,deep:e.deep}}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}render(){const{data:e,name:t,keyPath:a,deep:n}=this.state,{isCollapsed:o,handleRemove:s,handleUpdateValue:l,onUpdate:d,onDeltaUpdate:u,readOnly:m,getStyle:c,addButtonElement:E,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:V,beforeRemoveAction:k,beforeAddAction:q,beforeUpdateAction:C,logger:T,onSubmitValueParser:v}=this.props,R=()=>!0,w=P(e);switch(w){case ye:return r.createElement(O,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:s,onUpdate:d,onDeltaUpdate:u,readOnly:R,dataType:w,getStyle:c,addButtonElement:E,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:V,beforeRemoveAction:k,beforeAddAction:q,beforeUpdateAction:C,logger:T,onSubmitValueParser:v});case ge:return r.createElement(O,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:s,onUpdate:d,onDeltaUpdate:u,readOnly:m,dataType:w,getStyle:c,addButtonElement:E,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:V,beforeRemoveAction:k,beforeAddAction:q,beforeUpdateAction:C,logger:T,onSubmitValueParser:v});case fe:return r.createElement(W,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:s,onUpdate:d,onDeltaUpdate:u,readOnly:m,dataType:w,getStyle:c,addButtonElement:E,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:V,beforeRemoveAction:k,beforeAddAction:q,beforeUpdateAction:C,logger:T,onSubmitValueParser:v});case he:return r.createElement(A,{name:t,value:`"${e}"`,originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case Ee:return r.createElement(A,{name:t,value:e,originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case be:return r.createElement(A,{name:t,value:e?"true":"false",originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case Te:return r.createElement(A,{name:t,value:e.toISOString(),originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:R,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case ve:return r.createElement(A,{name:t,value:"null",originalValue:"null",keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case Ve:return r.createElement(A,{name:t,value:"undefined",originalValue:"undefined",keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});case ke:return r.createElement(H,{name:t,value:e.toString(),originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:m,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,textareaElementGenerator:y,minusMenuElement:f,logger:T,onSubmitValueParser:v});case qe:return r.createElement(A,{name:t,value:e.toString(),originalValue:e,keyPath:a,deep:n,handleRemove:s,handleUpdateValue:l,readOnly:R,dataType:w,getStyle:c,cancelButtonElement:g,editButtonElement:h,inputElementGenerator:b,minusMenuElement:f,logger:T,onSubmitValueParser:v});default:return null}}}U.defaultProps={keyPath:[],deep:0};class O extends p.Component{constructor(e){super(e);const t=e.deep===-1?[]:[...e.keyPath,e.name];this.state={name:e.name,data:e.data,keyPath:t,deep:e.deep,nextDeep:e.deep+1,collapsed:e.isCollapsed(t,e.deep,e.data),addFormVisible:!1},this.handleCollapseMode=this.handleCollapseMode.bind(this),this.handleRemoveValue=this.handleRemoveValue.bind(this),this.handleAddMode=this.handleAddMode.bind(this),this.handleAddValueAdd=this.handleAddValueAdd.bind(this),this.handleAddValueCancel=this.handleAddValueCancel.bind(this),this.handleEditValue=this.handleEditValue.bind(this),this.onChildUpdate=this.onChildUpdate.bind(this),this.renderCollapsed=this.renderCollapsed.bind(this),this.renderNotCollapsed=this.renderNotCollapsed.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}onChildUpdate(e,t){const{data:a,keyPath:n}=this.state;a[e]=t,this.setState({data:a});const{onUpdate:o}=this.props,s=n.length;o(n[s-1],a)}handleAddMode(){this.setState({addFormVisible:!0})}handleAddValueCancel(){this.setState({addFormVisible:!1})}handleAddValueAdd({key:e,newValue:t}){const{data:a,keyPath:n,nextDeep:o}=this.state,{beforeAddAction:s,logger:l}=this.props;s(e,n,o,t).then(()=>{a[e]=t,this.setState({data:a}),this.handleAddValueCancel();const{onUpdate:d,onDeltaUpdate:u}=this.props;d(n[n.length-1],a),u({type:Z,keyPath:n,deep:o,key:e,newValue:t})}).catch(l.error)}handleRemoveValue(e){return()=>{const{beforeRemoveAction:t,logger:a}=this.props,{data:n,keyPath:o,nextDeep:s}=this.state,l=n[e];t(e,o,s,l).then(()=>{const d={keyPath:o,deep:s,key:e,oldValue:l,type:ee};delete n[e],this.setState({data:n});const{onUpdate:u,onDeltaUpdate:m}=this.props;u(o[o.length-1],n),m(d)}).catch(a.error)}}handleCollapseMode(){this.setState(e=>({collapsed:!e.collapsed}))}handleEditValue({key:e,value:t}){return new Promise((a,n)=>{const{beforeUpdateAction:o}=this.props,{data:s,keyPath:l,nextDeep:d}=this.state,u=s[e];o(e,l,d,u,t).then(()=>{s[e]=t,this.setState({data:s});const{onUpdate:m,onDeltaUpdate:c}=this.props;m(l[l.length-1],s),c({type:te,keyPath:l,deep:d,key:e,newValue:t,oldValue:u}),a()}).catch(n)})}renderCollapsed(){const{name:e,keyPath:t,deep:a,data:n}=this.state,{handleRemove:o,readOnly:s,dataType:l,getStyle:d,minusMenuElement:u}=this.props,{minus:m,collapsed:c}=d(e,n,t,a,l),E=Object.getOwnPropertyNames(n),g=s(e,n,t,a,l),h=p.cloneElement(u,{onClick:o,className:"rejt-minus-menu",style:m});return r.createElement("span",{className:"rejt-collapsed"},r.createElement("span",{className:"rejt-collapsed-text",style:c,onClick:this.handleCollapseMode},"{...}"," ",E.length," ",E.length===1?"key":"keys"),!g&&h)}renderNotCollapsed(){const{name:e,data:t,keyPath:a,deep:n,nextDeep:o,addFormVisible:s}=this.state,{isCollapsed:l,handleRemove:d,onDeltaUpdate:u,readOnly:m,getStyle:c,dataType:E,addButtonElement:g,cancelButtonElement:h,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:V,plusMenuElement:k,beforeRemoveAction:q,beforeAddAction:C,beforeUpdateAction:T,logger:v,onSubmitValueParser:R}=this.props,{minus:w,plus:I,addForm:x,ul:K,delimiter:B}=c(e,t,a,n,E),M=Object.getOwnPropertyNames(t),N=m(e,t,a,n,E),F=p.cloneElement(k,{onClick:this.handleAddMode,className:"rejt-plus-menu",style:I}),L=p.cloneElement(V,{onClick:d,className:"rejt-minus-menu",style:w}),_=M.map(j=>r.createElement(U,{key:j,name:j,data:t[j],keyPath:a,deep:o,isCollapsed:l,handleRemove:this.handleRemoveValue(j),handleUpdateValue:this.handleEditValue,onUpdate:this.onChildUpdate,onDeltaUpdate:u,readOnly:m,getStyle:c,addButtonElement:g,cancelButtonElement:h,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:V,plusMenuElement:k,beforeRemoveAction:q,beforeAddAction:C,beforeUpdateAction:T,logger:v,onSubmitValueParser:R})),G="{",J="}";return r.createElement("span",{className:"rejt-not-collapsed"},r.createElement("span",{className:"rejt-not-collapsed-delimiter",style:B},G),!N&&F,r.createElement("ul",{className:"rejt-not-collapsed-list",style:K},_),!N&&s&&r.createElement("div",{className:"rejt-add-form",style:x},r.createElement(D,{handleAdd:this.handleAddValueAdd,handleCancel:this.handleAddValueCancel,addButtonElement:g,cancelButtonElement:h,inputElementGenerator:y,keyPath:a,deep:n,onSubmitValueParser:R})),r.createElement("span",{className:"rejt-not-collapsed-delimiter",style:B},J),!N&&L)}render(){const{name:e,collapsed:t,data:a,keyPath:n,deep:o}=this.state,{getStyle:s,dataType:l}=this.props,d=t?this.renderCollapsed():this.renderNotCollapsed(),u=s(e,a,n,o,l);return r.createElement("div",{className:"rejt-object-node"},r.createElement("span",{onClick:this.handleCollapseMode},r.createElement("span",{className:"rejt-name",style:u.name},e," :"," ")),d)}}O.defaultProps={keyPath:[],deep:0,minusMenuElement:r.createElement("span",null," - "),plusMenuElement:r.createElement("span",null," + ")};class A extends p.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={value:e.value,name:e.name,keyPath:t,deep:e.deep,editEnabled:!1,inputRef:null},this.handleEditMode=this.handleEditMode.bind(this),this.refInput=this.refInput.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onKeydown=this.onKeydown.bind(this)}static getDerivedStateFromProps(e,t){return e.value!==t.value?{value:e.value}:null}componentDidUpdate(){const{editEnabled:e,inputRef:t,name:a,value:n,keyPath:o,deep:s}=this.state,{readOnly:l,dataType:d}=this.props,u=l(a,n,o,s,d);e&&!u&&typeof t.focus=="function"&&t.focus()}componentDidMount(){document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.handleEdit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.handleCancelEdit()))}handleEdit(){const{handleUpdateValue:e,originalValue:t,logger:a,onSubmitValueParser:n,keyPath:o}=this.props,{inputRef:s,name:l,deep:d}=this.state;if(!s)return;const u=n(!0,o,d,l,s.value);e({value:u,key:l}).then(()=>{ne(t,u)||this.handleCancelEdit()}).catch(a.error)}handleEditMode(){this.setState({editEnabled:!0})}refInput(e){this.state.inputRef=e}handleCancelEdit(){this.setState({editEnabled:!1})}render(){const{name:e,value:t,editEnabled:a,keyPath:n,deep:o}=this.state,{handleRemove:s,originalValue:l,readOnly:d,dataType:u,getStyle:m,editButtonElement:c,cancelButtonElement:E,inputElementGenerator:g,minusMenuElement:h,keyPath:b}=this.props,y=m(e,l,n,o,u),f=d(e,l,n,o,u),V=a&&!f,k=g(z,b,o,e,l,u),q=p.cloneElement(c,{onClick:this.handleEdit}),C=p.cloneElement(E,{onClick:this.handleCancelEdit}),T=p.cloneElement(k,{ref:this.refInput,defaultValue:JSON.stringify(l)}),v=p.cloneElement(h,{onClick:s,className:"rejt-minus-menu",style:y.minus});return r.createElement("li",{className:"rejt-value-node",style:y.li},r.createElement("span",{className:"rejt-name",style:y.name},e," : "),V?r.createElement("span",{className:"rejt-edit-form",style:y.editForm},T," ",C,q):r.createElement("span",{className:"rejt-value",style:y.value,onClick:f?null:this.handleEditMode},String(t)),!f&&!V&&v)}}A.defaultProps={keyPath:[],deep:0,handleUpdateValue:()=>Promise.resolve(),editButtonElement:r.createElement("button",null,"e"),cancelButtonElement:r.createElement("button",null,"c"),minusMenuElement:r.createElement("span",null," - ")};D.__docgenInfo={description:"",methods:[{name:"onKeydown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"KeyboardEvent",alias:"KeyboardEvent"}}],returns:null},{name:"onSubmit",docblock:null,modifiers:[],params:[],returns:null},{name:"refInputKey",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"any"}}],returns:null},{name:"refInputValue",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"any"}}],returns:null}],displayName:"JsonAddValue",props:{handleAdd:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},handleCancel:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onlyValue:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},addButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>+</button>",computed:!1}},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>c</button>",computed:!1}},inputElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},deep:{required:!1,tsType:{name:"number"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};W.__docgenInfo={description:"",methods:[{name:"onChildUpdate",docblock:null,modifiers:[],params:[{name:"childKey",optional:!1,type:{name:"string"}},{name:"childData",optional:!1,type:{name:"any"}}],returns:null},{name:"handleAddMode",docblock:null,modifiers:[],params:[],returns:null},{name:"handleCollapseMode",docblock:null,modifiers:[],params:[],returns:null},{name:"handleRemoveItem",docblock:null,modifiers:[],params:[{name:"index",optional:!1,type:{name:"number"}}],returns:null},{name:"handleAddValueAdd",docblock:null,modifiers:[],params:[{name:"{ newValue }: any",optional:!1,type:{name:"any"}}],returns:null},{name:"handleAddValueCancel",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditValue",docblock:null,modifiers:[],params:[{name:"{ key, value }: any",optional:!1,type:{name:"any"}}],returns:null},{name:"renderCollapsed",docblock:null,modifiers:[],params:[],returns:null},{name:"renderNotCollapsed",docblock:null,modifiers:[],params:[],returns:null}],displayName:"JsonArray",props:{data:{required:!0,tsType:{name:"Array",elements:[{name:"any"}],raw:"any[]"},description:""},name:{required:!0,tsType:{name:"string"},description:""},isCollapsed:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},deep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},handleRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onDeltaUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},readOnly:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},dataType:{required:!1,tsType:{name:"string"},description:""},getStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},addButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},inputElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},textareaElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> - </span>",computed:!1}},plusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> + </span>",computed:!1}},beforeRemoveAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeAddAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeUpdateAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},logger:{required:!0,tsType:{name:"any"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};H.__docgenInfo={description:"",methods:[{name:"onKeydown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"KeyboardEvent",alias:"KeyboardEvent"}}],returns:null},{name:"handleEdit",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditMode",docblock:null,modifiers:[],params:[],returns:null},{name:"refInput",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"any"}}],returns:null},{name:"handleCancelEdit",docblock:null,modifiers:[],params:[],returns:null}],displayName:"JsonFunctionValue",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"any"},description:""},originalValue:{required:!1,tsType:{name:"any"},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},deep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},handleRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},handleUpdateValue:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},readOnly:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},dataType:{required:!1,tsType:{name:"string"},description:""},getStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>e</button>",computed:!1}},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>c</button>",computed:!1}},textareaElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> - </span>",computed:!1}},logger:{required:!0,tsType:{name:"any"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};U.__docgenInfo={description:"",methods:[],displayName:"JsonNode",props:{name:{required:!0,tsType:{name:"string"},description:""},data:{required:!1,tsType:{name:"any"},description:""},isCollapsed:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},deep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},handleRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},handleUpdateValue:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onDeltaUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},readOnly:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},getStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},addButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},inputElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},textareaElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:""},plusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:""},beforeRemoveAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeAddAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeUpdateAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},logger:{required:!0,tsType:{name:"object"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};O.__docgenInfo={description:"",methods:[{name:"onChildUpdate",docblock:null,modifiers:[],params:[{name:"childKey",optional:!1,type:{name:"string"}},{name:"childData",optional:!1,type:{name:"any"}}],returns:null},{name:"handleAddMode",docblock:null,modifiers:[],params:[],returns:null},{name:"handleAddValueCancel",docblock:null,modifiers:[],params:[],returns:null},{name:"handleAddValueAdd",docblock:null,modifiers:[],params:[{name:"{ key, newValue }: any",optional:!1,type:{name:"any"}}],returns:null},{name:"handleRemoveValue",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:{name:"string"}}],returns:null},{name:"handleCollapseMode",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditValue",docblock:null,modifiers:[],params:[{name:"{ key, value }: any",optional:!1,type:{name:"any"}}],returns:null},{name:"renderCollapsed",docblock:null,modifiers:[],params:[],returns:null},{name:"renderNotCollapsed",docblock:null,modifiers:[],params:[],returns:null}],displayName:"JsonObject",props:{data:{required:!0,tsType:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},description:""},name:{required:!0,tsType:{name:"string"},description:""},isCollapsed:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},deep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},handleRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},onDeltaUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},readOnly:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},dataType:{required:!1,tsType:{name:"string"},description:""},getStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},addButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},inputElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},textareaElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> - </span>",computed:!1}},plusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> + </span>",computed:!1}},beforeRemoveAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeAddAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},beforeUpdateAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},logger:{required:!0,tsType:{name:"any"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};A.__docgenInfo={description:"",methods:[{name:"onKeydown",docblock:null,modifiers:[],params:[{name:"event",optional:!1,type:{name:"KeyboardEvent",alias:"KeyboardEvent"}}],returns:null},{name:"handleEdit",docblock:null,modifiers:[],params:[],returns:null},{name:"handleEditMode",docblock:null,modifiers:[],params:[],returns:null},{name:"refInput",docblock:null,modifiers:[],params:[{name:"node",optional:!1,type:{name:"any"}}],returns:null},{name:"handleCancelEdit",docblock:null,modifiers:[],params:[],returns:null}],displayName:"JsonValue",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!0,tsType:{name:"any"},description:""},originalValue:{required:!1,tsType:{name:"any"},description:""},keyPath:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},deep:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"0",computed:!1}},handleRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},handleUpdateValue:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"() => Promise.resolve()",computed:!1}},readOnly:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},dataType:{required:!1,tsType:{name:"string"},description:""},getStyle:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>e</button>",computed:!1}},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<button>c</button>",computed:!1}},inputElementGenerator:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"<span> - </span>",computed:!1}},logger:{required:!0,tsType:{name:"any"},description:""},onSubmitValueParser:{required:!0,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:""}}};const we={minus:{color:"red"},plus:{color:"green"},collapsed:{color:"grey"},delimiter:{},ul:{padding:"0px",margin:"0 0 0 25px",listStyle:"none"},name:{color:"#2287CD"},addForm:{}},Ce={minus:{color:"red"},plus:{color:"green"},collapsed:{color:"grey"},delimiter:{},ul:{padding:"0px",margin:"0 0 0 25px",listStyle:"none"},name:{color:"#2287CD"},addForm:{}},Re={minus:{color:"red"},editForm:{},value:{color:"#7bba3d"},li:{minHeight:"22px",lineHeight:"22px",outline:"0px"},name:{color:"#2287CD"}};function Ae(i){let e=i;if(e.indexOf("function")===0)return(0,eval)(`(${e})`);try{e=JSON.parse(i)}catch{}return e}class $ extends p.Component{constructor(e){super(e),this.state={data:e.data,rootName:e.rootName},this.onUpdate=this.onUpdate.bind(this),this.removeRoot=this.removeRoot.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data||e.rootName!==t.rootName?{data:e.data,rootName:e.rootName}:null}onUpdate(e,t){this.setState({data:t}),this.props.onFullyUpdate(t)}removeRoot(){this.onUpdate(null,null)}render(){const{data:e,rootName:t}=this.state,{isCollapsed:a,onDeltaUpdate:n,readOnly:o,getStyle:s,addButtonElement:l,cancelButtonElement:d,editButtonElement:u,inputElement:m,textareaElement:c,minusMenuElement:E,plusMenuElement:g,beforeRemoveAction:h,beforeAddAction:b,beforeUpdateAction:y,logger:f,onSubmitValueParser:V,fallback:k=null}=this.props,q=P(e);let C=o;P(o)==="Boolean"&&(C=()=>o);let T=m;m&&P(m)!=="Function"&&(T=()=>m);let v=c;return c&&P(c)!=="Function"&&(v=()=>c),q==="Object"||q==="Array"?r.createElement("div",{className:"rejt-tree"},r.createElement(U,{data:e,name:t,deep:-1,isCollapsed:a,onUpdate:this.onUpdate,onDeltaUpdate:n,readOnly:C,getStyle:s,addButtonElement:l,cancelButtonElement:d,editButtonElement:u,inputElementGenerator:T,textareaElementGenerator:v,minusMenuElement:E,plusMenuElement:g,handleRemove:this.removeRoot,beforeRemoveAction:h,beforeAddAction:b,beforeUpdateAction:y,logger:f,onSubmitValueParser:V})):k}}$.defaultProps={rootName:"root",isCollapsed:(i,e)=>e!==-1,getStyle:(i,e,t,a,n)=>{switch(n){case"Object":case"Error":return we;case"Array":return Ce;default:return Re}},readOnly:()=>!1,onFullyUpdate:()=>{},onDeltaUpdate:()=>{},beforeRemoveAction:()=>Promise.resolve(),beforeAddAction:()=>Promise.resolve(),beforeUpdateAction:()=>Promise.resolve(),logger:{error:()=>{}},onSubmitValueParser:(i,e,t,a,n)=>Ae(n),inputElement:()=>r.createElement("input",null),textareaElement:()=>r.createElement("textarea",null),fallback:null};$.__docgenInfo={description:"",methods:[{name:"onUpdate",docblock:null,modifiers:[],params:[{name:"key",optional:!1,type:{name:"string"}},{name:"data",optional:!1,type:{name:"any"}}],returns:null},{name:"removeRoot",docblock:null,modifiers:[],params:[],returns:null}],displayName:"JsonTree",props:{data:{required:!0,tsType:{name:"any"},description:""},rootName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'root'",computed:!1}},isCollapsed:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"(keyPath, deep) => deep !== -1",computed:!1}},onFullyUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},onDeltaUpdate:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"() => {}",computed:!1}},readOnly:{required:!1,tsType:{name:"union",raw:"boolean | ((...args: any) => any)",elements:[{name:"boolean"},{name:"unknown"}]},description:"",defaultValue:{value:"() => false",computed:!1}},getStyle:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:`(keyName, data, keyPath, deep, dataType) => {
  switch (dataType) {
    case 'Object':
    case 'Error':
      return object;
    case 'Array':
      return array;
    default:
      return value;
  }
}`,computed:!1}},addButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},cancelButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},editButtonElement:{required:!1,tsType:{name:"ReactElement"},description:""},inputElement:{required:!1,tsType:{name:"union",raw:"ReactElement | ((...args: any) => ReactElement)",elements:[{name:"ReactElement"},{name:"unknown"}]},description:"",defaultValue:{value:"() => <input />",computed:!1}},textareaElement:{required:!1,tsType:{name:"union",raw:"ReactElement | ((...args: any) => ReactElement)",elements:[{name:"ReactElement"},{name:"unknown"}]},description:"",defaultValue:{value:"() => <textarea />",computed:!1}},minusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:""},plusMenuElement:{required:!1,tsType:{name:"ReactElement"},description:""},fallback:{required:!1,tsType:{name:"ReactElement"},description:"",defaultValue:{value:"null",computed:!1}},beforeRemoveAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => Promise<any>",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}}},description:"",defaultValue:{value:"() => Promise.resolve()",computed:!1}},beforeAddAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => Promise<any>",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"Promise",elements:[{name:"any"}],raw:"Promise<any>"}}},description:"",defaultValue:{value:"() => Promise.resolve()",computed:!1}},beforeUpdateAction:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"() => Promise.resolve()",computed:!1}},logger:{required:!1,tsType:{name:"object"},description:"",defaultValue:{value:"{ error: () => {} }",computed:!1}},onSubmitValueParser:{required:!1,tsType:{name:"signature",type:"function",raw:"(...args: any) => any",signature:{arguments:[{type:{name:"any"},name:"args",rest:!0}],return:{name:"any"}}},description:"",defaultValue:{value:"(isEditMode, keyPath, deep, name, rawValue) => parse(rawValue)",computed:!1}}}};const{global:je}=__STORYBOOK_MODULE_GLOBAL__,{window:Pe}=je,Se=S.div(({theme:i})=>({position:"relative",display:"flex",".rejt-tree":{marginLeft:"1rem",fontSize:"13px"},".rejt-value-node, .rejt-object-node > .rejt-collapsed, .rejt-array-node > .rejt-collapsed, .rejt-object-node > .rejt-not-collapsed, .rejt-array-node > .rejt-not-collapsed":{"& > svg":{opacity:0,transition:"opacity 0.2s"}},".rejt-value-node:hover, .rejt-object-node:hover > .rejt-collapsed, .rejt-array-node:hover > .rejt-collapsed, .rejt-object-node:hover > .rejt-not-collapsed, .rejt-array-node:hover > .rejt-not-collapsed":{"& > svg":{opacity:1}},".rejt-edit-form button":{display:"none"},".rejt-add-form":{marginLeft:10},".rejt-add-value-node":{display:"inline-flex",alignItems:"center"},".rejt-name":{lineHeight:"22px"},".rejt-not-collapsed-delimiter":{lineHeight:"22px"},".rejt-plus-menu":{marginLeft:5},".rejt-object-node > span > *, .rejt-array-node > span > *":{position:"relative",zIndex:2},".rejt-object-node, .rejt-array-node":{position:"relative"},".rejt-object-node > span:first-of-type::after, .rejt-array-node > span:first-of-type::after, .rejt-collapsed::before, .rejt-not-collapsed::before":{content:'""',position:"absolute",top:0,display:"block",width:"100%",marginLeft:"-1rem",padding:"0 4px 0 1rem",height:22},".rejt-collapsed::before, .rejt-not-collapsed::before":{zIndex:1,background:"transparent",borderRadius:4,transition:"background 0.2s",pointerEvents:"none",opacity:.1},".rejt-object-node:hover, .rejt-array-node:hover":{"& > .rejt-collapsed::before, & > .rejt-not-collapsed::before":{background:i.color.secondary}},".rejt-collapsed::after, .rejt-not-collapsed::after":{content:'""',position:"absolute",display:"inline-block",pointerEvents:"none",width:0,height:0},".rejt-collapsed::after":{left:-8,top:8,borderTop:"3px solid transparent",borderBottom:"3px solid transparent",borderLeft:"3px solid rgba(153,153,153,0.6)"},".rejt-not-collapsed::after":{left:-10,top:10,borderTop:"3px solid rgba(153,153,153,0.6)",borderLeft:"3px solid transparent",borderRight:"3px solid transparent"},".rejt-value":{display:"inline-block",border:"1px solid transparent",borderRadius:4,margin:"1px 0",padding:"0 4px",cursor:"text",color:i.color.defaultText},".rejt-value-node:hover > .rejt-value":{background:i.color.lighter,borderColor:i.appBorderColor}})),Y=S.button(({theme:i,primary:e})=>({border:0,height:20,margin:1,borderRadius:4,background:e?i.color.secondary:"transparent",color:e?i.color.lightest:i.color.dark,fontWeight:e?"bold":"normal",cursor:"pointer",order:e?"initial":9})),Q=S(se)(({theme:i,icon:e,disabled:t})=>({display:"inline-block",verticalAlign:"middle",width:15,height:15,padding:3,marginLeft:5,cursor:t?"not-allowed":"pointer",color:i.textMutedColor,"&:hover":t?{}:{color:e==="subtract"?i.color.negative:i.color.ancillary},"svg + &":{marginLeft:0}})),X=S.input(({theme:i,placeholder:e})=>({outline:0,margin:e?1:"1px 0",padding:"3px 4px",color:i.color.defaultText,background:i.background.app,border:`1px solid ${i.appBorderColor}`,borderRadius:4,lineHeight:"14px",width:e==="Key"?80:120,"&:focus":{border:`1px solid ${i.color.secondary}`}})),Ne=S(le)(({theme:i})=>({position:"absolute",zIndex:2,top:2,right:2,height:21,padding:"0 3px",background:i.background.bar,border:`1px solid ${i.appBorderColor}`,borderRadius:3,color:i.textMutedColor,fontSize:"9px",fontWeight:"bold",textDecoration:"none",span:{marginLeft:3,marginTop:1}})),Ue=S(oe.Textarea)(({theme:i})=>({flex:1,padding:"7px 6px",fontFamily:i.typography.fonts.mono,fontSize:"12px",lineHeight:"18px","&::placeholder":{fontFamily:i.typography.fonts.base,fontSize:"13px"},"&:placeholder-shown":{padding:"7px 10px"}})),xe={bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13},Be=i=>{i.currentTarget.dispatchEvent(new Pe.KeyboardEvent("keydown",xe))},Me=i=>{i.currentTarget.select()},Oe=i=>()=>({name:{color:i.color.secondary},collapsed:{color:i.color.dark},ul:{listStyle:"none",margin:"0 0 0 1rem",padding:0},li:{outline:0}}),De=({name:i,value:e,onChange:t})=>{const a=re(),n=p.useMemo(()=>e&&ae(e),[e]),o=n!=null,[s,l]=p.useState(!o),[d,u]=p.useState(null),m=p.useCallback(y=>{try{y&&t(JSON.parse(y)),u(void 0)}catch(f){u(f)}},[t]),[c,E]=p.useState(!1),g=p.useCallback(()=>{t({}),E(!0)},[E]),h=p.useRef(null);if(p.useEffect(()=>{c&&h.current&&h.current.select()},[c]),!o)return r.createElement(ie,{id:me(i),onClick:g},"Set object");const b=r.createElement(Ue,{ref:h,id:ce(i),name:i,defaultValue:e===null?"":JSON.stringify(e,null,2),onBlur:y=>m(y.target.value),placeholder:"Edit JSON string...",autoFocus:c,valid:d?"error":null});return r.createElement(Se,null,["Object","Array"].includes(P(n))&&r.createElement(Ne,{onClick:y=>{y.preventDefault(),l(f=>!f)}},s?r.createElement(ue,null):r.createElement(de,null),r.createElement("span",null,"RAW")),s?b:r.createElement($,{data:n,rootName:i,onFullyUpdate:t,getStyle:Oe(a),cancelButtonElement:r.createElement(Y,{type:"button"},"Cancel"),editButtonElement:r.createElement(Y,{type:"submit"},"Save"),addButtonElement:r.createElement(Y,{type:"submit",primary:!0},"Save"),plusMenuElement:r.createElement(Q,{icon:"add"}),minusMenuElement:r.createElement(Q,{icon:"subtract"}),inputElement:(y,f,V,k)=>k?r.createElement(X,{onFocus:Me,onBlur:Be}):r.createElement(X,null),fallback:b}))};De.__docgenInfo={description:"",methods:[],displayName:"ObjectControl",props:{name:{required:!0,tsType:{name:"string"},description:""},value:{required:!1,tsType:{name:"T"},description:""},defaultValue:{required:!1,tsType:{name:"T"},description:""},argType:{required:!1,tsType:{name:"ArgType"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: T) => T | void",signature:{arguments:[{type:{name:"T"},name:"value"}],return:{name:"union",raw:"T | void",elements:[{name:"T"},{name:"void"}]}}},description:""},onFocus:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(evt: any) => void",signature:{arguments:[{type:{name:"any"},name:"evt"}],return:{name:"void"}}},description:""},theme:{required:!0,tsType:{name:"any"},description:""}}};export{De as O};
//# sourceMappingURL=Object-e0f2a1e7.js.map
