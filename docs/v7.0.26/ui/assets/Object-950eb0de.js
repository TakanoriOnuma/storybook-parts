import{j as s,a as q}from"./jsx-runtime-0f39435c.js";import{s as de}from"./index-d475d2ea.js";import{c as se}from"./cloneDeep-3d0d33b0.js";import{r as m}from"./index-6f814c40.js";import{e as B,u as ie}from"./index-5a529529.js";import{c as te,I as ue,o as ne}from"./index-90790cc0.js";import{g as ce,a as pe}from"./helpers-a9e07cde.js";const $="value",me="key",ye="Error",he="Object",fe="Array",Ee="String",ge="Number",be="Boolean",Ve="Date",ve="Null",Ce="Undefined",Se="Function",qe="Symbol",ae="ADD_DELTA_TYPE",le="REMOVE_DELTA_TYPE",re="UPDATE_DELTA_TYPE";function k(d){return d!==null&&typeof d=="object"&&!Array.isArray(d)&&typeof d[Symbol.iterator]=="function"?"Iterable":Object.prototype.toString.call(d).slice(8,-1)}function oe(d,e){const t=k(d),a=k(e);return(t==="Function"||a==="Function")&&a!==t}class M extends m.Component{constructor(e){super(e),this.state={inputRefKey:null,inputRefValue:null},this.refInputValue=this.refInputValue.bind(this),this.refInputKey=this.refInputKey.bind(this),this.onKeydown=this.onKeydown.bind(this),this.onSubmit=this.onSubmit.bind(this)}componentDidMount(){const{inputRefKey:e,inputRefValue:t}=this.state,{onlyValue:a}=this.props;e&&typeof e.focus=="function"&&e.focus(),a&&t&&typeof t.focus=="function"&&t.focus(),document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.onSubmit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.props.handleCancel()))}onSubmit(){const{handleAdd:e,onlyValue:t,onSubmitValueParser:a,keyPath:n,deep:o}=this.props,{inputRefKey:l,inputRefValue:r}=this.state,u={};if(!t){if(!l.value)return;u.key=l.value}u.newValue=a(!1,n,o,u.key,r.value),e(u)}refInputKey(e){this.state.inputRefKey=e}refInputValue(e){this.state.inputRefValue=e}render(){const{handleCancel:e,onlyValue:t,addButtonElement:a,cancelButtonElement:n,inputElementGenerator:o,keyPath:l,deep:r}=this.props,u=m.cloneElement(a,{onClick:this.onSubmit}),i=m.cloneElement(n,{onClick:e}),c=o($,l,r),p=m.cloneElement(c,{placeholder:"Value",ref:this.refInputValue});let g=null;if(!t){const h=o(me,l,r);g=m.cloneElement(h,{placeholder:"Key",ref:this.refInputKey})}return q("span",{className:"rejt-add-value-node",children:[g,p,i,u]})}}M.defaultProps={onlyValue:!1,addButtonElement:s("button",{children:"+"}),cancelButtonElement:s("button",{children:"c"})};class F extends m.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={data:e.data,name:e.name,keyPath:t,deep:e.deep,nextDeep:e.deep+1,collapsed:e.isCollapsed(t,e.deep,e.data),addFormVisible:!1},this.handleCollapseMode=this.handleCollapseMode.bind(this),this.handleRemoveItem=this.handleRemoveItem.bind(this),this.handleAddMode=this.handleAddMode.bind(this),this.handleAddValueAdd=this.handleAddValueAdd.bind(this),this.handleAddValueCancel=this.handleAddValueCancel.bind(this),this.handleEditValue=this.handleEditValue.bind(this),this.onChildUpdate=this.onChildUpdate.bind(this),this.renderCollapsed=this.renderCollapsed.bind(this),this.renderNotCollapsed=this.renderNotCollapsed.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}onChildUpdate(e,t){const{data:a,keyPath:n}=this.state;a[e]=t,this.setState({data:a});const{onUpdate:o}=this.props,l=n.length;o(n[l-1],a)}handleAddMode(){this.setState({addFormVisible:!0})}handleCollapseMode(){this.setState(e=>({collapsed:!e.collapsed}))}handleRemoveItem(e){return()=>{const{beforeRemoveAction:t,logger:a}=this.props,{data:n,keyPath:o,nextDeep:l}=this.state,r=n[e];t(e,o,l,r).then(()=>{const u={keyPath:o,deep:l,key:e,oldValue:r,type:le};n.splice(e,1),this.setState({data:n});const{onUpdate:i,onDeltaUpdate:c}=this.props;i(o[o.length-1],n),c(u)}).catch(a.error)}}handleAddValueAdd({newValue:e}){const{data:t,keyPath:a,nextDeep:n}=this.state,{beforeAddAction:o,logger:l}=this.props;o(t.length,a,n,e).then(()=>{const r=[...t,e];this.setState({data:r}),this.handleAddValueCancel();const{onUpdate:u,onDeltaUpdate:i}=this.props;u(a[a.length-1],r),i({type:ae,keyPath:a,deep:n,key:r.length-1,newValue:e})}).catch(l.error)}handleAddValueCancel(){this.setState({addFormVisible:!1})}handleEditValue({key:e,value:t}){return new Promise((a,n)=>{const{beforeUpdateAction:o}=this.props,{data:l,keyPath:r,nextDeep:u}=this.state,i=l[e];o(e,r,u,i,t).then(()=>{l[e]=t,this.setState({data:l});const{onUpdate:c,onDeltaUpdate:p}=this.props;c(r[r.length-1],l),p({type:re,keyPath:r,deep:u,key:e,newValue:t,oldValue:i}),a(void 0)}).catch(n)})}renderCollapsed(){const{name:e,data:t,keyPath:a,deep:n}=this.state,{handleRemove:o,readOnly:l,getStyle:r,dataType:u,minusMenuElement:i}=this.props,{minus:c,collapsed:p}=r(e,t,a,n,u),g=l(e,t,a,n,u),h=m.cloneElement(i,{onClick:o,className:"rejt-minus-menu",style:c});return q("span",{className:"rejt-collapsed",children:[q("span",{className:"rejt-collapsed-text",style:p,onClick:this.handleCollapseMode,children:["[...] ",t.length," ",t.length===1?"item":"items"]}),!g&&h]})}renderNotCollapsed(){const{name:e,data:t,keyPath:a,deep:n,addFormVisible:o,nextDeep:l}=this.state,{isCollapsed:r,handleRemove:u,onDeltaUpdate:i,readOnly:c,getStyle:p,dataType:g,addButtonElement:h,cancelButtonElement:E,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:C,plusMenuElement:S,beforeRemoveAction:R,beforeAddAction:j,beforeUpdateAction:V,logger:v,onSubmitValueParser:U}=this.props,{minus:A,plus:K,delimiter:D,ul:L,addForm:J}=p(e,t,a,n,g),T=c(e,t,a,n,g),x=m.cloneElement(S,{onClick:this.handleAddMode,className:"rejt-plus-menu",style:K}),X=m.cloneElement(C,{onClick:u,className:"rejt-minus-menu",style:A}),G=!0,z="[",W="]";return q("span",{className:"rejt-not-collapsed",children:[s("span",{className:"rejt-not-collapsed-delimiter",style:D,children:z}),!o&&x,s("ul",{className:"rejt-not-collapsed-list",style:L,children:t.map((Y,N)=>s(_,{name:`${N}`,data:Y,keyPath:a,deep:l,isCollapsed:r,handleRemove:this.handleRemoveItem(N),handleUpdateValue:this.handleEditValue,onUpdate:this.onChildUpdate,onDeltaUpdate:i,readOnly:c,getStyle:p,addButtonElement:h,cancelButtonElement:E,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:C,plusMenuElement:S,beforeRemoveAction:R,beforeAddAction:j,beforeUpdateAction:V,logger:v,onSubmitValueParser:U},N))}),!T&&o&&s("div",{className:"rejt-add-form",style:J,children:s(M,{handleAdd:this.handleAddValueAdd,handleCancel:this.handleAddValueCancel,onlyValue:G,addButtonElement:h,cancelButtonElement:E,inputElementGenerator:y,keyPath:a,deep:n,onSubmitValueParser:U})}),s("span",{className:"rejt-not-collapsed-delimiter",style:D,children:W}),!T&&X]})}render(){const{name:e,collapsed:t,data:a,keyPath:n,deep:o}=this.state,{dataType:l,getStyle:r}=this.props,u=t?this.renderCollapsed():this.renderNotCollapsed(),i=r(e,a,n,o,l);return q("div",{className:"rejt-array-node",children:[s("span",{onClick:this.handleCollapseMode,children:q("span",{className:"rejt-name",style:i.name,children:[e," :"," "]})}),u]})}}F.defaultProps={keyPath:[],deep:0,minusMenuElement:s("span",{children:" - "}),plusMenuElement:s("span",{children:" + "})};class I extends m.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={value:e.value,name:e.name,keyPath:t,deep:e.deep,editEnabled:!1,inputRef:null},this.handleEditMode=this.handleEditMode.bind(this),this.refInput=this.refInput.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onKeydown=this.onKeydown.bind(this)}static getDerivedStateFromProps(e,t){return e.value!==t.value?{value:e.value}:null}componentDidUpdate(){const{editEnabled:e,inputRef:t,name:a,value:n,keyPath:o,deep:l}=this.state,{readOnly:r,dataType:u}=this.props,i=r(a,n,o,l,u);e&&!i&&typeof t.focus=="function"&&t.focus()}componentDidMount(){document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.handleEdit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.handleCancelEdit()))}handleEdit(){const{handleUpdateValue:e,originalValue:t,logger:a,onSubmitValueParser:n,keyPath:o}=this.props,{inputRef:l,name:r,deep:u}=this.state;if(!l)return;const i=n(!0,o,u,r,l.value);e({value:i,key:r}).then(()=>{oe(t,i)||this.handleCancelEdit()}).catch(a.error)}handleEditMode(){this.setState({editEnabled:!0})}refInput(e){this.state.inputRef=e}handleCancelEdit(){this.setState({editEnabled:!1})}render(){const{name:e,value:t,editEnabled:a,keyPath:n,deep:o}=this.state,{handleRemove:l,originalValue:r,readOnly:u,dataType:i,getStyle:c,editButtonElement:p,cancelButtonElement:g,textareaElementGenerator:h,minusMenuElement:E,keyPath:b}=this.props,y=c(e,r,n,o,i);let f=null,C=null;const S=u(e,r,n,o,i);if(a&&!S){const R=h($,b,o,e,r,i),j=m.cloneElement(p,{onClick:this.handleEdit}),V=m.cloneElement(g,{onClick:this.handleCancelEdit}),v=m.cloneElement(R,{ref:this.refInput,defaultValue:r});f=q("span",{className:"rejt-edit-form",style:y.editForm,children:[v," ",V,j]}),C=null}else{f=s("span",{className:"rejt-value",style:y.value,onClick:S?null:this.handleEditMode,children:t});const R=m.cloneElement(E,{onClick:l,className:"rejt-minus-menu",style:y.minus});C=S?null:R}return q("li",{className:"rejt-function-value-node",style:y.li,children:[q("span",{className:"rejt-name",style:y.name,children:[e," :"," "]}),f,C]})}}I.defaultProps={keyPath:[],deep:0,handleUpdateValue:()=>{},editButtonElement:s("button",{children:"e"}),cancelButtonElement:s("button",{children:"c"}),minusMenuElement:s("span",{children:" - "})};class _ extends m.Component{constructor(e){super(e),this.state={data:e.data,name:e.name,keyPath:e.keyPath,deep:e.deep}}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}render(){const{data:e,name:t,keyPath:a,deep:n}=this.state,{isCollapsed:o,handleRemove:l,handleUpdateValue:r,onUpdate:u,onDeltaUpdate:i,readOnly:c,getStyle:p,addButtonElement:g,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:C,beforeRemoveAction:S,beforeAddAction:R,beforeUpdateAction:j,logger:V,onSubmitValueParser:v}=this.props,U=()=>!0,A=k(e);switch(A){case ye:return s(O,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:l,onUpdate:u,onDeltaUpdate:i,readOnly:U,dataType:A,getStyle:p,addButtonElement:g,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:C,beforeRemoveAction:S,beforeAddAction:R,beforeUpdateAction:j,logger:V,onSubmitValueParser:v});case he:return s(O,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:l,onUpdate:u,onDeltaUpdate:i,readOnly:c,dataType:A,getStyle:p,addButtonElement:g,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:C,beforeRemoveAction:S,beforeAddAction:R,beforeUpdateAction:j,logger:V,onSubmitValueParser:v});case fe:return s(F,{data:e,name:t,isCollapsed:o,keyPath:a,deep:n,handleRemove:l,onUpdate:u,onDeltaUpdate:i,readOnly:c,dataType:A,getStyle:p,addButtonElement:g,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,textareaElementGenerator:y,minusMenuElement:f,plusMenuElement:C,beforeRemoveAction:S,beforeAddAction:R,beforeUpdateAction:j,logger:V,onSubmitValueParser:v});case Ee:return s(P,{name:t,value:`"${e}"`,originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case ge:return s(P,{name:t,value:e,originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case be:return s(P,{name:t,value:e?"true":"false",originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case Ve:return s(P,{name:t,value:e.toISOString(),originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:U,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case ve:return s(P,{name:t,value:"null",originalValue:"null",keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case Ce:return s(P,{name:t,value:"undefined",originalValue:"undefined",keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});case Se:return s(I,{name:t,value:e.toString(),originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:c,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,textareaElementGenerator:y,minusMenuElement:f,logger:V,onSubmitValueParser:v});case qe:return s(P,{name:t,value:e.toString(),originalValue:e,keyPath:a,deep:n,handleRemove:l,handleUpdateValue:r,readOnly:U,dataType:A,getStyle:p,cancelButtonElement:h,editButtonElement:E,inputElementGenerator:b,minusMenuElement:f,logger:V,onSubmitValueParser:v});default:return null}}}_.defaultProps={keyPath:[],deep:0};class O extends m.Component{constructor(e){super(e);const t=e.deep===-1?[]:[...e.keyPath,e.name];this.state={name:e.name,data:e.data,keyPath:t,deep:e.deep,nextDeep:e.deep+1,collapsed:e.isCollapsed(t,e.deep,e.data),addFormVisible:!1},this.handleCollapseMode=this.handleCollapseMode.bind(this),this.handleRemoveValue=this.handleRemoveValue.bind(this),this.handleAddMode=this.handleAddMode.bind(this),this.handleAddValueAdd=this.handleAddValueAdd.bind(this),this.handleAddValueCancel=this.handleAddValueCancel.bind(this),this.handleEditValue=this.handleEditValue.bind(this),this.onChildUpdate=this.onChildUpdate.bind(this),this.renderCollapsed=this.renderCollapsed.bind(this),this.renderNotCollapsed=this.renderNotCollapsed.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data?{data:e.data}:null}onChildUpdate(e,t){const{data:a,keyPath:n}=this.state;a[e]=t,this.setState({data:a});const{onUpdate:o}=this.props,l=n.length;o(n[l-1],a)}handleAddMode(){this.setState({addFormVisible:!0})}handleAddValueCancel(){this.setState({addFormVisible:!1})}handleAddValueAdd({key:e,newValue:t}){const{data:a,keyPath:n,nextDeep:o}=this.state,{beforeAddAction:l,logger:r}=this.props;l(e,n,o,t).then(()=>{a[e]=t,this.setState({data:a}),this.handleAddValueCancel();const{onUpdate:u,onDeltaUpdate:i}=this.props;u(n[n.length-1],a),i({type:ae,keyPath:n,deep:o,key:e,newValue:t})}).catch(r.error)}handleRemoveValue(e){return()=>{const{beforeRemoveAction:t,logger:a}=this.props,{data:n,keyPath:o,nextDeep:l}=this.state,r=n[e];t(e,o,l,r).then(()=>{const u={keyPath:o,deep:l,key:e,oldValue:r,type:le};delete n[e],this.setState({data:n});const{onUpdate:i,onDeltaUpdate:c}=this.props;i(o[o.length-1],n),c(u)}).catch(a.error)}}handleCollapseMode(){this.setState(e=>({collapsed:!e.collapsed}))}handleEditValue({key:e,value:t}){return new Promise((a,n)=>{const{beforeUpdateAction:o}=this.props,{data:l,keyPath:r,nextDeep:u}=this.state,i=l[e];o(e,r,u,i,t).then(()=>{l[e]=t,this.setState({data:l});const{onUpdate:c,onDeltaUpdate:p}=this.props;c(r[r.length-1],l),p({type:re,keyPath:r,deep:u,key:e,newValue:t,oldValue:i}),a()}).catch(n)})}renderCollapsed(){const{name:e,keyPath:t,deep:a,data:n}=this.state,{handleRemove:o,readOnly:l,dataType:r,getStyle:u,minusMenuElement:i}=this.props,{minus:c,collapsed:p}=u(e,n,t,a,r),g=Object.getOwnPropertyNames(n),h=l(e,n,t,a,r),E=m.cloneElement(i,{onClick:o,className:"rejt-minus-menu",style:c});return q("span",{className:"rejt-collapsed",children:[q("span",{className:"rejt-collapsed-text",style:p,onClick:this.handleCollapseMode,children:["{...}"," ",g.length," ",g.length===1?"key":"keys"]}),!h&&E]})}renderNotCollapsed(){const{name:e,data:t,keyPath:a,deep:n,nextDeep:o,addFormVisible:l}=this.state,{isCollapsed:r,handleRemove:u,onDeltaUpdate:i,readOnly:c,getStyle:p,dataType:g,addButtonElement:h,cancelButtonElement:E,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:C,plusMenuElement:S,beforeRemoveAction:R,beforeAddAction:j,beforeUpdateAction:V,logger:v,onSubmitValueParser:U}=this.props,{minus:A,plus:K,addForm:D,ul:L,delimiter:J}=p(e,t,a,n,g),T=Object.getOwnPropertyNames(t),x=c(e,t,a,n,g),X=m.cloneElement(S,{onClick:this.handleAddMode,className:"rejt-plus-menu",style:K}),G=m.cloneElement(C,{onClick:u,className:"rejt-minus-menu",style:A}),z=T.map(N=>s(_,{name:N,data:t[N],keyPath:a,deep:o,isCollapsed:r,handleRemove:this.handleRemoveValue(N),handleUpdateValue:this.handleEditValue,onUpdate:this.onChildUpdate,onDeltaUpdate:i,readOnly:c,getStyle:p,addButtonElement:h,cancelButtonElement:E,editButtonElement:b,inputElementGenerator:y,textareaElementGenerator:f,minusMenuElement:C,plusMenuElement:S,beforeRemoveAction:R,beforeAddAction:j,beforeUpdateAction:V,logger:v,onSubmitValueParser:U},N)),W="{",Y="}";return q("span",{className:"rejt-not-collapsed",children:[s("span",{className:"rejt-not-collapsed-delimiter",style:J,children:W}),!x&&X,s("ul",{className:"rejt-not-collapsed-list",style:L,children:z}),!x&&l&&s("div",{className:"rejt-add-form",style:D,children:s(M,{handleAdd:this.handleAddValueAdd,handleCancel:this.handleAddValueCancel,addButtonElement:h,cancelButtonElement:E,inputElementGenerator:y,keyPath:a,deep:n,onSubmitValueParser:U})}),s("span",{className:"rejt-not-collapsed-delimiter",style:J,children:Y}),!x&&G]})}render(){const{name:e,collapsed:t,data:a,keyPath:n,deep:o}=this.state,{getStyle:l,dataType:r}=this.props,u=t?this.renderCollapsed():this.renderNotCollapsed(),i=l(e,a,n,o,r);return q("div",{className:"rejt-object-node",children:[s("span",{onClick:this.handleCollapseMode,children:q("span",{className:"rejt-name",style:i.name,children:[e," :"," "]})}),u]})}}O.defaultProps={keyPath:[],deep:0,minusMenuElement:s("span",{children:" - "}),plusMenuElement:s("span",{children:" + "})};class P extends m.Component{constructor(e){super(e);const t=[...e.keyPath,e.name];this.state={value:e.value,name:e.name,keyPath:t,deep:e.deep,editEnabled:!1,inputRef:null},this.handleEditMode=this.handleEditMode.bind(this),this.refInput=this.refInput.bind(this),this.handleCancelEdit=this.handleCancelEdit.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onKeydown=this.onKeydown.bind(this)}static getDerivedStateFromProps(e,t){return e.value!==t.value?{value:e.value}:null}componentDidUpdate(){const{editEnabled:e,inputRef:t,name:a,value:n,keyPath:o,deep:l}=this.state,{readOnly:r,dataType:u}=this.props,i=r(a,n,o,l,u);e&&!i&&typeof t.focus=="function"&&t.focus()}componentDidMount(){document.addEventListener("keydown",this.onKeydown)}componentWillUnmount(){document.removeEventListener("keydown",this.onKeydown)}onKeydown(e){e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||e.repeat||((e.code==="Enter"||e.key==="Enter")&&(e.preventDefault(),this.handleEdit()),(e.code==="Escape"||e.key==="Escape")&&(e.preventDefault(),this.handleCancelEdit()))}handleEdit(){const{handleUpdateValue:e,originalValue:t,logger:a,onSubmitValueParser:n,keyPath:o}=this.props,{inputRef:l,name:r,deep:u}=this.state;if(!l)return;const i=n(!0,o,u,r,l.value);e({value:i,key:r}).then(()=>{oe(t,i)||this.handleCancelEdit()}).catch(a.error)}handleEditMode(){this.setState({editEnabled:!0})}refInput(e){this.state.inputRef=e}handleCancelEdit(){this.setState({editEnabled:!1})}render(){const{name:e,value:t,editEnabled:a,keyPath:n,deep:o}=this.state,{handleRemove:l,originalValue:r,readOnly:u,dataType:i,getStyle:c,editButtonElement:p,cancelButtonElement:g,inputElementGenerator:h,minusMenuElement:E,keyPath:b}=this.props,y=c(e,r,n,o,i),f=u(e,r,n,o,i),C=a&&!f,S=h($,b,o,e,r,i),R=m.cloneElement(p,{onClick:this.handleEdit}),j=m.cloneElement(g,{onClick:this.handleCancelEdit}),V=m.cloneElement(S,{ref:this.refInput,defaultValue:JSON.stringify(r)}),v=m.cloneElement(E,{onClick:l,className:"rejt-minus-menu",style:y.minus});return q("li",{className:"rejt-value-node",style:y.li,children:[q("span",{className:"rejt-name",style:y.name,children:[e," : "]}),C?q("span",{className:"rejt-edit-form",style:y.editForm,children:[V," ",j,R]}):s("span",{className:"rejt-value",style:y.value,onClick:f?null:this.handleEditMode,children:String(t)}),!f&&!C&&v]})}}P.defaultProps={keyPath:[],deep:0,handleUpdateValue:()=>Promise.resolve(),editButtonElement:s("button",{children:"e"}),cancelButtonElement:s("button",{children:"c"}),minusMenuElement:s("span",{children:" - "})};try{M.displayName="JsonAddValue",M.__docgenInfo={description:"",displayName:"JsonAddValue",props:{handleAdd:{defaultValue:null,description:"",name:"handleAdd",required:!0,type:{name:"(...args: any) => any"}},handleCancel:{defaultValue:null,description:"",name:"handleCancel",required:!0,type:{name:"(...args: any) => any"}},onlyValue:{defaultValue:{value:"false"},description:"",name:"onlyValue",required:!1,type:{name:"boolean"}},addButtonElement:{defaultValue:{value:"<button>+</button>"},description:"",name:"addButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElementGenerator:{defaultValue:null,description:"",name:"inputElementGenerator",required:!0,type:{name:"(...args: any) => any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}try{F.displayName="JsonArray",F.__docgenInfo={description:"",displayName:"JsonArray",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any[]"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!0,type:{name:"(...args: any) => any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},handleRemove:{defaultValue:null,description:"",name:"handleRemove",required:!1,type:{name:"(...args: any) => any"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(...args: any) => any"}},onDeltaUpdate:{defaultValue:null,description:"",name:"onDeltaUpdate",required:!0,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"(...args: any) => any"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"string"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!0,type:{name:"(...args: any) => any"}},addButtonElement:{defaultValue:{value:"<button>+</button>"},description:"",name:"addButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},editButtonElement:{defaultValue:{value:"<button>e</button>"},description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElementGenerator:{defaultValue:null,description:"",name:"inputElementGenerator",required:!0,type:{name:"(...args: any) => any"}},textareaElementGenerator:{defaultValue:null,description:"",name:"textareaElementGenerator",required:!0,type:{name:"(...args: any) => any"}},minusMenuElement:{defaultValue:{value:"<span> - </span>"},description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},plusMenuElement:{defaultValue:{value:"<span> + </span>"},description:"",name:"plusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},beforeRemoveAction:{defaultValue:null,description:"",name:"beforeRemoveAction",required:!1,type:{name:"(...args: any) => any"}},beforeAddAction:{defaultValue:null,description:"",name:"beforeAddAction",required:!1,type:{name:"(...args: any) => any"}},beforeUpdateAction:{defaultValue:null,description:"",name:"beforeUpdateAction",required:!1,type:{name:"(...args: any) => any"}},logger:{defaultValue:null,description:"",name:"logger",required:!0,type:{name:"any"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}try{I.displayName="JsonFunctionValue",I.__docgenInfo={description:"",displayName:"JsonFunctionValue",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},handleRemove:{defaultValue:null,description:"",name:"handleRemove",required:!1,type:{name:"(...args: any) => any"}},handleUpdateValue:{defaultValue:{value:"() => Promise.resolve()"},description:"",name:"handleUpdateValue",required:!1,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"(...args: any) => any"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"string"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!0,type:{name:"(...args: any) => any"}},editButtonElement:{defaultValue:{value:"<button>e</button>"},description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},textareaElementGenerator:{defaultValue:null,description:"",name:"textareaElementGenerator",required:!0,type:{name:"(...args: any) => any"}},minusMenuElement:{defaultValue:{value:"<span> - </span>"},description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},logger:{defaultValue:null,description:"",name:"logger",required:!0,type:{name:"any"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}try{_.displayName="JsonNode",_.__docgenInfo={description:"",displayName:"JsonNode",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},data:{defaultValue:null,description:"",name:"data",required:!1,type:{name:"any"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!0,type:{name:"(...args: any) => any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},handleRemove:{defaultValue:null,description:"",name:"handleRemove",required:!1,type:{name:"(...args: any) => any"}},handleUpdateValue:{defaultValue:{value:"() => Promise.resolve()"},description:"",name:"handleUpdateValue",required:!1,type:{name:"(...args: any) => any"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(...args: any) => any"}},onDeltaUpdate:{defaultValue:null,description:"",name:"onDeltaUpdate",required:!0,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"(...args: any) => any"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!0,type:{name:"(...args: any) => any"}},addButtonElement:{defaultValue:{value:"<button>+</button>"},description:"",name:"addButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},editButtonElement:{defaultValue:{value:"<button>e</button>"},description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElementGenerator:{defaultValue:null,description:"",name:"inputElementGenerator",required:!0,type:{name:"(...args: any) => any"}},textareaElementGenerator:{defaultValue:null,description:"",name:"textareaElementGenerator",required:!0,type:{name:"(...args: any) => any"}},minusMenuElement:{defaultValue:{value:"<span> - </span>"},description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},plusMenuElement:{defaultValue:{value:"<span> + </span>"},description:"",name:"plusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},beforeRemoveAction:{defaultValue:null,description:"",name:"beforeRemoveAction",required:!1,type:{name:"(...args: any) => any"}},beforeAddAction:{defaultValue:null,description:"",name:"beforeAddAction",required:!1,type:{name:"(...args: any) => any"}},beforeUpdateAction:{defaultValue:null,description:"",name:"beforeUpdateAction",required:!1,type:{name:"(...args: any) => any"}},logger:{defaultValue:null,description:"",name:"logger",required:!0,type:{name:"object"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}try{O.displayName="JsonObject",O.__docgenInfo={description:"",displayName:"JsonObject",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"Record<string, any>"}},name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!0,type:{name:"(...args: any) => any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},handleRemove:{defaultValue:null,description:"",name:"handleRemove",required:!1,type:{name:"(...args: any) => any"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!0,type:{name:"(...args: any) => any"}},onDeltaUpdate:{defaultValue:null,description:"",name:"onDeltaUpdate",required:!0,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"(...args: any) => any"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"string"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!0,type:{name:"(...args: any) => any"}},addButtonElement:{defaultValue:{value:"<button>+</button>"},description:"",name:"addButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},editButtonElement:{defaultValue:{value:"<button>e</button>"},description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElementGenerator:{defaultValue:null,description:"",name:"inputElementGenerator",required:!0,type:{name:"(...args: any) => any"}},textareaElementGenerator:{defaultValue:null,description:"",name:"textareaElementGenerator",required:!0,type:{name:"(...args: any) => any"}},minusMenuElement:{defaultValue:{value:"<span> - </span>"},description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},plusMenuElement:{defaultValue:{value:"<span> + </span>"},description:"",name:"plusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},beforeRemoveAction:{defaultValue:null,description:"",name:"beforeRemoveAction",required:!1,type:{name:"(...args: any) => any"}},beforeAddAction:{defaultValue:null,description:"",name:"beforeAddAction",required:!1,type:{name:"(...args: any) => any"}},beforeUpdateAction:{defaultValue:null,description:"",name:"beforeUpdateAction",required:!1,type:{name:"(...args: any) => any"}},logger:{defaultValue:null,description:"",name:"logger",required:!0,type:{name:"any"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}try{P.displayName="JsonValue",P.__docgenInfo={description:"",displayName:"JsonValue",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!0,type:{name:"any"}},originalValue:{defaultValue:null,description:"",name:"originalValue",required:!1,type:{name:"any"}},keyPath:{defaultValue:{value:"[]"},description:"",name:"keyPath",required:!1,type:{name:"string[]"}},deep:{defaultValue:{value:"0"},description:"",name:"deep",required:!1,type:{name:"number"}},handleRemove:{defaultValue:null,description:"",name:"handleRemove",required:!1,type:{name:"(...args: any) => any"}},handleUpdateValue:{defaultValue:{value:"() => Promise.resolve()"},description:"",name:"handleUpdateValue",required:!1,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!0,type:{name:"(...args: any) => any"}},dataType:{defaultValue:null,description:"",name:"dataType",required:!1,type:{name:"string"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!0,type:{name:"(...args: any) => any"}},editButtonElement:{defaultValue:{value:"<button>e</button>"},description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:{value:"<button>c</button>"},description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElementGenerator:{defaultValue:null,description:"",name:"inputElementGenerator",required:!0,type:{name:"(...args: any) => any"}},minusMenuElement:{defaultValue:{value:"<span> - </span>"},description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},logger:{defaultValue:null,description:"",name:"logger",required:!0,type:{name:"any"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!0,type:{name:"(...args: any) => any"}}}}}catch{}const Re={minus:{color:"red"},plus:{color:"green"},collapsed:{color:"grey"},delimiter:{},ul:{padding:"0px",margin:"0 0 0 25px",listStyle:"none"},name:{color:"#2287CD"},addForm:{}},Ae={minus:{color:"red"},plus:{color:"green"},collapsed:{color:"grey"},delimiter:{},ul:{padding:"0px",margin:"0 0 0 25px",listStyle:"none"},name:{color:"#2287CD"},addForm:{}},je={minus:{color:"red"},editForm:{},value:{color:"#7bba3d"},li:{minHeight:"22px",lineHeight:"22px",outline:"0px"},name:{color:"#2287CD"}};function Pe(d){let e=d;if(e.indexOf("function")===0)return(0,eval)(`(${e})`);try{e=JSON.parse(d)}catch{}return e}class w extends m.Component{constructor(e){super(e),this.state={data:e.data,rootName:e.rootName},this.onUpdate=this.onUpdate.bind(this),this.removeRoot=this.removeRoot.bind(this)}static getDerivedStateFromProps(e,t){return e.data!==t.data||e.rootName!==t.rootName?{data:e.data,rootName:e.rootName}:null}onUpdate(e,t){this.setState({data:t}),this.props.onFullyUpdate(t)}removeRoot(){this.onUpdate(null,null)}render(){const{data:e,rootName:t}=this.state,{isCollapsed:a,onDeltaUpdate:n,readOnly:o,getStyle:l,addButtonElement:r,cancelButtonElement:u,editButtonElement:i,inputElement:c,textareaElement:p,minusMenuElement:g,plusMenuElement:h,beforeRemoveAction:E,beforeAddAction:b,beforeUpdateAction:y,logger:f,onSubmitValueParser:C,fallback:S=null}=this.props,R=k(e);let j=o;k(o)==="Boolean"&&(j=()=>o);let V=c;c&&k(c)!=="Function"&&(V=()=>c);let v=p;return p&&k(p)!=="Function"&&(v=()=>p),R==="Object"||R==="Array"?s("div",{className:"rejt-tree",children:s(_,{data:e,name:t,deep:-1,isCollapsed:a,onUpdate:this.onUpdate,onDeltaUpdate:n,readOnly:j,getStyle:l,addButtonElement:r,cancelButtonElement:u,editButtonElement:i,inputElementGenerator:V,textareaElementGenerator:v,minusMenuElement:g,plusMenuElement:h,handleRemove:this.removeRoot,beforeRemoveAction:E,beforeAddAction:b,beforeUpdateAction:y,logger:f,onSubmitValueParser:C})}):S}}w.defaultProps={rootName:"root",isCollapsed:(d,e)=>e!==-1,getStyle:(d,e,t,a,n)=>{switch(n){case"Object":case"Error":return Re;case"Array":return Ae;default:return je}},readOnly:()=>!1,onFullyUpdate:()=>{},onDeltaUpdate:()=>{},beforeRemoveAction:()=>Promise.resolve(),beforeAddAction:()=>Promise.resolve(),beforeUpdateAction:()=>Promise.resolve(),logger:{error:()=>{}},onSubmitValueParser:(d,e,t,a,n)=>Pe(n),inputElement:()=>s("input",{}),textareaElement:()=>s("textarea",{}),fallback:null};try{w.displayName="JsonTree",w.__docgenInfo={description:"",displayName:"JsonTree",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"any"}},rootName:{defaultValue:null,description:"",name:"rootName",required:!1,type:{name:"string"}},isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!1,type:{name:"(...args: any) => any"}},onFullyUpdate:{defaultValue:null,description:"",name:"onFullyUpdate",required:!1,type:{name:"(...args: any) => any"}},onDeltaUpdate:{defaultValue:null,description:"",name:"onDeltaUpdate",required:!1,type:{name:"(...args: any) => any"}},readOnly:{defaultValue:null,description:"",name:"readOnly",required:!1,type:{name:"boolean | ((...args: any) => any)"}},getStyle:{defaultValue:null,description:"",name:"getStyle",required:!1,type:{name:"(...args: any) => any"}},addButtonElement:{defaultValue:null,description:"",name:"addButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},cancelButtonElement:{defaultValue:null,description:"",name:"cancelButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},editButtonElement:{defaultValue:null,description:"",name:"editButtonElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},inputElement:{defaultValue:null,description:"",name:"inputElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | ((...args: any) => ReactElement<any, string | JSXElementConstructor<any>>)"}},textareaElement:{defaultValue:null,description:"",name:"textareaElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>> | ((...args: any) => ReactElement<any, string | JSXElementConstructor<any>>)"}},minusMenuElement:{defaultValue:null,description:"",name:"minusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},plusMenuElement:{defaultValue:null,description:"",name:"plusMenuElement",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},fallback:{defaultValue:null,description:"",name:"fallback",required:!1,type:{name:"ReactElement<any, string | JSXElementConstructor<any>>"}},beforeRemoveAction:{defaultValue:null,description:"",name:"beforeRemoveAction",required:!1,type:{name:"(...args: any) => Promise<any>"}},beforeAddAction:{defaultValue:null,description:"",name:"beforeAddAction",required:!1,type:{name:"(...args: any) => Promise<any>"}},beforeUpdateAction:{defaultValue:null,description:"",name:"beforeUpdateAction",required:!1,type:{name:"(...args: any) => any"}},logger:{defaultValue:null,description:"",name:"logger",required:!1,type:{name:"object"}},onSubmitValueParser:{defaultValue:null,description:"",name:"onSubmitValueParser",required:!1,type:{name:"(...args: any) => any"}}}}}catch{}try{k.displayName="getObjectType",k.__docgenInfo={description:"Get Object type.",displayName:"getObjectType",props:{}}}catch{}const{window:ke}=de,Ue=B.div(({theme:d})=>({position:"relative",display:"flex",".rejt-tree":{marginLeft:"1rem",fontSize:"13px"},".rejt-value-node, .rejt-object-node > .rejt-collapsed, .rejt-array-node > .rejt-collapsed, .rejt-object-node > .rejt-not-collapsed, .rejt-array-node > .rejt-not-collapsed":{"& > svg":{opacity:0,transition:"opacity 0.2s"}},".rejt-value-node:hover, .rejt-object-node:hover > .rejt-collapsed, .rejt-array-node:hover > .rejt-collapsed, .rejt-object-node:hover > .rejt-not-collapsed, .rejt-array-node:hover > .rejt-not-collapsed":{"& > svg":{opacity:1}},".rejt-edit-form button":{display:"none"},".rejt-add-form":{marginLeft:10},".rejt-add-value-node":{display:"inline-flex",alignItems:"center"},".rejt-name":{lineHeight:"22px"},".rejt-not-collapsed-delimiter":{lineHeight:"22px"},".rejt-plus-menu":{marginLeft:5},".rejt-object-node > span > *, .rejt-array-node > span > *":{position:"relative",zIndex:2},".rejt-object-node, .rejt-array-node":{position:"relative"},".rejt-object-node > span:first-of-type::after, .rejt-array-node > span:first-of-type::after, .rejt-collapsed::before, .rejt-not-collapsed::before":{content:'""',position:"absolute",top:0,display:"block",width:"100%",marginLeft:"-1rem",padding:"0 4px 0 1rem",height:22},".rejt-collapsed::before, .rejt-not-collapsed::before":{zIndex:1,background:"transparent",borderRadius:4,transition:"background 0.2s",pointerEvents:"none",opacity:.1},".rejt-object-node:hover, .rejt-array-node:hover":{"& > .rejt-collapsed::before, & > .rejt-not-collapsed::before":{background:d.color.secondary}},".rejt-collapsed::after, .rejt-not-collapsed::after":{content:'""',position:"absolute",display:"inline-block",pointerEvents:"none",width:0,height:0},".rejt-collapsed::after":{left:-8,top:8,borderTop:"3px solid transparent",borderBottom:"3px solid transparent",borderLeft:"3px solid rgba(153,153,153,0.6)"},".rejt-not-collapsed::after":{left:-10,top:10,borderTop:"3px solid rgba(153,153,153,0.6)",borderLeft:"3px solid transparent",borderRight:"3px solid transparent"},".rejt-value":{display:"inline-block",border:"1px solid transparent",borderRadius:4,margin:"1px 0",padding:"0 4px",cursor:"text",color:d.color.defaultText},".rejt-value-node:hover > .rejt-value":{background:d.color.lighter,borderColor:d.appBorderColor}})),H=B.button(({theme:d,primary:e})=>({border:0,height:20,margin:1,borderRadius:4,background:e?d.color.secondary:"transparent",color:e?d.color.lightest:d.color.dark,fontWeight:e?"bold":"normal",cursor:"pointer",order:e?"initial":9})),Q=B(te)(({theme:d,icon:e,disabled:t})=>({display:"inline-block",verticalAlign:"middle",width:15,height:15,padding:3,marginLeft:5,cursor:t?"not-allowed":"pointer",color:d.textMutedColor,"&:hover":t?{}:{color:e==="subtract"?d.color.negative:d.color.ancillary},"svg + &":{marginLeft:0}})),Z=B.input(({theme:d,placeholder:e})=>({outline:0,margin:e?1:"1px 0",padding:"3px 4px",color:d.color.defaultText,background:d.background.app,border:`1px solid ${d.appBorderColor}`,borderRadius:4,lineHeight:"14px",width:e==="Key"?80:120,"&:focus":{border:`1px solid ${d.color.secondary}`}})),Ne=B(ue)(({theme:d})=>({position:"absolute",zIndex:2,top:2,right:2,height:21,padding:"0 3px",background:d.background.bar,border:`1px solid ${d.appBorderColor}`,borderRadius:3,color:d.textMutedColor,fontSize:"9px",fontWeight:"bold",textDecoration:"none",span:{marginLeft:3,marginTop:1}})),_e=B(ne.Textarea)(({theme:d})=>({flex:1,padding:"7px 6px",fontFamily:d.typography.fonts.mono,fontSize:"12px",lineHeight:"18px","&::placeholder":{fontFamily:d.typography.fonts.base,fontSize:"13px"},"&:placeholder-shown":{padding:"7px 10px"}})),Be={bubbles:!0,cancelable:!0,key:"Enter",code:"Enter",keyCode:13},xe=d=>{d.currentTarget.dispatchEvent(new ke.KeyboardEvent("keydown",Be))},Me=d=>{d.currentTarget.select()},Oe=d=>()=>({name:{color:d.color.secondary},collapsed:{color:d.color.dark},ul:{listStyle:"none",margin:"0 0 0 1rem",padding:0},li:{outline:0}}),ee=({name:d,value:e,onChange:t})=>{const a=ie(),n=m.useMemo(()=>e&&se(e),[e]),o=n!=null,[l,r]=m.useState(!o),[u,i]=m.useState(null),c=m.useCallback(y=>{try{y&&t(JSON.parse(y)),i(void 0)}catch(f){i(f)}},[t]),[p,g]=m.useState(!1),h=m.useCallback(()=>{t({}),g(!0)},[g]),E=m.useRef(null);if(m.useEffect(()=>{p&&E.current&&E.current.select()},[p]),!o)return s(ne.Button,{id:ce(d),onClick:h,children:"Set object"});const b=s(_e,{ref:E,id:pe(d),name:d,defaultValue:e===null?"":JSON.stringify(e,null,2),onBlur:y=>c(y.target.value),placeholder:"Edit JSON string...",autoFocus:p,valid:u?"error":null});return q(Ue,{children:[["Object","Array"].includes(k(n))&&q(Ne,{href:"#",onClick:y=>{y.preventDefault(),r(f=>!f)},children:[s(te,{icon:l?"eyeclose":"eye"}),s("span",{children:"RAW"})]}),l?b:s(w,{data:n,rootName:d,onFullyUpdate:t,getStyle:Oe(a),cancelButtonElement:s(H,{type:"button",children:"Cancel"}),editButtonElement:s(H,{type:"submit",children:"Save"}),addButtonElement:s(H,{type:"submit",primary:!0,children:"Save"}),plusMenuElement:s(Q,{icon:"add"}),minusMenuElement:s(Q,{icon:"subtract"}),inputElement:(y,f,C,S)=>S?s(Z,{onFocus:Me,onBlur:xe}):s(Z,{}),fallback:b})]})};try{ee.displayName="ObjectControl",ee.__docgenInfo={description:"",displayName:"ObjectControl",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},argType:{defaultValue:null,description:"",name:"argType",required:!1,type:{name:"ArgType"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: any) => any"}},onFocus:{defaultValue:null,description:"",name:"onFocus",required:!1,type:{name:"(evt: any) => void"}},onBlur:{defaultValue:null,description:"",name:"onBlur",required:!1,type:{name:"(evt: any) => void"}},theme:{defaultValue:null,description:"",name:"theme",required:!0,type:{name:"any"}}}}}catch{}export{ee as O};
//# sourceMappingURL=Object-950eb0de.js.map
